"use strict";var PO=Object.defineProperty,kO=Object.defineProperties,FO=Object.getOwnPropertyDescriptors,mM=Object.getOwnPropertySymbols,LO=Object.prototype.hasOwnProperty,VO=Object.prototype.propertyIsEnumerable,yM=(Qe,Ee,O)=>Ee in Qe?PO(Qe,Ee,{enumerable:!0,configurable:!0,writable:!0,value:O}):Qe[Ee]=O,_M=(Qe,Ee)=>{for(var O in Ee||(Ee={}))LO.call(Ee,O)&&yM(Qe,O,Ee[O]);if(mM)for(var O of mM(Ee))VO.call(Ee,O)&&yM(Qe,O,Ee[O]);return Qe},vM=(Qe,Ee)=>kO(Qe,FO(Ee));(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[179],{2011:(Qe,Ee,O)=>{O.d(Ee,{hO:()=>Ge,xv:()=>ce,Dh:()=>se,GT:()=>fe,cc:()=>Ae,on:()=>j,pX:()=>ne});var g=O(5e3),J=O(127),P=O(5813);Qe=O.hmd(Qe);const ae=["ngOnDestroy"],ne=(be,qe,Ze,Ce={})=>new Proxy(be,{get:(ve,we)=>Ze.runOutsideAngular(()=>{var Be;if(be[we])return(null===(Be=null==Ce?void 0:Ce.spy)||void 0===Be?void 0:Be.get)&&Ce.spy.get(we,be[we]),be[we];if(ae.indexOf(we)>-1)return()=>{};const Ve=qe.toPromise().then(B=>{const _e=B&&B[we];return"function"==typeof _e?_e.bind(B):_e&&_e.then?_e.then(Z=>Ze.run(()=>Z)):Ze.run(()=>_e)});return new Proxy(()=>{},{get:(B,_e)=>Ve[_e],apply:(B,_e,Z)=>Ve.then(re=>{var X;const me=re&&re(...Z);return(null===(X=null==Ce?void 0:Ce.spy)||void 0===X?void 0:X.apply)&&Ce.spy.apply(we,Z,me),me})})})}),fe=(be,qe)=>{qe.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Ce=>{Object.defineProperty(be.prototype,Ce,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Ce))})})};class ue{constructor(qe){return qe}}const se=new g.OlP("angularfire2.app.options"),ce=new g.OlP("angularfire2.app.name");function j(be,qe,Ze){const ve="object"==typeof Ze&&Ze||{};ve.name=ve.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Be=J.Z.apps.filter(Ve=>Ve&&Ve.name===ve.name)[0]||qe.runOutsideAngular(()=>J.Z.initializeApp(be,ve));try{JSON.stringify(be)!==JSON.stringify(Be.options)&&U("error",`${Be.name} Firebase App already initialized with different options${Qe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ve){}return new ue(Be)}const U=(be,...qe)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[be](...qe)},ee={provide:ue,useFactory:j,deps:[se,g.R0b,[new g.FiY,ce]]};let Ge=(()=>{class be{constructor(Ze){J.Z.registerVersion("angularfire",P.q4.full,"core"),J.Z.registerVersion("angularfire",P.q4.full,"app-compat"),J.Z.registerVersion("angular",g.q4F.full,Ze.toString())}static initializeApp(Ze,Ce){return{ngModule:be,providers:[{provide:se,useValue:Ze},{provide:ce,useValue:Ce}]}}}return be.\u0275fac=function(Ze){return new(Ze||be)(g.LFG(g.Lbi))},be.\u0275mod=g.oAB({type:be}),be.\u0275inj=g.cJS({providers:[ee]}),be})();function Ae(be,qe,Ze,Ce,ve){const[,we,Be]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===be)||[];if(we)return function Re(be,qe){try{return be.toString()===qe.toString()}catch(Ze){return be===qe}}(ve,Be)||(he("error",`${qe} was already initialized on the ${Ze} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:ve,was:Be})),we;{const Ve=Ce();return globalThis.\u0275AngularfireInstanceCache.push([be,Ve,ve]),Ve}}const Le=!!Qe.hot,he=(be,...qe)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[be](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Qe,Ee,O)=>{O.d(Ee,{q4:()=>Cs,iC:()=>As,HU:()=>_h,vb:()=>zc,JM:()=>cy});var g=O(5e3),J=O(5867),P=O(5861),ae=O(9681),ne=O(2090),fe=O(4859),ue=O(1877),se=O(8766);const ce="@firebase/installations",j="0.5.9",ee=`w:${j}`,Ge="FIS_v2",qe=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(D){return D instanceof ne.ZR&&D.code.includes("request-failed")}function Ce({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ve(D){return{token:D.token,requestStatus:2,expiresIn:re(D.expiresIn),creationTime:Date.now()}}function we(D,b){return Be.apply(this,arguments)}function Be(){return(Be=(0,P.Z)(function*(D,b){const F=(yield b.json()).error;return qe.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ve({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function B(D,{refreshToken:b}){const M=Ve(D);return M.append("Authorization",function X(D){return`${Ge} ${D}`}(b)),M}function _e(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,P.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function re(D){return Number(D.replace("s","000"))}function me(D,b){return oe.apply(this,arguments)}function oe(){return(oe=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:M}){const F=Ce(D),Y=Ve(D),ie=b.getImmediate({optional:!0});if(ie){const yt=yield ie.getHeartbeatsHeader();yt&&Y.append("x-firebase-client",yt)}const Ue={method:"POST",headers:Y,body:JSON.stringify({fid:M,authVersion:Ge,appId:D.appId,sdkVersion:ee})},ft=yield _e(()=>fetch(F,Ue));if(ft.ok){const yt=yield ft.json();return{fid:yt.fid||M,registrationStatus:2,refreshToken:yt.refreshToken,authToken:ve(yt.authToken)}}throw yield we("Create Installation",ft)})).apply(this,arguments)}function Ne(D){return new Promise(b=>{setTimeout(b,D)})}const Ot=/^[cdef][\w-]{21}$/;function Ke(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function Wt(D){return function st(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Ot.test(M)?M:""}catch(D){return""}}function Dn(D){return`${D.appName}!${D.appId}`}const Yt=new Map;function Gt(D,b){const M=Dn(D);St(M,b),function Zi(D,b){const M=function sr(){return!Zr&&"BroadcastChannel"in self&&(Zr=new BroadcastChannel("[Firebase] FID Change"),Zr.onmessage=D=>{St(D.data.key,D.data.fid)}),Zr}();M&&M.postMessage({key:D,fid:b}),function vr(){0===Yt.size&&Zr&&(Zr.close(),Zr=null)}()}(M,b)}function St(D,b){const M=Yt.get(D);if(M)for(const F of M)F(b)}let Zr=null;const Kr="firebase-installations-store";let li=null;function ct(){return li||(li=(0,se.X3)("firebase-installations-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Kr)}})),li}function Yr(D,b){return _n.apply(this,arguments)}function _n(){return(_n=(0,P.Z)(function*(D,b){const M=Dn(D),Y=(yield ct()).transaction(Kr,"readwrite"),ie=Y.objectStore(Kr),xe=yield ie.get(M);return yield ie.put(b,M),yield Y.done,(!xe||xe.fid!==b.fid)&&Gt(D,b.fid),b})).apply(this,arguments)}function bn(D){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,P.Z)(function*(D){const b=Dn(D),F=(yield ct()).transaction(Kr,"readwrite");yield F.objectStore(Kr).delete(b),yield F.done})).apply(this,arguments)}function Qr(D,b){return Un.apply(this,arguments)}function Un(){return(Un=(0,P.Z)(function*(D,b){const M=Dn(D),Y=(yield ct()).transaction(Kr,"readwrite"),ie=Y.objectStore(Kr),xe=yield ie.get(M),Ue=b(xe);return void 0===Ue?yield ie.delete(M):yield ie.put(Ue,M),yield Y.done,Ue&&(!xe||xe.fid!==Ue.fid)&&Gt(D,Ue.fid),Ue})).apply(this,arguments)}function An(D){return ci.apply(this,arguments)}function ci(){return(ci=(0,P.Z)(function*(D){let b;const M=yield Qr(D.appConfig,F=>{const Y=mo(F),ie=Pt(D,Y);return b=ie.registrationPromise,ie.installationEntry});return""===M.fid?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}})).apply(this,arguments)}function mo(D){return js(D||{fid:Ke(),registrationStatus:0})}function Pt(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(qe.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function rt(D,b){return ht.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:or(D)}:{installationEntry:b}}function ht(){return(ht=(0,P.Z)(function*(D,b){try{const M=yield me(D,b);return Yr(D.appConfig,M)}catch(M){throw Ze(M)&&409===M.customData.serverCode?yield bn(D.appConfig):yield Yr(D.appConfig,{fid:b.fid,registrationStatus:0}),M}})).apply(this,arguments)}function or(D){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,P.Z)(function*(D){let b=yield xt(D.appConfig);for(;1===b.registrationStatus;)yield Ne(100),b=yield xt(D.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield An(D);return F||M}return b})).apply(this,arguments)}function xt(D){return Qr(D,b=>{if(!b)throw qe.create("installation-not-found");return js(b)})}function js(D){return function ar(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function ur(D,b){return L.apply(this,arguments)}function L(){return(L=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:b},M){const F=H(D,M),Y=B(D,M),ie=b.getImmediate({optional:!0});if(ie){const yt=yield ie.getHeartbeatsHeader();yt&&Y.append("x-firebase-client",yt)}const Ue={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:ee,appId:D.appId}})},ft=yield _e(()=>fetch(F,Ue));if(ft.ok)return ve(yield ft.json());throw yield we("Generate Auth Token",ft)})).apply(this,arguments)}function H(D,{fid:b}){return`${Ce(D)}/${b}/authTokens:generate`}function q(D){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,P.Z)(function*(D,b=!1){let M;const F=yield Qr(D.appConfig,ie=>{if(!_t(ie))throw qe.create("not-registered");const xe=ie.authToken;if(!b&&sn(xe))return ie;if(1===xe.requestStatus)return M=$(D,b),ie;{if(!navigator.onLine)throw qe.create("app-offline");const Ue=Nn(ie);return M=Ye(D,Ue),Ue}});return M?yield M:F.authToken})).apply(this,arguments)}function $(D,b){return Q.apply(this,arguments)}function Q(){return(Q=(0,P.Z)(function*(D,b){let M=yield Se(D.appConfig);for(;1===M.authToken.requestStatus;)yield Ne(100),M=yield Se(D.appConfig);const F=M.authToken;return 0===F.requestStatus?q(D,b):F})).apply(this,arguments)}function Se(D){return Qr(D,b=>{if(!_t(b))throw qe.create("not-registered");return function Er(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function Ye(D,b){return ut.apply(this,arguments)}function ut(){return(ut=(0,P.Z)(function*(D,b){try{const M=yield ur(D,b),F=Object.assign(Object.assign({},b),{authToken:M});return yield Yr(D.appConfig,F),M}catch(M){if(!Ze(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Yr(D.appConfig,F)}else yield bn(D.appConfig);throw M}})).apply(this,arguments)}function _t(D){return void 0!==D&&2===D.registrationStatus}function sn(D){return 2===D.requestStatus&&!function mt(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function Nn(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function na(){return(na=(0,P.Z)(function*(D){const b=D,{installationEntry:M,registrationPromise:F}=yield An(b);return F?F.catch(console.error):q(b).catch(console.error),M.fid})).apply(this,arguments)}function ra(){return(ra=(0,P.Z)(function*(D,b=!1){const M=D;return yield On(M),(yield q(M,b)).token})).apply(this,arguments)}function On(D){return wr.apply(this,arguments)}function wr(){return(wr=(0,P.Z)(function*(D){const{registrationPromise:b}=yield An(D);b&&(yield b)})).apply(this,arguments)}function yo(D){return qe.create("missing-app-config-values",{valueName:D})}const Pr="installations",it=D=>{const b=D.getProvider("app").getImmediate(),M=function Wn(D){if(!D||!D.options)throw yo("App Configuration");if(!D.name)throw yo("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!D.options[M])throw yo(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Kt=D=>{const b=D.getProvider("app").getImmediate(),M=(0,ae._getProvider)(b,Pr).getImmediate();return{getId:()=>function eu(D){return na.apply(this,arguments)}(M),getToken:Y=>function tu(D){return ra.apply(this,arguments)}(M,Y)}};(function kr(){(0,ae._registerComponent)(new fe.wA(Pr,it,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("installations-internal",Kt,"PRIVATE"))})(),(0,ae.registerVersion)(ce,j),(0,ae.registerVersion)(ce,j,"esm2017");const Ii="@firebase/remote-config",Cn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Dp{constructor(b,M,F,Y){this.client=b,this.storage=M,this.storageCache=F,this.logger=Y}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,Y=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${Y}.`),Y}fetch(b){var M=this;return(0,P.Z)(function*(){const[F,Y]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Y&&M.isCachedDataFresh(b.cacheMaxAgeMillis,F))return Y;b.eTag=Y&&Y.eTag;const ie=yield M.client.fetch(b),xe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&xe.push(M.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(xe),ie})()}}function Ic(D=navigator){return D.languages&&D.languages[0]||D.language}class lr{constructor(b,M,F,Y,ie,xe){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=F,this.projectId=Y,this.apiKey=ie,this.appId=xe}fetch(b){var M=this;return(0,P.Z)(function*(){const[F,Y]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),xe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ue={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},ft={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:Y,app_id:M.appId,language_code:Ic()},yt={method:"POST",headers:Ue,body:JSON.stringify(ft)},Rt=fetch(xe,yt),pt=new Promise((Tr,Jn)=>{b.signal.addEventListener(()=>{const Kc=new Error("The operation was aborted.");Kc.name="AbortError",Jn(Kc)})});let Yn;try{yield Promise.race([Rt,pt]),Yn=yield Rt}catch(Tr){let Jn="fetch-client-network";throw"AbortError"===Tr.name&&(Jn="fetch-timeout"),Cn.create(Jn,{originalErrorMessage:Tr.message})}let Qn=Yn.status;const Ms=Yn.headers.get("ETag")||void 0;let Br,Cr;if(200===Yn.status){let Tr;try{Tr=yield Yn.json()}catch(Jn){throw Cn.create("fetch-client-parse",{originalErrorMessage:Jn.message})}Br=Tr.entries,Cr=Tr.state}if("INSTANCE_STATE_UNSPECIFIED"===Cr?Qn=500:"NO_CHANGE"===Cr?Qn=304:("NO_TEMPLATE"===Cr||"EMPTY_CONFIG"===Cr)&&(Br={}),304!==Qn&&200!==Qn)throw Cn.create("fetch-status",{httpStatus:Qn});return{status:Qn,eTag:Ms,config:Br}})()}}class bp{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,P.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:M,backoffCount:F}){var Y=this;return(0,P.Z)(function*(){yield function ms(D,b){return new Promise((M,F)=>{const Y=Math.max(b-Date.now(),0),ie=setTimeout(M,Y);D.addEventListener(()=>{clearTimeout(ie),F(Cn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,M);try{const ie=yield Y.client.fetch(b);return yield Y.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function Dc(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ie))throw ie;const xe={throttleEndTimeMillis:Date.now()+(0,ne.$s)(F),backoffCount:F+1};return yield Y.storage.setThrottleMetadata(xe),Y.attemptFetch(b,xe)}})()}}class bc{constructor(b,M,F,Y,ie){this.app=b,this._client=M,this._storageCache=F,this._storage=Y,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qu(D,b){const M=D.target.error||void 0;return Cn.create(b,{originalErrorMessage:M&&M.message})}const ys="app_namespace_store";class Sp{constructor(b,M,F,Y=function Ap(){return new Promise((D,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{b(Qu(F,"storage-open"))},M.onsuccess=F=>{D(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(ys,{keyPath:"compositeKey"})}}catch(M){b(Cn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=b,this.appName=M,this.namespace=F,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,P.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Y,ie)=>{const Ue=F.transaction([ys],"readonly").objectStore(ys),ft=M.createCompositeKey(b);try{const yt=Ue.get(ft);yt.onerror=Rt=>{ie(Qu(Rt,"storage-get"))},yt.onsuccess=Rt=>{const pt=Rt.target.result;Y(pt?pt.value:void 0)}}catch(yt){ie(Cn.create("storage-get",{originalErrorMessage:yt&&yt.message}))}})})()}set(b,M){var F=this;return(0,P.Z)(function*(){const Y=yield F.openDbPromise;return new Promise((ie,xe)=>{const ft=Y.transaction([ys],"readwrite").objectStore(ys),yt=F.createCompositeKey(b);try{const Rt=ft.put({compositeKey:yt,value:M});Rt.onerror=pt=>{xe(Qu(pt,"storage-set"))},Rt.onsuccess=()=>{ie()}}catch(Rt){xe(Cn.create("storage-set",{originalErrorMessage:Rt&&Rt.message}))}})})()}delete(b){var M=this;return(0,P.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Y,ie)=>{const Ue=F.transaction([ys],"readwrite").objectStore(ys),ft=M.createCompositeKey(b);try{const yt=Ue.delete(ft);yt.onerror=Rt=>{ie(Qu(Rt,"storage-delete"))},yt.onsuccess=()=>{Y()}}catch(yt){ie(Cn.create("storage-delete",{originalErrorMessage:yt&&yt.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Tc{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,P.Z)(function*(){const M=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),Y=b.storage.getActiveConfig(),ie=yield M;ie&&(b.lastFetchStatus=ie);const xe=yield F;xe&&(b.lastSuccessfulFetchTimestampMillis=xe);const Ue=yield Y;Ue&&(b.activeConfig=Ue)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function su(){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,P.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(D){return!1}})).apply(this,arguments)}!function _o(){(0,ae._registerComponent)(new fe.wA("remote-config",function D(b,{instanceIdentifier:M}){const F=b.getProvider("app").getImmediate(),Y=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Cn.create("registration-window");if(!(0,ne.hl)())throw Cn.create("indexed-db-unavailable");const{projectId:ie,apiKey:xe,appId:Ue}=F.options;if(!ie)throw Cn.create("registration-project-id");if(!xe)throw Cn.create("registration-api-key");if(!Ue)throw Cn.create("registration-app-id");const ft=new Sp(Ue,F.name,M=M||"firebase"),yt=new Tc(ft),Rt=new ue.Yd(Ii);Rt.logLevel=ue.in.ERROR;const pt=new lr(Y,ae.SDK_VERSION,M,ie,xe,Ue),Yn=new bp(pt,ft),Qn=new Dp(Yn,ft,yt,Rt),Ms=new bc(F,Qn,yt,ft,Rt);return function Qt(D){const b=(0,ne.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Ms),Ms},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Ii,"0.3.8"),(0,ae.registerVersion)(Ii,"0.3.8","esm2017")}();const Sc="/firebase-messaging-sw.js",cr="/firebase-cloud-messaging-push-scope",Gs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",vo="google.c.a.c_id",Mc="google.c.a.c_l",ah="google.c.a.ts",xc="google.c.a.e";var Eo=(()=>{return(D=Eo||(Eo={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Eo;var D})();function Ir(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Rc(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),Y=new Uint8Array(F.length);for(let ie=0;ie<F.length;++ie)Y[ie]=F.charCodeAt(ie);return Y}const Dr="fcm_token_details_db",Xr="fcm_token_object_Store";function Ju(D){return Nc.apply(this,arguments)}function Nc(){return Nc=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(Dr))return null;let b=null;return(yield(0,se.X3)(Dr,5,{upgrade:(F=(0,P.Z)(function*(Y,ie,xe,Ue){var ft;if(ie<2||!Y.objectStoreNames.contains(Xr))return;const yt=Ue.objectStore(Xr),Rt=yield yt.index("fcmSenderId").get(D);if(yield yt.clear(),Rt)if(2===ie){const pt=Rt;if(!pt.auth||!pt.p256dh||!pt.endpoint)return;b={token:pt.fcmToken,createTime:null!==(ft=pt.createTime)&&void 0!==ft?ft:Date.now(),subscriptionOptions:{auth:pt.auth,p256dh:pt.p256dh,endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:"string"==typeof pt.vapidKey?pt.vapidKey:Ir(pt.vapidKey)}}}else if(3===ie){const pt=Rt;b={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:Ir(pt.auth),p256dh:Ir(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:Ir(pt.vapidKey)}}}else if(4===ie){const pt=Rt;b={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:Ir(pt.auth),p256dh:Ir(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:Ir(pt.vapidKey)}}}}),function(ie,xe,Ue,ft){return F.apply(this,arguments)})})).close(),yield(0,se.Lj)(Dr),yield(0,se.Lj)("fcm_vapid_details_db"),yield(0,se.Lj)("undefined"),Xu(b)?b:null;var F}),Nc.apply(this,arguments)}function Xu(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Mi="firebase-messaging-store";let uh=null;function Jt(){return uh||(uh=(0,se.X3)("firebase-messaging-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Mi)}})),uh}function ua(D){return zs.apply(this,arguments)}function zs(){return(zs=(0,P.Z)(function*(D){const b=Zn(D),F=yield(yield Jt()).transaction(Mi).objectStore(Mi).get(b);if(F)return F;{const Y=yield Ju(D.appConfig.senderId);if(Y)return yield qt(D,Y),Y}})).apply(this,arguments)}function qt(D,b){return la.apply(this,arguments)}function la(){return(la=(0,P.Z)(function*(D,b){const M=Zn(D),Y=(yield Jt()).transaction(Mi,"readwrite");return yield Y.objectStore(Mi).put(b,M),yield Y.done,b})).apply(this,arguments)}function ou(D){return _s.apply(this,arguments)}function _s(){return(_s=(0,P.Z)(function*(D){const b=Zn(D),F=(yield Jt()).transaction(Mi,"readwrite");yield F.objectStore(Mi).delete(b),yield F.done})).apply(this,arguments)}function Zn({appConfig:D}){return D.appId}const dn=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function xi(D,b){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,P.Z)(function*(D,b){const M=yield Do(D),F=bo(b),Y={method:"POST",headers:M,body:JSON.stringify(F)};let ie;try{ie=yield(yield fetch(Ri(D.appConfig),Y)).json()}catch(xe){throw dn.create("token-subscribe-failed",{errorInfo:xe})}if(ie.error)throw dn.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw dn.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function Ws(D,b){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,P.Z)(function*(D,b){const M=yield Do(D),F=bo(b.subscriptionOptions),Y={method:"PATCH",headers:M,body:JSON.stringify(F)};let ie;try{ie=yield(yield fetch(`${Ri(D.appConfig)}/${b.token}`,Y)).json()}catch(xe){throw dn.create("token-update-failed",{errorInfo:xe})}if(ie.error)throw dn.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw dn.create("token-update-no-token");return ie.token})).apply(this,arguments)}function ca(D,b){return hi.apply(this,arguments)}function hi(){return(hi=(0,P.Z)(function*(D,b){const F={method:"DELETE",headers:yield Do(D)};try{const ie=yield(yield fetch(`${Ri(D.appConfig)}/${b}`,F)).json();if(ie.error)throw dn.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(Y){throw dn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function Ri({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Do(D){return lt.apply(this,arguments)}function lt(){return(lt=(0,P.Z)(function*({appConfig:D,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function bo({p256dh:D,auth:b,endpoint:M,vapidKey:F}){const Y={web:{endpoint:M,auth:b,p256dh:D}};return F!==Gs&&(Y.web.applicationPubKey=F),Y}const au=6048e5;function da(D){return nl.apply(this,arguments)}function nl(){return(nl=(0,P.Z)(function*(D){const b=yield an(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:Ir(b.getKey("auth")),p256dh:Ir(b.getKey("p256dh"))},F=yield ua(D.firebaseDependencies);if(F){if(Zs(F.subscriptionOptions,M))return Date.now()>=F.createTime+au?il(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield ca(D.firebaseDependencies,F.token)}catch(Y){console.warn(Y)}return bt(D.firebaseDependencies,M)}return bt(D.firebaseDependencies,M)})).apply(this,arguments)}function ha(D){return rl.apply(this,arguments)}function rl(){return(rl=(0,P.Z)(function*(D){const b=yield ua(D.firebaseDependencies);b&&(yield ca(D.firebaseDependencies,b.token),yield ou(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function il(D,b){return Te.apply(this,arguments)}function Te(){return(Te=(0,P.Z)(function*(D,b){try{const M=yield Ws(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield qt(D.firebaseDependencies,F),M}catch(M){throw yield ha(D),M}})).apply(this,arguments)}function bt(D,b){return uu.apply(this,arguments)}function uu(){return(uu=(0,P.Z)(function*(D,b){const F={token:yield xi(D,b),createTime:Date.now(),subscriptionOptions:b};return yield qt(D,F),F.token})).apply(this,arguments)}function an(D,b){return Co.apply(this,arguments)}function Co(){return(Co=(0,P.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Rc(b)})})).apply(this,arguments)}function Zs(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function ei(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function fa(D,b){if(!b.notification)return;D.notification={};const M=b.notification.title;M&&(D.notification.title=M);const F=b.notification.body;F&&(D.notification.body=F);const Y=b.notification.image;Y&&(D.notification.image=Y)}(b,D),function sl(D,b){!b.data||(D.data=b.data)}(b,D),function Mp(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const M=b.fcmOptions.link;M&&(D.fcmOptions.link=M);const F=b.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(b,D),b}function lu(D){return"object"==typeof D&&!!D&&vo in D}function pa(D,b){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<b.length&&M.push(b.charAt(F));return M.join("")}function Tn(D){return dn.create("missing-app-config-values",{valueName:D})}pa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),pa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ji{constructor(b,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function cu(D){if(!D||!D.options)throw Tn("App Configuration Object");if(!D.name)throw Tn("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of b)if(!M[F])throw Tn(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:Y,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ga(D){return vs.apply(this,arguments)}function vs(){return(vs=(0,P.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Sc,{scope:cr}),D.swRegistration.update().catch(()=>{})}catch(b){throw dn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function fi(D,b){return ol.apply(this,arguments)}function ol(){return(ol=(0,P.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield ga(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw dn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function du(D,b){return al.apply(this,arguments)}function al(){return(al=(0,P.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=Gs)})).apply(this,arguments)}function ma(){return(ma=(0,P.Z)(function*(D,b){if(!navigator)throw dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw dn.create("permission-blocked");return yield du(D,null==b?void 0:b.vapidKey),yield fi(D,null==b?void 0:b.serviceWorkerRegistration),da(D)})).apply(this,arguments)}function ya(D,b,M){return ul.apply(this,arguments)}function ul(){return(ul=(0,P.Z)(function*(D,b,M){const F=_a(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[vo],message_name:M[Mc],message_time:M[ah],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function _a(D){switch(D){case Eo.NOTIFICATION_CLICKED:return"notification_open";case Eo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ll(){return(ll=(0,P.Z)(function*(D,b){const M=b.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===Eo.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ei(M)):D.onMessageHandler.next(ei(M)));const F=M.data;lu(F)&&"1"===F[xc]&&(yield ya(D,M.messageType,F))})).apply(this,arguments)}const To="@firebase/messaging",Oc=D=>{const b=new Ji(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function xp(D,b){return ll.apply(this,arguments)}(b,M)),b},Ao=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function hu(D,b){return ma.apply(this,arguments)}(b,F)}};function So(){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,P.Z)(function*(){try{yield(0,ne.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pc(){(0,ae._registerComponent)(new fe.wA("messaging",Oc,"PUBLIC")),(0,ae._registerComponent)(new fe.wA("messaging-internal",Ao,"PRIVATE")),(0,ae.registerVersion)(To,"0.9.13"),(0,ae.registerVersion)(To,"0.9.13","esm2017")}();const kc="analytics",Rp="firebase_id",Xi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mo="https://www.googletagmanager.com/gtag/js",$n=new ue.Yd("@firebase/analytics");function dh(D){return Promise.all(D.map(b=>b.catch(M=>M)))}function Ks(D,b){const M=document.createElement("script");M.src=`${Mo}?l=${D}&id=${b}`,M.async=!0,document.head.appendChild(M)}function Lc(D,b,M,F,Y,ie){return pu.apply(this,arguments)}function pu(){return(pu=(0,P.Z)(function*(D,b,M,F,Y,ie){const xe=F[Y];try{if(xe)yield b[xe];else{const ft=(yield dh(M)).find(yt=>yt.measurementId===Y);ft&&(yield b[ft.appId])}}catch(Ue){$n.error(Ue)}D("config",Y,ie)})).apply(this,arguments)}function gu(D,b,M,F,Y){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,P.Z)(function*(D,b,M,F,Y){try{let ie=[];if(Y&&Y.send_to){let xe=Y.send_to;Array.isArray(xe)||(xe=[xe]);const Ue=yield dh(M);for(const ft of xe){const yt=Ue.find(pt=>pt.measurementId===ft),Rt=yt&&b[yt.appId];if(!Rt){ie=[];break}ie.push(Rt)}}0===ie.length&&(ie=Object.values(b)),yield Promise.all(ie),D("event",F,Y||{})}catch(ie){$n.error(ie)}})).apply(this,arguments)}function En(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(Mo))return b;return null}const dr=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),mu=new class pi{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Bc(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Lr(D){return ws.apply(this,arguments)}function ws(){return(ws=(0,P.Z)(function*(D){var b;const{appId:M,apiKey:F}=D,Y={method:"GET",headers:Bc(F)},ie=Xi.replace("{app-id}",M),xe=yield fetch(ie,Y);if(200!==xe.status&&304!==xe.status){let Ue="";try{const ft=yield xe.json();(null===(b=ft.error)||void 0===b?void 0:b.message)&&(Ue=ft.error.message)}catch(ft){}throw dr.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:Ue})}return xe.json()})).apply(this,arguments)}function Tt(D){return wt.apply(this,arguments)}function wt(){return(wt=(0,P.Z)(function*(D,b=mu,M){const{appId:F,apiKey:Y,measurementId:ie}=D.options;if(!F)throw dr.create("no-app-id");if(!Y){if(ie)return{measurementId:ie,appId:F};throw dr.create("no-api-key")}const xe=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new hh;return setTimeout((0,P.Z)(function*(){Ue.abort()}),void 0!==M?M:6e4),Qs({appId:F,apiKey:Y,measurementId:ie},xe,Ue,b)})).apply(this,arguments)}function Qs(D,b,M){return jc.apply(this,arguments)}function jc(){return(jc=(0,P.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:M},F,Y=mu){const{appId:ie,measurementId:xe}=D;try{yield Ia(F,b)}catch(Ue){if(xe)return $n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Ue.message}]`),{appId:ie,measurementId:xe};throw Ue}try{const Ue=yield Lr(D);return Y.deleteThrottleMetadata(ie),Ue}catch(Ue){if(!cl(Ue)){if(Y.deleteThrottleMetadata(ie),xe)return $n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Ue.message}]`),{appId:ie,measurementId:xe};throw Ue}const ft=503===Number(Ue.customData.httpStatus)?(0,ne.$s)(M,Y.intervalMillis,30):(0,ne.$s)(M,Y.intervalMillis),yt={throttleEndTimeMillis:Date.now()+ft,backoffCount:M+1};return Y.setThrottleMetadata(ie,yt),$n.debug(`Calling attemptFetch again in ${ft} millis`),Qs(D,yt,F,Y)}})).apply(this,arguments)}function Ia(D,b){return new Promise((M,F)=>{const Y=Math.max(b-Date.now(),0),ie=setTimeout(M,Y);D.addEventListener(()=>{clearTimeout(ie),F(dr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function cl(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class hh{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function dl(){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,P.Z)(function*(){if(!(0,ne.hl)())return $n.warn(dr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(D){return $n.warn(dr.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function xo(){return(xo=(0,P.Z)(function*(D,b,M,F,Y,ie,xe){var Ue;const ft=Tt(D);ft.then(Qn=>{M[Qn.measurementId]=Qn.appId,D.options.measurementId&&Qn.measurementId!==D.options.measurementId&&$n.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Qn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Qn=>$n.error(Qn)),b.push(ft);const yt=dl().then(Qn=>{if(Qn)return F.getId()}),[Rt,pt]=yield Promise.all([ft,yt]);En()||Ks(ie,Rt.measurementId),Y("js",new Date);const Yn=null!==(Ue=null==xe?void 0:xe.config)&&void 0!==Ue?Ue:{};return Yn.origin="firebase",Yn.update=!0,null!=pt&&(Yn[Rp]=pt),Y("config",Rt.measurementId,Yn),Rt.measurementId})).apply(this,arguments)}class es{constructor(b){this.app=b}_delete(){return delete fr[this.app.options.appId],Promise.resolve()}}let fr={},$c=[];const Da={};let yu,hn,Pi="dataLayer",gi=!1;function fh(D,b,M){!function tn(){const D=[];if((0,ne.ru)()&&D.push("This is a browser extension environment."),(0,ne.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,Y)=>`(${Y+1}) ${F}`).join(" "),M=dr.create("invalid-analytics-context",{errorInfo:b});$n.warn(M.message)}}();const F=D.options.appId;if(!F)throw dr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw dr.create("no-api-key");$n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fr[F])throw dr.create("already-exists",{id:F});if(!gi){!function fu(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(Pi);const{wrappedGtag:ie,gtagCore:xe}=function Np(D,b,M,F,Y){let ie=function(...xe){window[F].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ie=window[Y]),window[Y]=function Vc(D,b,M,F){function ie(){return(ie=(0,P.Z)(function*(xe,Ue,ft){try{"event"===xe?yield gu(D,b,M,Ue,ft):"config"===xe?yield Lc(D,b,M,F,Ue,ft):D("set",Ue)}catch(yt){$n.error(yt)}})).apply(this,arguments)}return function Y(xe,Ue,ft){return ie.apply(this,arguments)}}(ie,D,b,M),{gtagCore:ie,wrappedGtag:window[Y]}}(fr,$c,Da,Pi,"gtag");hn=ie,yu=xe,gi=!0}return fr[F]=function hr(D,b,M,F,Y,ie,xe){return xo.apply(this,arguments)}(D,$c,Da,b,yu,Pi,M),new es(D)}function ba(){return(ba=(0,P.Z)(function*(D,b,M,F,Y){if(Y&&Y.global)D("event",M,F);else{const ie=yield b;D("event",M,Object.assign(Object.assign({},F),{send_to:ie}))}})).apply(this,arguments)}function Op(){return _u.apply(this,arguments)}function _u(){return(_u=(0,P.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(D){return!1}})).apply(this,arguments)}const Gc="@firebase/analytics";!function qc(){(0,ae._registerComponent)(new fe.wA(kc,(b,{options:M})=>fh(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new fe.wA("analytics-internal",function D(b){try{const M=b.getProvider(kc).getImmediate();return{logEvent:(F,Y,ie)=>function gh(D,b,M,F){D=(0,ne.m9)(D),function Is(D,b,M,F,Y){return ba.apply(this,arguments)}(hn,fr[D.app.options.appId],b,M,F).catch(Y=>$n.error(Y))}(M,F,Y,ie)}}catch(M){throw dr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(Gc,"0.7.9"),(0,ae.registerVersion)(Gc,"0.7.9","esm2017")}();var bs=O(4408),fn=O(7565);const br=new class vu extends fn.v{}(class mh extends bs.o{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,M,F):b.flush(this)}});var Eu=O(4986),mi=O(8505),yi=O(9468),to=O(5363);const Cs=new g.GfV("7.4.1"),ts="__angularfire_symbol__analyticsIsSupportedValue",ns="__angularfire_symbol__analyticsIsSupported",no="__angularfire_symbol__remoteConfigIsSupportedValue",_i="__angularfire_symbol__remoteConfigIsSupported",wu="__angularfire_symbol__messagingIsSupportedValue",yh="__angularfire_symbol__messagingIsSupported";function cy(D,b,M){if(b){if(1===b.length)return b[0];const ie=b.filter(xe=>xe.app===M);if(1===ie.length)return ie[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[ns]||(globalThis[ns]=Op().then(D=>globalThis[ts]=D).catch(()=>globalThis[ts]=!1)),globalThis[yh]||(globalThis[yh]=So().then(D=>globalThis[wu]=D).catch(()=>globalThis[wu]=!1)),globalThis[_i]||(globalThis[_i]=su().then(D=>globalThis[no]=D).catch(()=>globalThis[no]=!1));const zc=(D,b)=>{const M=b?[b]:(0,J.C6)(),F=[];return M.forEach(Y=>{Y.container.getProvider(D).instances.forEach(xe=>{F.includes(xe)||F.push(xe)})}),F};function rs(){}class Wc{constructor(b,M=br){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,F){const Y=this.zone;return this.delegate.schedule(function(xe){Y.runGuarded(()=>{b.apply(this,[xe])})},M,F)}}class ml{constructor(b){this.zone=b,this.task=null}call(b,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rs,{},rs,rs)),M.pipe((0,mi.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _h=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Wc(Zone.current)),this.insideAngular=M.run(()=>new Wc(Zone.current,Eu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function ri(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function As(D){return ri(),function Ss(D){return function(M){return(M=M.lift(new ml(D.ngZone))).pipe((0,yi.R)(D.outsideAngular),(0,to.Q)(D.insideAngular))}}(ri())(D)}},2090:(Qe,Ee,O)=>{O.d(Ee,{BH:()=>Ge,LL:()=>oe,ZR:()=>me,zI:()=>Z,US:()=>fe,tV:()=>ce,L:()=>se,$s:()=>xt,r3:()=>_r,Sg:()=>Ae,ne:()=>li,vZ:()=>Zr,ZB:()=>U,pd:()=>hs,m9:()=>ur,z$:()=>Re,jU:()=>be,ru:()=>qe,d:()=>Ce,xb:()=>St,w1:()=>ve,hl:()=>B,uI:()=>Le,UG:()=>he,b$:()=>Ze,G6:()=>Ve,Mn:()=>we,xO:()=>vr,zd:()=>wi,eu:()=>_e});const ae=function(L){const H=[];let q=0;for(let Ie=0;Ie<L.length;Ie++){let $=L.charCodeAt(Ie);$<128?H[q++]=$:$<2048?(H[q++]=$>>6|192,H[q++]=63&$|128):55296==(64512&$)&&Ie+1<L.length&&56320==(64512&L.charCodeAt(Ie+1))?($=65536+((1023&$)<<10)+(1023&L.charCodeAt(++Ie)),H[q++]=$>>18|240,H[q++]=$>>12&63|128,H[q++]=$>>6&63|128,H[q++]=63&$|128):(H[q++]=$>>12|224,H[q++]=$>>6&63|128,H[q++]=63&$|128)}return H},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,H){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let $=0;$<L.length;$+=3){const Q=L[$],Se=$+1<L.length,Ye=Se?L[$+1]:0,ut=$+2<L.length,_t=ut?L[$+2]:0;let Nn=(15&Ye)<<2|_t>>6,Er=63&_t;ut||(Er=64,Se||(Nn=64)),Ie.push(q[Q>>2],q[(3&Q)<<4|Ye>>4],q[Nn],q[Er])}return Ie.join("")},encodeString(L,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(L):this.encodeByteArray(ae(L),H)},decodeString(L,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(L):function(L){const H=[];let q=0,Ie=0;for(;q<L.length;){const $=L[q++];if($<128)H[Ie++]=String.fromCharCode($);else if($>191&&$<224){const Q=L[q++];H[Ie++]=String.fromCharCode((31&$)<<6|63&Q)}else if($>239&&$<365){const ut=((7&$)<<18|(63&L[q++])<<12|(63&L[q++])<<6|63&L[q++])-65536;H[Ie++]=String.fromCharCode(55296+(ut>>10)),H[Ie++]=String.fromCharCode(56320+(1023&ut))}else{const Q=L[q++],Se=L[q++];H[Ie++]=String.fromCharCode((15&$)<<12|(63&Q)<<6|63&Se)}}return H.join("")}(this.decodeStringToByteArray(L,H))},decodeStringToByteArray(L,H){this.init_();const q=H?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let $=0;$<L.length;){const Q=q[L.charAt($++)],Ye=$<L.length?q[L.charAt($)]:0;++$;const _t=$<L.length?q[L.charAt($)]:64;++$;const mt=$<L.length?q[L.charAt($)]:64;if(++$,null==Q||null==Ye||null==_t||null==mt)throw Error();Ie.push(Q<<2|Ye>>4),64!==_t&&(Ie.push(Ye<<4&240|_t>>2),64!==mt&&Ie.push(_t<<6&192|mt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},se=function(L){return function(L){const H=ae(L);return fe.encodeByteArray(H,!0)}(L).replace(/\./g,"")},ce=function(L){try{return fe.decodeString(L,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function U(L,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return H}for(const q in H)!H.hasOwnProperty(q)||!ee(q)||(L[q]=U(L[q],H[q]));return L}function ee(L){return"__proto__"!==L}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,q)=>{this.resolve=H,this.reject=q})}wrapCallback(H){return(q,Ie)=>{q?this.reject(q):this.resolve(Ie),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(q):H(q,Ie))}}}function Ae(L,H){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=H||"demo-project",$=L.iat||0,Q=L.sub||L.user_id;if(!Q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Se=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:$,exp:$+3600,auth_time:$,sub:Q,user_id:Q,firebase:{sign_in_provider:"custom",identities:{}}},L);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(Se)),""].join(".")}function Re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function he(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function be(){return"object"==typeof self&&self.self===self}function qe(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ce(){return Re().indexOf("Electron/")>=0}function ve(){const L=Re();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function we(){return Re().indexOf("MSAppHost/")>=0}function Ve(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){return"object"==typeof indexedDB}function _e(){return new Promise((L,H)=>{try{let q=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(Ie);$.onsuccess=()=>{$.result.close(),q||self.indexedDB.deleteDatabase(Ie),L(!0)},$.onupgradeneeded=()=>{q=!1},$.onerror=()=>{var Q;H((null===(Q=$.error)||void 0===Q?void 0:Q.message)||"")}}catch(q){H(q)}})}function Z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(H,q,Ie){super(q),this.code=H,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(H,q,Ie){this.service=H,this.serviceName=q,this.errors=Ie}create(H,...q){const Ie=q[0]||{},$=`${this.service}/${H}`,Q=this.errors[H],Se=Q?function Ne(L,H){return L.replace(st,(q,Ie)=>{const $=H[Ie];return null!=$?String($):`<${Ie}?>`})}(Q,Ie):"Error";return new me($,`${this.serviceName}: ${Se} (${$}).`,Ie)}}const st=/\{\$([^}]+)}/g;function _r(L,H){return Object.prototype.hasOwnProperty.call(L,H)}function St(L){for(const H in L)if(Object.prototype.hasOwnProperty.call(L,H))return!1;return!0}function Zr(L,H){if(L===H)return!0;const q=Object.keys(L),Ie=Object.keys(H);for(const $ of q){if(!Ie.includes($))return!1;const Q=L[$],Se=H[$];if(sr(Q)&&sr(Se)){if(!Zr(Q,Se))return!1}else if(Q!==Se)return!1}for(const $ of Ie)if(!q.includes($))return!1;return!0}function sr(L){return null!==L&&"object"==typeof L}function vr(L){const H=[];for(const[q,Ie]of Object.entries(L))Array.isArray(Ie)?Ie.forEach($=>{H.push(encodeURIComponent(q)+"="+encodeURIComponent($))}):H.push(encodeURIComponent(q)+"="+encodeURIComponent(Ie));return H.length?"&"+H.join("&"):""}function wi(L){const H={};return L.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[$,Q]=Ie.split("=");H[decodeURIComponent($)]=decodeURIComponent(Q)}}),H}function hs(L){const H=L.indexOf("?");if(!H)return"";const q=L.indexOf("#",H);return L.substring(H,q>0?q:void 0)}function li(L,H){const q=new ct(L,H);return q.subscribe.bind(q)}class ct{constructor(H,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{H(this)}).catch(Ie=>{this.error(Ie)})}next(H){this.forEachObserver(q=>{q.next(H)})}error(H){this.forEachObserver(q=>{q.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,q,Ie){let $;if(void 0===H&&void 0===q&&void 0===Ie)throw new Error("Missing Observer.");$=function _n(L,H){if("object"!=typeof L||null===L)return!1;for(const q of H)if(q in L&&"function"==typeof L[q])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:q,complete:Ie},void 0===$.next&&($.next=bn),void 0===$.error&&($.error=bn),void 0===$.complete&&($.complete=bn);const Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(Se){}}),this.observers.push($),Q}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,H)}sendOne(H,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{q(this.observers[H])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bn(){}function xt(L,H=1e3,q=2){const Ie=H*Math.pow(q,L),$=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+$)}function ur(L){return L&&L._delegate?L._delegate:L}},2952:(Qe,Ee,O)=>{var g=O(5e3);let J=null;function P(){return J}const ue=new g.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ce(){return(0,g.LFG)(U)}()},providedIn:"platform"}),n})();const j=new g.OlP("Location Initialized");let U=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){ee()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){ee()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ge(){return new U((0,g.LFG)(ue))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function be(n){const e=(0,g.LFG)(ue).location;return new Ze((0,g.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new g.OlP("appBaseHref");let Ze=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Le(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Le(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se),g.LFG(qe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Le(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Le(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se),g.LFG(qe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re(Ve(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function Be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Ae,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function we(){return new ve((0,g.LFG)(he),(0,g.LFG)(se))}()},providedIn:"root"}),n})();function Ve(n){return n.replace(/\/index.html$/,"")}let bi=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ps{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Bn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new ps(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Hs(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Hs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Hs(n,e){n.context.$implicit=e.item}let kn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Qt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ru("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ru("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Qt{constructor(){this.$implicit=null,this.ngIf=null}}function ru(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let xc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function wo(n){return"server"===n}let Xu=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Io((0,g.LFG)(ue),window)}),n})();class Io{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Mi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=el(this.window.history)||el(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function el(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class zs extends class ua extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){J||(J=n)}(new zs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function la(){return qt=qt||document.querySelector("base"),qt?qt.getAttribute("href"):null}();return null==t?null:function _s(n){ou=ou||document.createElement("a"),ou.setAttribute("href",n);const e=ou.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){qt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function sa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let ou,qt=null;const Zn=new g.OlP("TRANSITION_ID"),dn=[{provide:g.ip1,useFactory:function tl(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Zn,ue,g.zs3],multi:!0}];class xi{static init(){(0,g.VLi)(new xi)}addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Kn=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Ws=new g.OlP("EventManagerPlugins");let Qi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ws),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class ca{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let hi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ri=(()=>{class n extends hi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Do),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Do))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Do(n){P().remove(n)}const lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bo=/%COMP%/g;function Te(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Te(n,o,t):(o=o.replace(bo,n),t.push(o))}return t}function bt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let an=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Co(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new fa(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new sl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Te(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Qi),g.LFG(Ri),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Co{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(lt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=lt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=lt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,bt(r)):this.eventManager.addEventListener(e,t,bt(r))}}class fa extends Co{constructor(e,t,r,o){super(e),this.component=r;const u=Te(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function rl(n){return"_ngcontent-%COMP%".replace(bo,n)}(o+"-"+r.id),this.hostAttr=function il(n){return"_nghost-%COMP%".replace(bo,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class sl extends Co{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Te(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Mp=(()=>{class n extends ca{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const lu=["alt","control","meta","shift"],cu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ji={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ga=(()=>{class n extends ca{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(lu.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function vs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Tn.hasOwnProperty(e)&&(e=Tn[e]))}return cu[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),lu.forEach(u=>{u!=o&&Ji[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const hu=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function fi(){zs.makeCurrent(),xi.init()},multi:!0},{provide:ue,useFactory:function du(){return(0,g.RDi)(document),document},deps:[]}]),ma=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function ol(){return new g.qLn},deps:[]},{provide:Ws,useClass:Mp,multi:!0,deps:[ue,g.R0b,g.Lbi]},{provide:Ws,useClass:ga,multi:!0,deps:[ue]},{provide:an,useClass:an,deps:[Qi,Ri,g.AFp]},{provide:g.FYo,useExisting:an},{provide:hi,useExisting:Ri},{provide:Ri,useClass:Ri,deps:[ue]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:Qi,useClass:Qi,deps:[Ws,g.R0b]},{provide:class Jt{},useClass:Kn,deps:[]}];let ya=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:Zn,useExisting:g.AFp},dn]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:ma,imports:[xc,g.hGG]}),n})();"undefined"!=typeof window&&window;var En=O(8996),Es=O(8306);const{isArray:dr}=Array,{getPrototypeOf:wa,prototype:Uc,keys:pi}=Object;function mu(n){if(1===n.length){const e=n[0];if(dr(e))return{args:e,keys:null};if(function Bc(n){return n&&"object"==typeof n&&wa(n)===Uc}(e)){const t=pi(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Lr=O(8421),ws=O(7669),Tt=O(5403),wt=O(4004);const{isArray:Qs}=Array;function Ia(n){return(0,wt.U)(e=>function jc(n,e){return Qs(e)?n(...e):n(e)}(n,e))}function cl(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let dl=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Vr=(()=>{class n extends dl{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const hr=new g.OlP("NgValueAccessor"),fr={provide:hr,useExisting:(0,g.Gpc)(()=>Pi),multi:!0},Da=new g.OlP("CompositionEventMode");let Pi=(()=>{class n extends dl{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $c(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Da,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([fr]),g.qOj]}),n})();function ti(n){return null==n||0===n.length}function yu(n){return null!=n&&"number"==typeof n.length}const hn=new g.OlP("NgValidators"),gi=new g.OlP("NgAsyncValidators"),hl=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class tn{static min(e){return function fh(n){return e=>{if(ti(e.value)||ti(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Is(n){return e=>{if(ti(e.value)||ti(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return ba(e)}static requiredTrue(e){return function Js(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Ca(n){return ti(n.value)||hl.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Ro(n){return e=>ti(e.value)||!yu(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function No(n){return e=>yu(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Ds(n){if(!n)return ni;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ti(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return un(e)}static composeAsync(e){return Pp(e)}}function ba(n){return ti(n.value)?{required:!0}:null}function ni(n){return null}function Xs(n){return null!=n}function Ta(n){const e=(0,g.QGY)(n)?(0,En.D)(n):n;return(0,g.CqO)(e),e}function Oo(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function eo(n,e){return e.map(t=>t(n))}function _u(n){return n.map(e=>function Op(n){return!n.validate}(e)?e:t=>e.validate(t))}function un(n){if(!n)return null;const e=n.filter(Xs);return 0==e.length?null:function(t){return Oo(eo(t,e))}}function Hc(n){return null!=n?un(_u(n)):null}function Pp(n){if(!n)return null;const e=n.filter(Xs);return 0==e.length?null:function(t){return function hh(...n){const e=(0,ws.jO)(n),{args:t,keys:r}=mu(n),o=new Es.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,C=d;for(let x=0;x<d;x++){let N=!1;(0,Lr.Xf)(t[x]).subscribe((0,Tt.x)(u,z=>{N||(N=!0,C--),m[x]=z},()=>w--,void 0,()=>{(!w||!N)&&(C||u.next(r?cl(r,m):m),u.complete())}))}});return e?o.pipe(Ia(e)):o}(eo(t,e).map(Ta)).pipe((0,wt.U)(Oo))}}function ph(n){return null!=n?Pp(_u(n)):null}function gh(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Gc(n){return n._rawValidators}function fl(n){return n._rawAsyncValidators}function qc(n){return n?Array.isArray(n)?n:[n]:[]}function bs(n,e){return Array.isArray(n)?n.includes(e):n===e}function mh(n,e){const t=qc(e);return qc(n).forEach(o=>{bs(t,o)||t.push(o)}),t}function fn(n,e){return qc(e).filter(t=>!bs(n,t))}class vu{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Hc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ph(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class br extends vu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ur extends vu{get formDirective(){return null}get path(){return null}}class Eu{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let to=(()=>{class n extends Eu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(br,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})(),Cs=(()=>{class n extends Eu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ur,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[g.qOj]}),n})();function ri(n,e){return[...e.path,n]}function Ts(n,e){As(n,e),e.valueAccessor.writeValue(n.value),function Po(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&D(n,e)})}(n,e),function b(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Zc(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&D(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function dy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ii(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ss(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ki(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function As(n,e){const t=Gc(n);null!==e.validator?n.setValidators(gh(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=fl(n);null!==e.asyncValidator?n.setAsyncValidators(gh(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();ki(e._rawValidators,o),ki(e._rawAsyncValidators,o)}function Ss(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Gc(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=fl(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return ki(e._rawValidators,r),ki(e._rawAsyncValidators,r),t}function D(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function M(n,e){As(n,e)}function ft(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Rt(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function pt(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Pi?t=u:function yt(n){return Object.getPrototypeOf(n.constructor)===Vr}(u)?r=u:o=u}),o||r||t||null}function Yn(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Br="VALID",Cr="INVALID",Tr="PENDING",Jn="DISABLED";function yl(n){return(vl(n)?n.validators:n)||null}function _l(n){return Array.isArray(n)?Hc(n):n||null}function Sa(n,e){return(vl(e)?e.asyncValidators:n)||null}function vh(n){return Array.isArray(n)?ph(n):n||null}function vl(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Yc=n=>n instanceof pr,ko=n=>n instanceof wl;function kp(n){return Yc(n)?n.value:n.getRawValue()}function Eh(n,e){const t=ko(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function wh(n,e){ko(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new g.vHH(1002,"")})}class Ih{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=_l(this._rawValidators),this._composedAsyncValidatorFn=vh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Br}get invalid(){return this.status===Cr}get pending(){return this.status==Tr}get disabled(){return this.status===Jn}get enabled(){return this.status!==Jn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=_l(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=vh(e)}addValidators(e){this.setValidators(mh(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mh(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(fn(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(fn(e,this._rawAsyncValidators))}hasValidator(e){return bs(this._rawValidators,e)}hasAsyncValidator(e){return bs(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Tr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Jn,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Br,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Br||this.status===Tr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jn:Br}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Tr,this._hasOwnPendingAsyncValidator=!0;const t=Ta(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Kc(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=ko(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof Il)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Jn:this.errors?Cr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tr)?Tr:this._anyControlsHaveStatus(Cr)?Cr:Br}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vl(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class pr extends Ih{constructor(e=null,t,r){super(yl(t),Sa(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vl(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Yn(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Yn(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class wl extends Ih{constructor(e,t,r){super(yl(t),Sa(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){wh(this,e),Object.keys(e).forEach(r=>{Eh(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=kp(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Il extends Ih{constructor(e,t,r){super(yl(t),Sa(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){wh(this,e),e.forEach((r,o)=>{Eh(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>kp(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const hy={provide:Ur,useExisting:(0,g.Gpc)(()=>Iu)},Fo=(()=>Promise.resolve(null))();let Iu=(()=>{class n extends Ur{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new wl({},Hc(t),ph(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Fo.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Ts(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Fo.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Fo.then(()=>{const r=this._findContainer(t.path),o=new wl({});M(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Fo.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Fo.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Rt(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(hn,10),g.Y36(gi,10))},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([hy]),g.qOj]}),n})(),Ma=(()=>{class n extends Ur{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return ri(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Fp={provide:br,useExisting:(0,g.Gpc)(()=>Qc)},Ch=(()=>Promise.resolve(null))();let Qc=(()=>{class n extends br{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new pr,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=pt(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),ft(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ts(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Ch.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;Ch.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?ri(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ur,9),g.Y36(hn,10),g.Y36(gi,10),g.Y36(hr,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Fp]),g.qOj,g.TTD]}),n})(),Th=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Lp={provide:hr,useExisting:(0,g.Gpc)(()=>Ah),multi:!0};let Ah=(()=>{class n extends Vr{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[g._Bn([Lp]),g.qOj]}),n})(),ro=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const Sh=new g.OlP("NgModelWithFormControlWarning"),Bp={provide:Ur,useExisting:(0,g.Gpc)(()=>bl)};let bl=(()=>{class n extends Ur{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ss(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ts(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ii(t.control||null,t,!1),Yn(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Rt(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(ii(r||null,t),Yc(o)&&(Ts(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);M(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function F(n,e){return Ss(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){As(this.form,this),this._oldForm&&Ss(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(hn,10),g.Y36(gi,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Bp]),g.qOj,g.TTD]}),n})();const jp={provide:Ur,useExisting:(0,g.Gpc)(()=>xh)};let xh=(()=>{class n extends Ma{constructor(t,r,o){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(o)}_checkParentType(){my(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ur,13),g.Y36(hn,10),g.Y36(gi,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[g._Bn([jp]),g.qOj]}),n})();const gy={provide:Ur,useExisting:(0,g.Gpc)(()=>Rh)};let Rh=(()=>{class n extends Ur{constructor(t,r,o){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(o)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return ri(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){my(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ur,13),g.Y36(hn,10),g.Y36(gi,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[g._Bn([gy]),g.qOj]}),n})();function my(n){return!(n instanceof xh||n instanceof bl||n instanceof Rh)}const xs={provide:br,useExisting:(0,g.Gpc)(()=>Jc)};let Jc=(()=>{class n extends br{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=pt(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),ft(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ri(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(g.Y36(Ur,13),g.Y36(hn,10),g.Y36(gi,10),g.Y36(hr,10),g.Y36(Sh,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([xs]),g.qOj,g.TTD]}),n})(),Na=(()=>{class n{constructor(){this._validator=ni}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ni,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,features:[g.TTD]}),n})();const bu={provide:hn,useExisting:(0,g.Gpc)(()=>Oa),multi:!0};let Oa=(()=>{class n extends Na{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function F0(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>ba}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&g.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[g._Bn([bu]),g.qOj]}),n})(),Yp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[ro]]}),n})(),Cl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Yp]}),n})(),jr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Sh,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Yp]}),n})();const Hn_firebase={projectId:"clinica-61d99",appId:"1:935628468088:web:6f62f96c57fe9837a5628d",storageBucket:"clinica-61d99.appspot.com",apiKey:"AIzaSyA4ALUsktzFXb8fZYGPdfpemnjrs5ZuofY",authDomain:"clinica-61d99.firebaseapp.com",messagingSenderId:"935628468088"};var gr=O(2011),is=O(7579);function vt(...n){const e=(0,ws.yG)(n);return(0,En.D)(n,e)}var Vh=O(6451),Tl=O(5363),ln=O(4482);function Fn(n,e){return(0,ln.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Tt.x)(r,w=>{null==o||o.unsubscribe();let C=0;const x=u++;(0,Lr.Xf)(n(w,x)).subscribe(o=(0,Tt.x)(r,N=>r.next(e?e(w,N,x,C++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var Xp=O(6063);class eg extends is.x{constructor(e=1/0,t=1/0,r=Xp.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var Uh=O(3099);function nd(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,Uh.B)({connector:()=>new eg(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const Al=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function io(n,e){return(0,ln.e)((t,r)=>{let o=0;t.subscribe((0,Tt.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Fi=O(5698);function jh(n){return(0,ln.e)((e,t)=>{let r=!1;e.subscribe((0,Tt.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function tg(n=rd){return(0,ln.e)((e,t)=>{let r=!1;e.subscribe((0,Tt.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function rd(){return new Al}var Sl=O(4671);function Vo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?io((o,u)=>n(o,u,r)):Sl.y,(0,Fi.q)(1),t?jh(e):tg(()=>new Al))}var Ar=O(576);function id(n,e){return(0,Ar.m)(e)?Fn(()=>n,e):Fn(()=>n)}var Ml=O(9468),Gn=O(5813);O(5867);var G=O(5861),je=O(9681),ot=O(4859),Oe=O(2090),Xt=O(1877);const si=new Map,Rl={activated:!1,tokenObservers:[]},by={initialized:!1,enabled:!1};function cn(n){return si.get(n)||Rl}function oi(n,e){si.set(n,e)}function Tu(){return by}class Gh{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,G.Z)(function*(){t.stop();try{t.pending=new Oe.BH,yield function Ty(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Oe.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const $r=new Oe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ig(n){if(!cn(n).activated)throw $r.create("use-before-activation",{appName:n.name})}function sg(n,e){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,G.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(N){throw $r.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw $r.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw $r.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw $r.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),x=Date.now();return{token:m.token,expireTimeMillis:x+C,issuedAtTimeMillis:x}})).apply(this,arguments)}function AD(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const od="firebase-app-check-store";let Wh=null;function ag(){return Wh||(Wh=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e($r.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(od,{keyPath:"compositeKey"})}}catch(t){e($r.create("storage-open",{originalErrorMessage:t.message}))}}),Wh)}function dg(){return(dg=(0,G.Z)(function*(n,e){const r=(yield ag()).transaction(od,"readwrite"),u=r.objectStore(od).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;m($r.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const ad=new Xt.Yd("@firebase/app-check");function xy(n,e){return(0,Oe.hl)()?function ug(n,e){return function cg(n,e){return dg.apply(this,arguments)}(function q0(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ad.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function xD(){return Tu().enabled}function Ny(){return Oy.apply(this,arguments)}function Oy(){return(Oy=(0,G.Z)(function*(){const n=Tu();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const RD={error:"UNKNOWN_ERROR"};function ND(n){return Oe.US.encodeString(JSON.stringify(n),!1)}function Li(n){return Py.apply(this,arguments)}function Py(){return(Py=(0,G.Z)(function*(n,e=!1){const t=n.app;ig(t);const r=cn(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&Zh(w)&&(o=w)}if(!e&&o&&Zh(o))return{token:o.token};let m,d=!1;if(xD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=sg(AD(t,yield Ny()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const w=yield r.exchangeTokenPromise;return yield xy(t,w),oi(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?ad.warn(w.message):ad.error(w),u=w}return o?(m={token:o.token},oi(t,Object.assign(Object.assign({},r),{token:o})),yield xy(t,o)):m=PD(u),d&&Z0(t,m),m})).apply(this,arguments)}function ky(n,e){const t=cn(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),oi(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function W0(n){const{app:e}=n,t=cn(e);let r=t.tokenRefresher;r||(r=function OD(n){const{app:e}=n;return new Gh((0,G.Z)(function*(){let r;if(r=cn(e).token?yield Li(n,!0):yield Li(n),r.error)throw r.error}),()=>!0,()=>{const t=cn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),oi(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Z0(n,e){const t=cn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Zh(n){return n.expireTimeMillis-Date.now()>0}function PD(n){return{token:ND(RD),error:n}}class kD{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=cn(this.app);for(const t of e)ky(this.app,t.next);return Promise.resolve()}}const By="app-check-internal";!function xT(){(0,je._registerComponent)(new ot.wA("app-check",n=>function FD(n,e){return new kD(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(By).initialize()})),(0,je._registerComponent)(new ot.wA(By,n=>function Dt(n){return{getToken:e=>Li(n,e),addTokenListener:e=>function pg(n,e,t,r){const{app:o}=n,u=cn(o),d={next:t,error:r,type:e};if(oi(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&Zh(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),W0(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>W0(n))}(n,"INTERNAL",e),removeTokenListener:e=>ky(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,je.registerVersion)("@firebase/app-check","0.5.8")}();class vg{constructor(){return(0,Gn.vb)("app-check")}}"undefined"!=typeof window&&window;var sE=O(127);const Eg=new g.OlP("angularfire2.auth.use-emulator"),$y=new g.OlP("angularfire2.auth.settings"),wg=new g.OlP("angularfire2.auth.tenant-id"),aE=new g.OlP("angularfire2.auth.langugage-code"),ka=new g.OlP("angularfire2.auth.use-device-language"),Hy=new g.OlP("angularfire.auth.persistence"),uE=(n,e,t,r,o,u,d,m)=>(0,gr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,x]of Object.entries(d))w.settings[C]=x;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let ud=(()=>{class n{constructor(t,r,o,u,d,m,w,C,x,N,z,te){const ge=new is.x,Fe=vt(void 0).pipe((0,Tl.Q)(d.outsideAngular),Fn(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,8775)))),(0,wt.U)(()=>(0,gr.on)(t,u,r)),(0,wt.U)(nt=>uE(nt,u,m,C,x,N,w,z)),nd({bufferSize:1,refCount:!1}));if(wo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=vt(null);else{Fe.pipe(Vo()).subscribe();const Ft=Fe.pipe(Fn(At=>At.getRedirectResult().then(Vt=>Vt,()=>null)),Gn.iC,nd({bufferSize:1,refCount:!1})),Lt=Fe.pipe(Fn(At=>new Es.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>At.onAuthStateChanged(rn=>Vt.next(rn),rn=>Vt.error(rn),()=>Vt.complete()))})))),jt=Fe.pipe(Fn(At=>new Es.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>At.onIdTokenChanged(rn=>Vt.next(rn),rn=>Vt.error(rn),()=>Vt.complete()))}))));this.authState=Ft.pipe(id(Lt),(0,Ml.R)(d.outsideAngular),(0,Tl.Q)(d.insideAngular)),this.user=Ft.pipe(id(jt),(0,Ml.R)(d.outsideAngular),(0,Tl.Q)(d.insideAngular)),this.idToken=this.user.pipe(Fn(At=>At?(0,En.D)(At.getIdToken()):vt(null))),this.idTokenResult=this.user.pipe(Fn(At=>At?(0,En.D)(At.getIdTokenResult()):vt(null))),this.credential=(0,Vh.T)(Ft,ge,this.authState.pipe(io(At=>!At))).pipe((0,wt.U)(At=>(null==At?void 0:At.user)?At:null),(0,Ml.R)(d.outsideAngular),(0,Tl.Q)(d.insideAngular))}return(0,gr.pX)(this,Fe,u,{spy:{apply:(nt,Ft,Lt)=>{(nt.startsWith("signIn")||nt.startsWith("createUser"))&&Lt.then(jt=>ge.next(jt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(gr.Dh),g.LFG(gr.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Gn.HU),g.LFG(Eg,8),g.LFG($y,8),g.LFG(wg,8),g.LFG(aE,8),g.LFG(ka,8),g.LFG(Hy,8),g.LFG(vg,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),BD=(()=>{class n{constructor(){sE.Z.registerVersion("angularfire",Gn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[ud]}),n})();var lE=O(4986),Ig=O(8189);function kl(...n){return function jD(){return(0,Ig.J)(1)}()((0,En.D)(n,(0,ws.yG)(n)))}function Fa(...n){const e=(0,ws.yG)(n);return(0,ln.e)((t,r)=>{(e?kl(n,t,e):kl(n,t)).subscribe(r)})}function Jh(){return(0,ln.e)((n,e)=>{let t,r=!1;n.subscribe((0,Tt.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function ld(n,e,t,r,o){return(u,d)=>{let m=t,w=e,C=0;u.subscribe((0,Tt.x)(d,x=>{const N=C++;w=m?n(w,x,N):(m=!0,x),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function La(n,e){return(0,ln.e)(ld(n,e,arguments.length>=2,!0))}function $D(n,e){return n===e}O(8775);var et,cE=O(3942),Gy="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},oo={},dd=dd||{},It=Gy||self;function Xh(){}function dE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function hd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var qy="closure_uid_"+(1e9*Math.random()>>>0),fE=0;function GD(n,e,t){return n.call.apply(n.bind,arguments)}function qD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function nn(n,e,t){return(nn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?GD:qD).apply(null,arguments)}function Dg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Hr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Fl(){this.s=this.s,this.o=this.o}var pE={};Fl.prototype.s=!1,Fl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function hE(n){return Object.prototype.hasOwnProperty.call(n,qy)&&n[qy]||(n[qy]=++fE)}(this);delete pE[n]}},Fl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const zD=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},gE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function Wy(n){return Array.prototype.concat.apply([],arguments)}function Zy(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function bg(n){return/^[\s\xa0]*$/.test(n)}var ui,mE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ai(n,e){return-1!=n.indexOf(e)}function Ky(n,e){return n<e?-1:n>e?1:0}e:{var yE=It.navigator;if(yE){var _E=yE.userAgent;if(_E){ui=_E;break e}}ui=""}function Cg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Yy(n){const e={};for(const t in n)e[t]=n[t];return e}var vE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ao(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<vE.length;u++)t=vE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ef(n){return ef[" "](n),n}ef[" "]=Xh;var Ag,n,ZD=ai(ui,"Opera"),tf=ai(ui,"Trident")||ai(ui,"MSIE"),Qy=ai(ui,"Edge"),Jy=Qy||tf,EE=ai(ui,"Gecko")&&!(ai(ui.toLowerCase(),"webkit")&&!ai(ui,"Edge"))&&!(ai(ui,"Trident")||ai(ui,"MSIE"))&&!ai(ui,"Edge"),KD=ai(ui.toLowerCase(),"webkit")&&!ai(ui,"Edge");function Tg(){var n=It.document;return n?n.documentMode:void 0}e:{var Xy="",fd=(n=ui,EE?/rv:([^\);]+)(\)|;)/.exec(n):Qy?/Edge\/([\d\.]+)/.exec(n):tf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):KD?/WebKit\/(\S+)/.exec(n):ZD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(fd&&(Xy=fd?fd[1]:""),tf){var nf=Tg();if(null!=nf&&nf>parseFloat(Xy)){Ag=String(nf);break e}}Ag=Xy}var YD={};var QD=It.document&&tf&&(Tg()||parseInt(Ag,10))||void 0,JD=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",Xh,e),It.removeEventListener("test",Xh,e)}catch(t){}return n}();function Sr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Sg(n,e){if(Sr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(EE){e:{try{ef(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:XD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Sg.Z.h.call(this)}}Sr.prototype.h=function(){this.defaultPrevented=!0},Hr(Sg,Sr);var XD={2:"touch",3:"pen",4:"mouse"};Sg.prototype.h=function(){Sg.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var pd="closure_listenable_"+(1e6*Math.random()|0),wE=0;function IE(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++wE,this.ca=this.fa=!1}function sf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function of(n){this.src=n,this.g={},this.h=0}function uo(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=zD(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(sf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function gd(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}of.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=gd(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new IE(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var n_="closure_lm_"+(1e6*Math.random()|0),r_={};function eb(n,e,t,r,o){if(r&&r.once)return xg(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)eb(n,e[u],t,r,o);return null}return t=s_(t),n&&n[pd]?n.N(e,t,hd(r)?!!r.capture:!!r,o):Mg(n,e,t,!1,r,o)}function Mg(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=hd(o)?!!o.capture:!!o,m=Ng(n);if(m||(n[n_]=m=new of(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function DE(){var e=bE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)JD||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Rg(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function xg(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)xg(n,e[u],t,r,o);return null}return t=s_(t),n&&n[pd]?n.O(e,t,hd(r)?!!r.capture:!!r,o):Mg(n,e,t,!0,r,o)}function md(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)md(n,e[u],t,r,o);else r=hd(r)?!!r.capture:!!r,t=s_(t),n&&n[pd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=gd(u=n.g[e],t,r,o))&&(sf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Ng(n))&&(e=n.g[e.toString()],n=-1,e&&(n=gd(e,t,r,o)),(t=-1<n?e[n]:null)&&i_(t))}function i_(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[pd])uo(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Rg(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ng(e))?(uo(t,n),0==t.h&&(t.src=null,e[n_]=null)):sf(n)}}}function Rg(n){return n in r_?r_[n]:r_[n]="on"+n}function bE(n,e){if(n.ca)n=!0;else{e=new Sg(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&i_(n),n=t.call(r,e)}return n}function Ng(n){return(n=n[n_])instanceof of?n:null}var Og="__closure_events_fn_"+(1e9*Math.random()>>>0);function s_(n){return"function"==typeof n?n:(n[Og]||(n[Og]=function(e){return n.handleEvent(e)}),n[Og])}function Xn(){Fl.call(this),this.i=new of(this),this.P=this,this.I=null}function Gr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Sr(e,n);else if(e instanceof Sr)e.target=e.target||n;else{var o=e;ao(e=new Sr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Pg(d,r,!0,e)&&o}if(o=Pg(d=e.g=n,r,!0,e)&&o,o=Pg(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Pg(d=e.g=t[u],r,!1,e)&&o}function Pg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&uo(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Hr(Xn,Fl),Xn.prototype[pd]=!0,Xn.prototype.removeEventListener=function(n,e,t,r){md(this,n,e,t,r)},Xn.prototype.M=function(){if(Xn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)sf(t[r]);delete n.g[e],n.h--}}this.I=null},Xn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Xn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var kg=It.JSON.stringify;function yd(){var n=Ps;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var a_,TE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new tb,n=>n.reset());class tb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _d(n){It.setTimeout(()=>{throw n},0)}function o_(n,e){a_||function nb(){var n=It.Promise.resolve(void 0);a_=function(){n.then(l_)}}(),u_||(a_(),u_=!0),Ps.add(n,e)}var u_=!1,Ps=new class CE{constructor(){this.h=this.g=null}add(e,t){const r=TE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function l_(){for(var n;n=yd();){try{n.h.call(n.g)}catch(t){_d(t)}var e=TE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}u_=!1}function af(n,e){Xn.call(this),this.h=n||1,this.g=e||It,this.j=nn(this.kb,this),this.l=Date.now()}function Fg(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Lg(n,e,t){if("function"==typeof n)t&&(n=nn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=nn(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function c_(n){n.g=Lg(()=>{n.g=null,n.i&&(n.i=!1,c_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Hr(af,Xn),(et=af.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Gr(this,"tick"),this.da&&(Fg(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){af.Z.M.call(this),Fg(this),delete this.g};class rb extends Fl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:c_(this)}M(){super.M(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uf(n){Fl.call(this),this.h=n,this.g={}}Hr(uf,Fl);var AE=[];function SE(n,e,t,r){Array.isArray(t)||(t&&(AE[0]=t.toString()),t=AE);for(var o=0;o<t.length;o++){var u=eb(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function d_(n){Cg(n.g,function(e,t){this.g.hasOwnProperty(t)&&i_(e)},n),n.g={}}function h_(){this.g=!0}function vd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function LT(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return kg(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}uf.prototype.M=function(){uf.Z.M.call(this),d_(this)},uf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},h_.prototype.Aa=function(){this.g=!1},h_.prototype.info=function(){};var Va={},xE=null;function lf(){return xE=xE||new Xn}function f_(n){Sr.call(this,Va.Ma,n)}function Vg(n){const e=lf();Gr(e,new f_(e,n))}function ks(n,e){Sr.call(this,Va.STAT_EVENT,n),this.stat=e}function Vi(n){const e=lf();Gr(e,new ks(e,n))}function sb(n,e){Sr.call(this,Va.Na,n),this.size=e}function Ed(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Va.Ma="serverreachability",Hr(f_,Sr),Va.STAT_EVENT="statevent",Hr(ks,Sr),Va.Na="timingevent",Hr(sb,Sr);var cf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},p_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function g_(){}function m_(){}g_.prototype.h=null;var __,Ll={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function y_(){Sr.call(this,"d")}function df(){Sr.call(this,"c")}function Ug(){}function hf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new uf(this),this.P=ab,this.W=new af(n=Jy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new RE}function RE(){this.i=null,this.g="",this.h=!1}Hr(y_,Sr),Hr(df,Sr),Hr(Ug,g_),Ug.prototype.g=function(){return new XMLHttpRequest},Ug.prototype.i=function(){return{}},__=new Ug;var ab=45e3,v_={},Vl={};function Au(n,e,t){n.K=1,n.v=gf(Ui(e)),n.s=t,n.U=!0,NE(n,null)}function NE(n,e){n.F=Date.now(),Ul(n),n.A=Ui(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),I_(t.h,"t",r),n.C=0,t=n.l.H,n.h=new RE,n.g=P_(n.l,t?e:null,!n.s),0<n.O&&(n.L=new rb(nn(n.Ia,n,n.g),n.O)),SE(n.V,n.g,"readystatechange",n.gb),e=n.H?Yy(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Vg(1),function ME(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var x=C[0];C=C[1];var N=x.split("_");d=2<=N.length&&"type"==N[1]?d+(x+"=")+C+"&":d+(x+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function wd(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function OE(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=ub(n,t),o==Vl){4==e&&(n.o=4,Vi(14),r=!1),vd(n.j,n.m,null,"[Incomplete Response]");break}if(o==v_){n.o=4,Vi(15),vd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}vd(n.j,n.m,o,null),Id(n,o)}wd(n)&&o!=Vl&&o!=v_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Yg(e),e.L=!0,Vi(11))):(vd(n.j,n.m,t,"[Invalid Chunked Response]"),ss(n),er(n))}function ub(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Vl:(t=Number(e.substring(t,r)),isNaN(t)?v_:(r+=1)+t>e.length?Vl:(e=e.substr(r,t),n.C=r+t,e))}function Ul(n){n.Y=Date.now()+n.P,lo(n,n.P)}function lo(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ed(nn(n.eb,n),e)}function Su(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function er(n){0==n.l.G||n.I||N_(n.l,n)}function ss(n){Su(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Fg(n.W),d_(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Id(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||GE(t.i,n)))if(t.I=n.N,!n.J&&GE(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ed(nn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;xd(t),$l(t)}If(t),Vi(18)}if(1>=HE(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Ru(t,11)}else if((n.J||t.g==n)&&xd(t),!bg(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const x=C[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const z=C[5];null!=z&&"number"==typeof z&&0<z&&(t.K=r=1.5*z,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const te=n.g;if(te){const ge=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ge){var u=r.i;!u.g&&(ai(ge,"spdy")||ai(ge,"quic")||ai(ge,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(qE(u,u.h),u.h=null))}if(r.D){const Fe=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,In(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=Qg(r,r.H?r.la:null,r.W),d.J){db(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(Su(m),Ul(m)),r.g=d}else x_(r);0<t.l.length&&S_(t)}else"stop"!=C[0]&&"close"!=C[0]||Ru(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Ru(t,7):A_(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Vg(4)}catch(C){}}function ff(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(dE(n)||"string"==typeof n)gE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(dE(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function Fs(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(dE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function co(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof co)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Mu(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ls(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Ls(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Ls(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=hf.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==ja(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const x=ja(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>x)&&(3!=x||Jy||this.g&&(this.h.h||this.g.ga()||yb(this.g)))){this.I||4!=x||7==e||Vg(8==e||0>=N?3:2),Su(this);var t=this.g.ba();this.N=t;t:if(wd(this)){var r=yb(this.g);n="";var o=r.length,u=4==ja(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ss(this),er(this);var d="";break t}this.h.i=new It.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function ib(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bg(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Vi(12),ss(this),er(this);break e}vd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Id(this,t)}this.U?(OE(this,x,d),Jy&&this.i&&3==x&&(SE(this.V,this.W,"tick",this.fb),this.W.start())):(vd(this.j,this.m,d,null),Id(this,d)),4==x&&ss(this),this.i&&!this.I&&(4==x?N_(this.l,this):(this.i=!1,Ul(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Vi(12)):(this.o=0,Vi(13)),ss(this),er(this)}}}catch(x){}},et.fb=function(){if(this.g){var n=ja(this.g),e=this.g.ga();this.C<e.length&&(Su(this),OE(this,n,e),this.i&&4!=n&&Ul(this))}},et.cancel=function(){this.I=!0,ss(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function FT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Vg(3),Vi(17)),ss(this),this.o=2,er(this)):lo(this,this.Y-n)},(et=co.prototype).R=function(){Mu(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return Mu(this),this.g.concat()},et.get=function(n,e){return Ls(this.h,n)?this.h[n]:e},et.set=function(n,e){Ls(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Bl=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vs(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Vs){this.g=void 0!==e?e:n.g,Ua(this,n.j),this.s=n.s,Ba(this,n.i),pf(this,n.m),this.l=n.l,e=n.h;var t=new mf;t.i=e.i,e.g&&(t.g=new co(e.g),t.h=e.h),E_(this,t),this.o=n.o}else n&&(t=String(n).match(Bl))?(this.g=!!e,Ua(this,t[1]||"",!0),this.s=bd(t[2]||""),Ba(this,t[3]||"",!0),pf(this,t[4]),this.l=bd(t[5]||"",!0),E_(this,t[6]||"",!0),this.o=bd(t[7]||"")):(this.g=!!e,this.h=new mf(null,this.g))}function Ui(n){return new Vs(n)}function Ua(n,e,t){n.j=t?bd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ba(n,e,t){n.i=t?bd(e,!0):e}function pf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function E_(n,e,t){e instanceof mf?(n.h=e,function cb(n,e){e&&!n.j&&(xu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(w_(this,r),I_(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Cd(e,UE)),n.h=new mf(e,n.g))}function In(n,e,t){n.h.set(e,t)}function gf(n){return In(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function bd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Cd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,FE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function FE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Vs.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Cd(e,LE,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Cd(e,LE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Cd(t,"/"==t.charAt(0)?lb:VE,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Cd(t,BE)),n.join("")};var LE=/[#\/\?@]/g,VE=/[#\?:]/g,lb=/[#\?]/g,UE=/[#\?@]/g,BE=/#/g;function mf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function xu(n){n.g||(n.g=new co,n.h=0,n.i&&function Dd(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function w_(n,e){xu(n),e=Td(n,e),Ls(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ls((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Mu(n)))}function jE(n,e){return xu(n),e=Td(n,e),Ls(n.g.h,e)}function I_(n,e,t){w_(n,e),0<t.length&&(n.i=null,n.g.set(Td(n,e),Zy(t)),n.h+=t.length)}function Td(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function $E(n){this.l=n||D_,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ea&&It.g.Ea()&&It.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=mf.prototype).add=function(n,e){xu(this),this.i=null,n=Td(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){xu(this),this.g.forEach(function(t,r){gE(t,function(o){n.call(e,o,r,this)},this)},this)},et.T=function(){xu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},et.R=function(n){xu(this);var e=[];if("string"==typeof n)jE(this,n)&&(e=Wy(e,this.g.get(Td(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Wy(e,n[t])}return e},et.set=function(n,e){return xu(this),this.i=null,jE(this,n=Td(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var D_=10;function Bg(n){return!!n.h||!!n.g&&n.g.size>=n.j}function HE(n){return n.h?1:n.g?n.g.size:0}function GE(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function qE(n,e){n.g?n.g.add(e):n.h=e}function db(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function zE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Zy(n.i)}function jg(){}function UT(){this.g=new jg}function hb(n,e,t){const r=t||"";try{ff(n,function(o,u){let d=o;hd(o)&&(d=kg(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function $g(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Sd(n){this.l=n.$b||null,this.j=n.ib||!1}function Hg(n,e){Xn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Gg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$E.prototype.cancel=function(){if(this.i=zE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},jg.prototype.stringify=function(n){return It.JSON.stringify(n,void 0)},jg.prototype.parse=function(n){return It.JSON.parse(n,void 0)},Hr(Sd,g_),Sd.prototype.g=function(){return new Hg(this.l,this.j)},Sd.prototype.i=function(n){return function(){return n}}({}),Hr(Hg,Xn);var Gg=0;function yf(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function _f(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Md(n)}function Md(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=Hg.prototype).open=function(n,e){if(this.readyState!=Gg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Md(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||It).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_f(this)),this.readyState=Gg},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Md(this)),this.g&&(this.readyState=3,Md(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==It.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yf(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?_f(this):Md(this),3==this.readyState&&yf(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,_f(this))},et.Ta=function(n){this.g&&(this.response=n,_f(this))},et.ha=function(){this.g&&_f(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Hg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var fb=It.JSON.parse;function tr(n){Xn.call(this),this.headers=new co,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=WE,this.K=this.L=!1}Hr(tr,Xn);var WE="",pb=/^https?$/i,gb=["POST","PUT"];function mb(n){return"content-type"==n.toLowerCase()}function b_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,C_(n),T_(n)}function C_(n){n.D||(n.D=!0,Gr(n,"complete"),Gr(n,"error"))}function qg(n){if(n.h&&void 0!==dd&&(!n.C[1]||4!=ja(n)||2!=n.ba()))if(n.v&&4==ja(n))Lg(n.Fa,0,n);else if(Gr(n,"readystatechange"),4==ja(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Bl)[1]||null;if(!o&&It.self&&It.self.location){var u=It.self.location.protocol;o=u.substr(0,u.length-1)}r=!pb.test(o?o.toLowerCase():"")}t=r}if(t)Gr(n,"complete"),Gr(n,"success");else{n.m=6;try{var d=2<ja(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",C_(n)}}finally{T_(n)}}}function T_(n,e){if(n.g){zg(n);const t=n.g,r=n.C[0]?Xh:null;n.g=null,n.C=null,e||Gr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function zg(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function ja(n){return n.g?n.g.readyState:0}function yb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case WE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Wg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function vf(n){let e="";return Cg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):In(n,e,t))}function jl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Zg(n){this.za=0,this.l=[],this.h=new h_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=jl("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=jl("baseRetryDelayMs",5e3,n),this.$a=jl("retryDelaySeedMs",1e4,n),this.Ya=jl("forwardChannelMaxRetries",2,n),this.ra=jl("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new $E(n&&n.concurrentRequestLimit),this.Ca=new UT,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function A_(n){if(Ef(n),3==n.G){var e=n.V++,t=Ui(n.F);In(t,"SID",n.J),In(t,"RID",e),In(t,"TYPE","terminate"),Hl(n,t),(e=new hf(n,n.h,e,void 0)).K=2,e.v=gf(Ui(t)),t=!1,It.navigator&&It.navigator.sendBeacon&&(t=It.navigator.sendBeacon(e.v.toString(),"")),!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=P_(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ul(e)}O_(n)}function $l(n){n.g&&(Yg(n),n.g.cancel(),n.g=null)}function Ef(n){$l(n),n.u&&(It.clearTimeout(n.u),n.u=null),xd(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function wf(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&S_(n)}function S_(n){Bg(n.i)||n.m||(n.m=!0,o_(n.Ha,n),n.C=0)}function Kg(n,e){var t;t=e?e.m:n.V++;const r=Ui(n.F);In(r,"SID",n.J),In(r,"RID",t),In(r,"AID",n.U),Hl(n,r),n.o&&n.s&&Wg(r,n.o,n.s),t=new hf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=M_(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),qE(n.i,t),Au(t,r,e)}function Hl(n,e){n.j&&ff({},function(t,r){In(e,r,t)})}function M_(n,e,t){t=Math.min(n.l.length,t);var r=n.j?nn(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const x=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{hb(x,d,"req"+C+"_")}catch(N){r&&r(x)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function x_(n){n.g||n.u||(n.Y=1,o_(n.Ga,n),n.A=0)}function If(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ed(nn(n.Ga,n),KE(n,n.A)),n.A++,0))}function Yg(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function R_(n){n.g=new hf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ui(n.oa);In(e,"RID","rpc"),In(e,"SID",n.J),In(e,"CI",n.N?"0":"1"),In(e,"AID",n.U),Hl(n,e),In(e,"TYPE","xmlhttp"),n.o&&n.s&&Wg(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=gf(Ui(e)),t.s=null,t.U=!0,NE(t,n)}function xd(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function N_(n,e){var t=null;if(n.g==e){xd(n),Yg(n),n.g=null;var r=2}else{if(!GE(n.i,e))return;t=e.D,db(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Gr(r=lf(),new sb(r,t,e,o)),S_(n)}else x_(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function _b(n,e){return!(HE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ed(nn(n.Ha,n,e),KE(n,n.C)),n.C++,0)))}(n,e)||2==r&&If(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Ru(n,5);break;case 4:Ru(n,10);break;case 3:Ru(n,6);break;default:Ru(n,2)}}function KE(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ru(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=nn(n.jb,n);t||(t=new Vs("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||Ua(t,"https"),gf(t)),function Ad(n,e){const t=new h_;if(It.Image){const r=new Image;r.onload=Dg($g,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Dg($g,t,r,"TestLoadImage: error",!1,e),r.onabort=Dg($g,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Dg($g,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Vi(2);n.G=0,n.j&&n.j.va(e),O_(n),Ef(n)}function O_(n){n.G=0,n.I=-1,n.j&&((0!=zE(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Zy(n.l),n.l.length=0),n.j.ua())}function Qg(n,e,t){let r=function PE(n){return n instanceof Vs?Ui(n):new Vs(n,void 0)}(t);if(""!=r.i)e&&Ba(r,e+"."+r.i),pf(r,r.m);else{const o=It.location;r=function kE(n,e,t,r){var o=new Vs(null,void 0);return n&&Ua(o,n),e&&Ba(o,e),t&&pf(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Cg(n.aa,function(o,u){In(r,u,o)}),t=n.sa,(e=n.D)&&t&&In(r,e,t),In(r,"VER",n.ma),Hl(n,r),r}function P_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new tr(t&&n.Ba&&!n.qa?new Sd({ib:!0}):n.qa)).L=n.H,e}function YE(){}function Jg(){if(tf&&!(10<=Number(QD)))throw Error("Environmental error: no available transport.")}function os(n,e){Xn.call(this),this.g=new Zg(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!bg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Gl(this)}function k_(n){y_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Xg(){df.call(this),this.status=1}function Gl(n){this.g=n}(et=tr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():__.g(),this.C=function ob(n){return n.h||(n.h=n.i())}(this.u?this.u:__),this.g.onreadystatechange=nn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void b_(this,u)}n=t||"";const o=new co(this.headers);r&&ff(r,function(u,d){o.set(d,u)}),r=function zy(n){e:{var e=mb;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=It.FormData&&n instanceof It.FormData,!(0<=zD(gb,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zg(this),0<this.B&&((this.K=function ZE(n){return tf&&function e_(){return function WD(n){var e=YD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=mE(String(Ag)).split("."),t=mE("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Ky(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Ky(0==o[2].length,0==u[2].length)||Ky(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nn(this.pa,this)):this.A=Lg(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){b_(this,u)}},et.pa=function(){void 0!==dd&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gr(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Gr(this,"complete"),Gr(this,"abort"),T_(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),T_(this,!0)),tr.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?qg(this):this.cb())},et.cb=function(){qg(this)},et.ba=function(){try{return 2<ja(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),fb(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=Zg.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new hf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Yy(u),ao(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=M_(this,o,e),In(t=Ui(this.F),"RID",n),In(t,"CVER",22),this.D&&In(t,"X-HTTP-Session-Id",this.D),Hl(this,t),this.o&&u&&Wg(t,this.o,u),qE(this.i,o),this.Ra&&In(t,"TYPE","init"),this.ja?(In(t,"$req",e),In(t,"SID","null"),o.$=!0,Au(o,t,null)):Au(o,t,e),this.G=2}}else 3==this.G&&(n?Kg(this,n):0==this.l.length||Bg(this.i)||Kg(this))},et.Ga=function(){if(this.u=null,R_(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ed(nn(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Vi(10),$l(this),R_(this))},et.ab=function(){null!=this.v&&(this.v=null,$l(this),If(this),Vi(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Vi(2)):(this.h.info("Failed to ping google.com"),Vi(1))},(et=YE.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},Jg.prototype.g=function(n,e){return new os(n,e)},Hr(os,Xn),os.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),o_(nn(n.hb,n,e))),Vi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Qg(n,null,n.W),S_(n)},os.prototype.close=function(){A_(this.g)},os.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,wf(this.g,e)}else this.v?((e={}).__data__=kg(n),wf(this.g,e)):wf(this.g,n)},os.prototype.M=function(){this.g.j=null,delete this.j,A_(this.g),delete this.g,os.Z.M.call(this)},Hr(k_,y_),Hr(Xg,df),Hr(Gl,YE),Gl.prototype.xa=function(){Gr(this.g,"a")},Gl.prototype.wa=function(n){Gr(this.g,new k_(n))},Gl.prototype.va=function(n){Gr(this.g,new Xg(n))},Gl.prototype.ua=function(){Gr(this.g,"b")},Jg.prototype.createWebChannel=Jg.prototype.g,os.prototype.send=os.prototype.u,os.prototype.open=os.prototype.m,os.prototype.close=os.prototype.close,cf.NO_ERROR=0,cf.TIMEOUT=8,cf.HTTP_ERROR=6,p_.COMPLETE="complete",m_.EventType=Ll,Ll.OPEN="a",Ll.CLOSE="b",Ll.ERROR="c",Ll.MESSAGE="d",Xn.prototype.listen=Xn.prototype.N,tr.prototype.listenOnce=tr.prototype.O,tr.prototype.getLastError=tr.prototype.La,tr.prototype.getLastErrorCode=tr.prototype.Da,tr.prototype.getStatus=tr.prototype.ba,tr.prototype.getResponseJson=tr.prototype.Qa,tr.prototype.getResponseText=tr.prototype.ga,tr.prototype.send=tr.prototype.ea;var QE=oo.createWebChannelTransport=function(){return new Jg},JE=oo.getStatEventTarget=function(){return lf()},em=oo.ErrorCode=cf,XE=oo.EventType=p_,ew=oo.Event=Va,F_=oo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},tw=oo.FetchXmlHttpFactory=Sd,L_=oo.WebChannel=m_,vb=oo.XhrIo=tr;const nw="@firebase/firestore";class Mr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mr.UNAUTHENTICATED=new Mr(null),Mr.GOOGLE_CREDENTIALS=new Mr("google-credentials-uid"),Mr.FIRST_PARTY=new Mr("first-party-uid"),Mr.MOCK_USER=new Mr("mock-user");let Rd="9.8.0";const pn=new Xt.Yd("@firebase/firestore");function tm(){return pn.logLevel}function ke(n,...e){if(pn.logLevel<=Xt.in.DEBUG){const t=e.map(nm);pn.debug(`Firestore (${Rd}): ${n}`,...t)}}function qn(n,...e){if(pn.logLevel<=Xt.in.ERROR){const t=e.map(nm);pn.error(`Firestore (${Rd}): ${n}`,...t)}}function Df(n,...e){if(pn.logLevel<=Xt.in.WARN){const t=e.map(nm);pn.warn(`Firestore (${Rd}): ${n}`,...t)}}function nm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${Rd}) INTERNAL ASSERTION FAILED: `+n;throw qn(e),new Error(e)}function gt(n,e){n||tt()}function We(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Oe.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ib{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mr.UNAUTHENTICATED))}shutdown(){}}class V_{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class jo{constructor(e){this.t=e,this.currentUser=Mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new mr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,G.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new mr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt("string"==typeof r.accessToken),new Ib(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gt(null===e||"string"==typeof e),new Mr(e)}}class Db{constructor(e,t,r){this.type="FirstParty",this.user=Mr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class bb{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Db(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ho{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fo{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(gt("string"==typeof t.token),this.p=t.token,new ho(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Bi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function iw(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Bi.A=-1;class sw{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=iw(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ct(n,e){return n<e?-1:n>e?1:0}function Nd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function ow(n){return n+"\0"}class Mn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mn.fromMillis(Date.now())}static fromDate(e){return Mn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Mn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ct(this.nanoseconds,e.nanoseconds):Ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new dt(e)}static min(){return new dt(new Mn(0,0))}static max(){return new dt(new Mn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function aw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Nu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Od{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Od.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Od?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Bt extends Od{construct(e,t,r){return new Bt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Bt(t)}static emptyPath(){return new Bt([])}}const rm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends Od{construct(e,t,r){return new yr(e,t,r)}static isValidIdentifier(e){return rm.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Me(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Me(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Me(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Me(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(t)}static emptyPath(){return new yr([])}}class ql{constructor(e){this.fields=e,e.sort(yr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class nr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new nr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new nr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nr.EMPTY_BYTE_STRING=new nr("");const im=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $a(n){if(gt(!!n),"string"==typeof n){let e=0;const t=im.exec(n);if(gt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xn(n.seconds),nanos:xn(n.nanos)}}function xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ou(n){return"string"==typeof n?nr.fromBase64String(n):nr.fromUint8Array(n)}function sm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function U_(n){const e=n.mapValue.fields.__previous_value__;return sm(e)?U_(e):e}function Pd(n){const e=$a(n.mapValue.fields.__local_write_time__.timestampValue);return new Mn(e.seconds,e.nanos)}class cw{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Ho{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ho("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ho&&e.projectId===this.projectId&&e.database===this.database}}function bf(n){return null==n}function Cf(n){return 0===n&&1/n==-1/0}function dw(n){return"number"==typeof n&&Number.isInteger(n)&&!Cf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class He{constructor(e){this.path=e}static fromPath(e){return new He(Bt.fromString(e))}static fromName(e){return new He(Bt.fromString(e).popFirst(5))}static empty(){return new He(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Bt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Bt(e.slice()))}}const Pu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},om={nullValue:"NULL_VALUE"};function zl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sm(n)?4:$_(n)?9007199254740991:10:tt()}function Go(n,e){if(n===e)return!0;const t=zl(n);if(t!==zl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pd(n).isEqual(Pd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=$a(r.timestampValue),d=$a(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ou(n.bytesValue).isEqual(Ou(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return xn(r.geoPointValue.latitude)===xn(o.geoPointValue.latitude)&&xn(r.geoPointValue.longitude)===xn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return xn(r.integerValue)===xn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=xn(r.doubleValue),d=xn(o.doubleValue);return u===d?Cf(u)===Cf(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Nd(n.arrayValue.values||[],e.arrayValue.values||[],Go);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(aw(u)!==aw(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Go(u[m],d[m])))return!1;return!0}(n,e);default:return tt()}var o}function Tf(n,e){return void 0!==(n.values||[]).find(t=>Go(t,e))}function ku(n,e){if(n===e)return 0;const t=zl(n),r=zl(e);if(t!==r)return Ct(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ct(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=xn(o.integerValue||o.doubleValue),m=xn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return hw(n.timestampValue,e.timestampValue);case 4:return hw(Pd(n),Pd(e));case 5:return Ct(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Ou(o),m=Ou(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=Ct(d[w],m[w]);if(0!==C)return C}return Ct(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Ct(xn(o.latitude),xn(u.latitude));return 0!==d?d:Ct(xn(o.longitude),xn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=ku(d[w],m[w]);if(C)return C}return Ct(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Pu.mapValue&&u===Pu.mapValue)return 0;if(o===Pu.mapValue)return 1;if(u===Pu.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let x=0;x<m.length&&x<C.length;++x){const N=Ct(m[x],C[x]);if(0!==N)return N;const z=ku(d[m[x]],w[C[x]]);if(0!==z)return z}return Ct(m.length,C.length)}(n.mapValue,e.mapValue);default:throw tt()}}function hw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ct(n,e);const t=$a(n),r=$a(e),o=Ct(t.seconds,r.seconds);return 0!==o?o:Ct(t.nanos,r.nanos)}function kd(n){return B_(n)}function B_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=$a(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ou(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=B_(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${B_(r.fields[m])}`;return u+"}"}(n.mapValue):tt();var e}function Wl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function j_(n){return!!n&&"integerValue"in n}function Af(n){return!!n&&"arrayValue"in n}function fw(n){return!!n&&"nullValue"in n}function pw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sf(n){return!!n&&"mapValue"in n}function Fd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Nu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function gw(n){return"nullValue"in n?om:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Wl(Ho.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function mw(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Wl(Ho.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Pu:tt()}function H_(n,e){const t=ku(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function G_(n,e){const t=ku(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class qr{constructor(e){this.value=e}static empty(){return new qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fd(t)}setAll(e){let t=yr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Fd(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Sf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Go(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Sf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Nu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new qr(Fd(this.value))}}function q_(n){const e=[];return Nu(n.fields,(t,r)=>{const o=new yr([t]);if(Sf(r)){const u=q_(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new ql(e)}class gn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new gn(e,0,dt.min(),dt.min(),qr.empty(),0)}static newFoundDocument(e,t,r){return new gn(e,1,t,dt.min(),r,0)}static newNoDocument(e,t){return new gn(e,2,t,dt.min(),qr.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,dt.min(),qr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Ha(n){return n.fields.find(e=>2===e.kind)}function Zl(n){return n.fields.filter(e=>2!==e.kind)}Mf.UNKNOWN_ID=-1;class am{constructor(e,t){this.fieldPath=e,this.kind=t}}class qo{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qo(0,zo.min())}}function Cb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=dt.fromTimestamp(1e9===r?new Mn(t+1,0):new Mn(t,r));return new zo(o,He.empty(),e)}function z_(n){return new zo(n.readTime,n.key,-1)}class zo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new zo(dt.min(),He.empty(),-1)}static max(){return new zo(dt.max(),He.empty(),-1)}}function W_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Ct(n.largestBatchId,e.largestBatchId))}class Ln{constructor(e,t){this.comparator=e,this.root=t||Je.EMPTY}insert(e,t){return new Ln(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Z_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Z_(this.root,e,this.comparator,!1)}getReverseIterator(){return new Z_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Z_(this.root,e,this.comparator,!0)}}class Z_{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Je.RED,this.left=null!=o?o:Je.EMPTY,this.right=null!=u?u:Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Je(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Je.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1,Je.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Je(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new Ln(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yw(this.data.getIterator())}getIteratorFrom(e){return new yw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class yw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ld(n){return n.hasNext()?n.getNext():void 0}class um{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function _w(n,e=null,t=[],r=[],o=null,u=null,d=null){return new um(n,e,t,r,o,u,d)}function Wo(n){const e=We(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+kd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),bf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>kd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>kd(r)).join(",")),e.P=t}return e.P}function yn(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!cm(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Go(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Q_(n.startAt,e.startAt)&&Q_(n.endAt,e.endAt)}function K_(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function xf(n,e){return n.filters.filter(t=>t instanceof xr&&t.field.isEqual(e))}function vw(n,e,t){let r=om,o=!0;for(const u of xf(n,e)){let d=om,m=!0;switch(u.op){case"<":case"<=":d=gw(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=om}H_({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];H_({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function Ew(n,e,t){let r=Pu,o=!0;for(const u of xf(n,e)){let d=Pu,m=!0;switch(u.op){case">=":case">":d=mw(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Pu}G_({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];G_({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class xr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new ww(e,t,r):"array-contains"===t?new Tb(e,r):"in"===t?new Ab(e,r):"not-in"===t?new Rf(e,r):"array-contains-any"===t?new Sb(e,r):new xr(e,t,r)}static V(e,t,r){return"in"===t?new Iw(e,r):new Dw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ku(t,this.value)):null!==t&&zl(this.value)===zl(t)&&this.v(ku(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ww extends xr{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.v(t)}}class Iw extends xr{constructor(e,t){super(e,"in",t),this.keys=bw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Dw extends xr{constructor(e,t){super(e,"not-in",t),this.keys=bw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class Tb extends xr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Af(t)&&Tf(t.arrayValue,this.value)}}class Ab extends xr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Tf(this.value.arrayValue,t)}}class Rf extends xr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Tf(this.value.arrayValue,t)}}class Sb extends xr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Af(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Tf(this.value.arrayValue,r))}}class Fu{constructor(e,t){this.position=e,this.inclusive=t}}class Vd{constructor(e,t="asc"){this.field=e,this.dir=t}}function cm(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Y_(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?He.comparator(He.fromName(d.referenceValue),t.key):ku(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Q_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Go(n.position[t],e.position[t]))return!1;return!0}class Zo{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function Cw(n,e,t,r,o,u,d,m){return new Zo(n,e,t,r,o,u,d,m)}function Ko(n){return new Zo(n)}function J_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function X_(n){for(const e of n.filters)if(e.S())return e.field;return null}function ev(n){return null!==n.collectionGroup}function Kl(n){const e=We(n);if(null===e.D){e.D=[];const t=X_(e),r=J_(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Vd(t)),e.D.push(new Vd(yr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Vd(yr.keyField(),u))}}}return e.D}function as(n){const e=We(n);if(!e.C)if("F"===e.limitType)e.C=_w(e.path,e.collectionGroup,Kl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Kl(e))t.push(new Vd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Fu(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Fu(e.startAt.position,e.startAt.inclusive):null;e.C=_w(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function tv(n,e,t){return new Zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Of(n,e){return yn(as(n),as(e))&&n.limitType===e.limitType}function nv(n){return`${Wo(as(n))}|lt:${n.limitType}`}function rv(n){return`Query(target=${function lm(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${kd(r.value)}`;var r}).join(", ")}]`),bf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>kd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>kd(t)).join(",")),`Target(${e})`}(as(n))}; limitType=${n.limitType})`}function iv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):He.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=Y_(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,Kl(t),r)||t.endAt&&!function(o,u,d){const m=Y_(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,Kl(t),r)));var t,r}function Mb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xb(n){return(e,t)=>{let r=!1;for(const o of Kl(n)){const u=BT(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function BT(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?ku(m,w):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function Rb(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cf(e)?"-0":e}}function sv(n){return{integerValue:""+n}}function Pf(n,e){return dw(e)?sv(e):Rb(n,e)}class dm{constructor(){this._=void 0}}function Nb(n,e,t){return n instanceof Bd?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Yl?Aw(n,e):n instanceof Ql?Sw(n,e):function(r,o){const u=Ud(r,o),d=Mw(u)+Mw(r.k);return j_(u)&&j_(r.k)?sv(d):Rb(r.M,d)}(n,e)}function Tw(n,e,t){return n instanceof Yl?Aw(n,e):n instanceof Ql?Sw(n,e):t}function Ud(n,e){return n instanceof Jl?j_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Bd extends dm{}class Yl extends dm{constructor(e){super(),this.elements=e}}function Aw(n,e){const t=xw(e);for(const r of n.elements)t.some(o=>Go(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ql extends dm{constructor(e){super(),this.elements=e}}function Sw(n,e){let t=xw(e);for(const r of n.elements)t=t.filter(o=>!Go(o,r));return{arrayValue:{values:t}}}class Jl extends dm{constructor(e,t){super(),this.M=e,this.k=t}}function Mw(n){return xn(n.integerValue||n.doubleValue)}function xw(n){return Af(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Yo{constructor(e,t){this.field=e,this.transform=t}}class Rw{constructor(e,t){this.version=e,this.transformResults=t}}class rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class hm{}function Nw(n,e,t){n instanceof jd?function(r,o,u){const d=r.value.clone(),m=kw(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Xl?function(r,o,u){if(!kf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=kw(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(Pw(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ov(n,e,t){var o;n instanceof jd?function(r,o,u){if(!kf(r.precondition,o))return;const d=r.value.clone(),m=fm(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(uv(o),d).setHasLocalMutations()}(n,e,t):n instanceof Xl?function(r,o,u){if(!kf(r.precondition,o))return;const d=fm(r.fieldTransforms,u,o),m=o.data;m.setAll(Pw(r)),m.setAll(d),o.convertToFoundDocument(uv(o),m).setHasLocalMutations()}(n,e,t):kf(n.precondition,o=e)&&o.convertToNoDocument(dt.min())}function av(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Ud(r.transform,o||null);null!=u&&(null==t&&(t=qr.empty()),t.set(r.field,u))}return t||null}function Ow(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Nd(t,r,(o,u)=>function Ob(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Yl&&r instanceof Yl||t instanceof Ql&&r instanceof Ql?Nd(t.elements,r.elements,Go):t instanceof Jl&&r instanceof Jl?Go(t.k,r.k):t instanceof Bd&&r instanceof Bd);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function uv(n){return n.isFoundDocument()?n.version:dt.min()}class jd extends hm{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Xl extends hm{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function Pw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kw(n,e,t){const r=new Map;gt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,Tw(d,m,t[o]))}return r}function fm(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,Nb(u,d,e))}return r}class Ff extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class pm extends hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Pb{constructor(e){this.count=e}}var ir,$t;function Fw(n){switch(n){default:return tt();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function Lw(n){if(void 0===n)return qn("GRPC error has no .code"),le.UNKNOWN;switch(n){case ir.OK:return le.OK;case ir.CANCELLED:return le.CANCELLED;case ir.UNKNOWN:return le.UNKNOWN;case ir.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case ir.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case ir.INTERNAL:return le.INTERNAL;case ir.UNAVAILABLE:return le.UNAVAILABLE;case ir.UNAUTHENTICATED:return le.UNAUTHENTICATED;case ir.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case ir.NOT_FOUND:return le.NOT_FOUND;case ir.ALREADY_EXISTS:return le.ALREADY_EXISTS;case ir.PERMISSION_DENIED:return le.PERMISSION_DENIED;case ir.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case ir.ABORTED:return le.ABORTED;case ir.OUT_OF_RANGE:return le.OUT_OF_RANGE;case ir.UNIMPLEMENTED:return le.UNIMPLEMENTED;case ir.DATA_LOSS:return le.DATA_LOSS;default:return tt()}}($t=ir||(ir={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";class Lu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Nu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return uw(this.inner)}size(){return this.innerSize}}const kb=new Ln(He.comparator);function Us(){return kb}const Vw=new Ln(He.comparator);function gm(...n){let e=Vw;for(const t of n)e=e.insert(t.key,t);return e}function Lf(){return new Lu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Fb=new Ln(He.comparator),Uw=new mn(He.comparator);function en(...n){let e=Uw;for(const t of n)e=e.add(t);return e}const Lb=new mn(Ct);function mm(){return Lb}class ec{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,t)),new ec(dt.min(),r,mm(),Us(),en())}}class tc{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new tc(nr.EMPTY_BYTE_STRING,t,en(),en(),en())}}class Vf{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class ym{constructor(e,t){this.targetId=e,this.$=t}}class Bw{constructor(e,t,r=nr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class jw{constructor(){this.B=0,this.L=cv(),this.U=nr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=en(),t=en(),r=en();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new tc(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=cv()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class lv{constructor(e){this.nt=e,this.st=new Map,this.it=Us(),this.rt=$w(),this.ot=new mn(Ct)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(K_(u))if(0===r){const d=new He(u.path);this.ct(t,d,gn.newNoDocument(d,dt.min()))}else gt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&K_(m.target)){const w=new He(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,gn.newNoDocument(w,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=en();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new ec(e,t,this.ot,this.it,r);return this.it=Us(),this.rt=$w(),this.ot=new mn(Ct),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new jw,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new mn(Ct),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new jw),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function $w(){return new Ln(He.comparator)}function cv(){return new Ln(He.comparator)}const Vb={asc:"ASCENDING",desc:"DESCENDING"},Hw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ub{constructor(e,t){this.databaseId=e,this.N=t}}function $d(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bb(n,e){return n.N?e.toBase64():e.toUint8Array()}function jb(n,e){return $d(n,e.toTimestamp())}function zn(n){return gt(!!n),dt.fromTimestamp(function(e){const t=$a(e);return new Mn(t.seconds,t.nanos)}(n))}function dv(n,e){return(t=n,new Bt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function nc(n){const e=Bt.fromString(n);return gt(ic(e)),e}function Ga(n,e){return dv(n.databaseId,e.path)}function Qo(n,e){const t=nc(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(qw(t))}function Gw(n,e){return dv(n.databaseId,e)}function hv(n){const e=nc(n);return 4===e.length?Bt.emptyPath():qw(e)}function Uf(n){return new Bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qw(n){return gt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function zw(n,e,t){return{name:Ga(n,e),fields:t.value.mapValue.fields}}function Ww(n,e,t){const r=Qo(n,e.name),o=zn(e.updateTime),u=new qr({mapValue:{fields:e.fields}}),d=gn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function rc(n,e){let t;if(e instanceof jd)t={update:zw(n,e.key,e.value)};else if(e instanceof Ff)t={delete:Ga(n,e.key)};else if(e instanceof Xl)t={update:zw(n,e.key,e.data),updateMask:Jw(e.fieldMask)};else{if(!(e instanceof pm))return tt();t={verify:Ga(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Bd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Yl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ql)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Jl)return{fieldPath:u.field.canonicalString(),increment:d.k};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:jb(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function Hd(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?rr.updateTime(zn(o.updateTime)):void 0!==o.exists?rr.exists(o.exists):rr.none():rr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(gt("REQUEST_TIME"===d.setToServerValue),m=new Bd):"appendMissingElements"in d?m=new Yl(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Ql(d.removeAllFromArray.values||[]):"increment"in d?m=new Jl(u,d.increment):tt();const w=yr.fromServerFormat(d.fieldPath);return new Yo(w,m)}(n,o)):[];var o;if(e.update){const o=Qo(n,e.update.name),u=new qr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new ql((e.updateMask.fieldPaths||[]).map(C=>yr.fromServerFormat(C)));return new Xl(o,u,d,t,r)}return new jd(o,u,t,r)}if(e.delete){const o=Qo(n,e.delete);return new Ff(o,t)}if(e.verify){const o=Qo(n,e.verify);return new pm(o,t)}return tt()}function Yw(n,e){return{documents:[Gw(n,e.path)]}}function fv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Gw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Gw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(x=>function(N){if("=="===N.op){if(pw(N.value))return{unaryFilter:{field:jf(N.field),op:"IS_NAN"}};if(fw(N.value))return{unaryFilter:{field:jf(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(pw(N.value))return{unaryFilter:{field:jf(N.field),op:"IS_NOT_NAN"}};if(fw(N.value))return{unaryFilter:{field:jf(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jf(N.field),op:Hb(N.op),value:N.value}}}(x));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:jf((x=C).field),direction:gv(x.dir)};var x})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.N||bf(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function pv(n){let e=hv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){gt(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=Qw(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new Vd(Gd((N=x).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(x){let N;return N="object"==typeof x?x.value:x,bf(N)?null:N}(t.limit));let w=null;var x;t.startAt&&(w=new Fu((x=t.startAt).values||[],!!x.before));let C=null;return t.endAt&&(C=function(x){return new Fu(x.values||[],!x.before)}(t.endAt)),Cw(e,o,d,u,m,"F",w,C)}function Qw(n){return n?void 0!==n.unaryFilter?[qd(n)]:void 0!==n.fieldFilter?[Gb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Qw(e)).reduce((e,t)=>e.concat(t)):tt():[]}function gv(n){return Vb[n]}function Hb(n){return Hw[n]}function jf(n){return{fieldPath:n.canonicalString()}}function Gd(n){return yr.fromServerFormat(n.fieldPath)}function Gb(n){return xr.create(Gd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function qd(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Gd(n.unaryFilter.field);return xr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Gd(n.unaryFilter.field);return xr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Gd(n.unaryFilter.field);return xr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gd(n.unaryFilter.field);return xr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function Jw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ic(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ji(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=eI(e)),e=Xw(n.get(t),e);return eI(e)}function Xw(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function eI(n){return n+"\x01\x01"}function qa(n){const e=n.length;if(gt(e>=2),2===e)return gt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Bt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&tt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:tt()}u=d+2}return new Bt(r)}const mv=["userId","batchId"];function yv(n,e){return[n,ji(e)]}function _v(n,e,t){return[n,ji(e),t]}const vv={},qb=["prefixPath","collectionGroup","readTime","documentId"],tI=["prefixPath","collectionGroup","documentId"],zb=["collectionGroup","readTime","prefixPath","documentId"],Wb=["canonicalId","targetId"],Zb=["targetId","path"],Kb=["path","targetId"],Yb=["collectionId","parent"],Qb=["indexId","uid"],Jb=["uid","sequenceNumber"],Xb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$f=["indexId","uid","orderedDocumentKey"],nI=["userId","collectionPath","documentId"],rI=["userId","collectionPath","largestBatchId"],iI=["userId","collectionGroup","largestBatchId"],Ev=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sI=[...Ev,"documentOverlays"],oI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eC=[...oI,"indexConfiguration","indexState","indexEntries"],aI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(o=>o?de.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class _m{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new mr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Gf(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=oc(r.target.error);this.At.reject(new Gf(e,o))}}static open(e,t,r,o){try{return new _m(t,e.transaction(o,r))}catch(u){throw new Gf(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Jo(t)}}class po{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===po.Vt((0,Oe.z$)())&&qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),sc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Oe.hl)())return!1;if(po.St())return!0;const e=(0,Oe.z$)(),t=po.Vt(e),r=0<t&&t<10,o=po.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,G.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Gf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Me(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Me(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Gf(e,m))},u.onupgradeneeded=d=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,G.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=_m.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(x=>(w.bt(),x)).catch(x=>(w.abort(x),de.reject(x))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(ke("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),u.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Hf{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return sc(this.Ft.delete())}}class Gf extends Me{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function za(n){return"IndexedDbTransactionError"===n.name}class Jo{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),sc(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),sc(this.store.add(e))}get(e){return sc(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),sc(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),sc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new de((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new de((r,o)=>{t.onerror=u=>{const d=oc(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new de((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new Hf(m),C=t(m.primaryKey,m.value,w);if(C instanceof de){const x=C.catch(N=>(w.done(),de.reject(N)));r.push(x)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function sc(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=oc(r.target.error);t(o)}})}let vm=!1;function oc(n){const e=po.Vt((0,Oe.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vm||(vm=!0,setTimeout(()=>{throw r},0)),r}}return n}class lI extends uI{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Rr(n,e){const t=We(n);return po.xt(t.Ht,e)}class wv{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Nw(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ov(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ov(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(dt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),en())}isEqual(e){return this.batchId===e.batchId&&Nd(this.mutations,e.mutations,(t,r)=>Ow(t,r))&&Nd(this.baseMutations,e.baseMutations,(t,r)=>Ow(t,r))}}class zd{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){gt(e.mutations.length===r.length);let o=Fb;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new zd(e,t,r,o)}}class Wd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Vu{constructor(e,t,r,o,u=dt.min(),d=dt.min(),m=nr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Vu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class cI{constructor(e){this.Jt=e}}function Iv(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Zd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ga(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:$d(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Uu(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:Uu(e.version)}}var o,u;return r}function Zd(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Uu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ac(n){const e=new Mn(n.seconds,n.nanoseconds);return dt.fromTimestamp(e)}function Kd(n,e){const t=(e.baseMutations||[]).map(u=>Hd(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Hd(n.Jt,u)),o=Mn.fromMillis(e.localWriteTimeMs);return new wv(e.batchId,o,t,r)}function Em(n){const e=ac(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ac(n.lastLimboFreeSnapshotVersion):dt.min();let r;var o;return void 0!==n.query.documents?(gt(1===(o=n.query).documents.length),r=as(Ko(hv(o.documents[0])))):r=as(pv(n.query)),new Vu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,nr.fromBase64String(n.resumeToken))}function wm(n,e){const t=Uu(e.snapshotVersion),r=Uu(e.lastLimboFreeSnapshotVersion);let o;o=K_(e.target)?Yw(n.Jt,e.target):fv(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wo(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function qf(n){const e=pv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?tv(e,e.limit,"L"):e}function Im(n,e){return new Wd(e.largestBatchId,Hd(n.Jt,e.overlayMutation))}function Dm(n,e){const t=e.path.lastSegment();return[n,ji(e.path.popLast()),t]}class Dv{getBundleMetadata(e,t){return hI(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:ac(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return hI(e).put({bundleId:(r=t).id,createTime:Uu(zn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return fI(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:qf(o.bundledQuery),readTime:ac(o.readTime)};var o})}saveNamedQuery(e,t){return fI(e).put({name:(r=t).name,readTime:Uu(zn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function hI(n){return Rr(n,"bundles")}function fI(n){return Rr(n,"namedQueries")}class bv{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new bv(e,t.uid||"")}getOverlay(e,t){return zf(e).get(Dm(this.userId,t)).next(r=>r?Im(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new Wd(t,d);o.push(this.Xt(e,m))}),de.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(ji(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(zf(e).Qt("collectionPathOverlayIndex",m))}),de.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Lf(),u=ji(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return zf(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=Im(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Lf();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zf(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,x)=>{const N=Im(this.M,C);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):x.done()}).next(()=>u)}Xt(e,t){return zf(e).put(function(r,o,u){const[d,m,w]=Dm(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:rc(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function zf(n){return Rr(n,"documentOverlays")}class Bu{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(xn(e.integerValue));else if("doubleValue"in e){const r=xn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Cf(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ou(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?$_(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),He.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Cv(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Tv(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=Cv(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Bu.fe=new Bu;class tC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=Tv(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=Tv(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class pI{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class gI{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Wf{constructor(){this.De=new tC,this.Ce=new pI(this.De),this.xe=new gI(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ju{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ju(this.indexId,this.documentKey,this.arrayValue,r)}}function $u(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=mI(n.arrayValue,e.arrayValue),0!==t?t:(t=mI(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function mI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class yI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Ha(e);if(void 0!==t&&!this.Be(t))return!1;const r=Zl(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class nC{constructor(){this.qe=new zr}addToCollectionParentIndex(e,t){return this.qe.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(zo.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class zr{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new mn(Bt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new mn(Bt.comparator)).toArray()}}const Wa=new Uint8Array(0);class rC{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new zr,this.Ge=new Lu(r=>Wo(r),(r,o)=>yn(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:ji(o)};return _I(e).put(u)}return de.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[ow(t),""],!1,!0);return _I(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(qa(d.parent))}return r})}addFieldIndex(e,t){const r=Hu(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Hu(e),o=Cm(e),u=bm(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=bm(e);let o=!0;const u=new Map;return de.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=en();const m=[];return de.forEach(u,(w,C)=>{var x;ke("IndexedDbIndexManager",`Using index ${x=w,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(jt=>`${jt.fieldPath}:${jt.kind}`).join(",")}`} to execute ${Wo(t)}`);const N=function(jt,At){const Vt=Ha(At);if(void 0===Vt)return null;for(const rn of xf(jt,Vt.fieldPath))switch(rn.op){case"array-contains-any":return rn.value.arrayValue.values||[];case"array-contains":return[rn.value]}return null}(C,w),z=function(jt,At){const Vt=new Map;for(const rn of Zl(At))for(const Wi of xf(jt,rn.fieldPath))switch(Wi.op){case"==":case"in":Vt.set(rn.fieldPath.canonicalString(),Wi.value);break;case"not-in":case"!=":return Vt.set(rn.fieldPath.canonicalString(),Wi.value),Array.from(Vt.values())}return null}(C,w),te=function(jt,At){const Vt=[];let rn=!0;for(const Wi of Zl(At)){const A0=0===Wi.kind?vw(jt,Wi.fieldPath,jt.startAt):Ew(jt,Wi.fieldPath,jt.startAt);Vt.push(A0.value),rn&&(rn=A0.inclusive)}return new Fu(Vt,rn)}(C,w),ge=function(jt,At){const Vt=[];let rn=!0;for(const Wi of Zl(At)){const A0=0===Wi.kind?Ew(jt,Wi.fieldPath,jt.endAt):vw(jt,Wi.fieldPath,jt.endAt);Vt.push(A0.value),rn&&(rn=A0.inclusive)}return new Fu(Vt,rn)}(C,w),Fe=this.We(w,C,te),nt=this.We(w,C,ge),Ft=this.ze(w,C,z),Lt=this.He(w.indexId,N,Fe,te.inclusive,nt,ge.inclusive,Ft);return de.forEach(Lt,jt=>r.Gt(jt,t.limit).next(At=>{At.forEach(Vt=>{const rn=He.fromSegments(Vt.documentKey);d.has(rn)||(d=d.add(rn),m.push(rn))})}))}).next(()=>m)}return de.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),x=[];for(let N=0;N<w;++N){const z=t?this.Je(t[N/C]):Wa,te=this.Ye(e,z,r[N%C],o),ge=this.Xe(e,z,u[N%C],d),Fe=m.map(nt=>this.Ye(e,z,nt,!0));x.push(...this.createRange(te,ge,Fe))}return x}Ye(e,t,r,o){const u=new ju(e,He.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new ju(e,He.empty(),t,r);return o?u.ke():u}je(e,t){const r=new yI(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.$e(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return de.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new mn(yr.comparator),w=!1;for(const C of d.filters){const x=C;x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?w=!0:m=m.add(x.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Wf;for(const o of Zl(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);Bu.fe.Zt(u,d)}return r.Se()}Je(e){const t=new Wf;return Bu.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Wf;return Bu.fe.Zt(Wl(this.databaseId,t),r.Ne(function(o){const u=Zl(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new Wf);let u=0;for(const d of Zl(e)){const m=r[u++];for(const w of o)if(this.en(t,d.fieldPath)&&Af(m))o=this.nn(o,d,m);else{const C=w.Ne(d.kind);Bu.fe.Zt(m,C)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new Wf;w.seed(m.Se()),Bu.fe.Zt(d,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof xr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Hu(e),o=Cm(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return de.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,x){const N=x?new qo(x.sequenceNumber,new zo(ac(x.readTime),new He(qa(x.documentKey)),x.largestBatchId)):qo.empty(),z=C.fields.map(([te,ge])=>new am(yr.fromServerFormat(te),ge));return new Mf(C.indexId,C.collectionGroup,z,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Ct(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Hu(e),u=Cm(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>de.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Uu((z=r).readTime),documentKey:ji(z.documentKey.path),largestBatchId:z.largestBatchId});var z})))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?de.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),de.forEach(m,w=>this.on(e,o,w).next(C=>{const x=this.un(u,w);return C.isEqual(x)?de.resolve():this.an(e,u,w,C,x)}))))})}cn(e,t,r,o){return bm(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return bm(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=bm(e);let u=new mn($u);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new ju(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new mn($u);const o=this.Ze(t,e);if(null==o)return r;const u=Ha(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Af(d))for(const m of d.arrayValue.values||[])r=r.add(new ju(t.indexId,e.key,this.Je(m),o))}else r=r.add(new ju(t.indexId,e.key,Wa,o));return r}an(e,t,r,o,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,x,N){const z=m.getIterator(),te=w.getIterator();let ge=Ld(z),Fe=Ld(te);for(;ge||Fe;){let nt=!1,Ft=!1;if(ge&&Fe){const Lt=C(ge,Fe);Lt<0?Ft=!0:Lt>0&&(nt=!0)}else null!=ge?Ft=!0:nt=!0;nt?(x(Fe),Fe=Ld(te)):Ft?(N(ge),ge=Ld(z)):(ge=Ld(z),Fe=Ld(te))}}(o,u,$u,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),de.waitFor(d)}rn(e){let t=1;return Cm(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>$u(d,m)).filter((d,m,w)=>!m||0!==$u(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=$u(d,e),w=$u(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Wa,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Wa,[]]));return u}getMinOffset(e,t){let r;return de.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||W_(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=zo.min()})).next(()=>r)}}function _I(n){return Rr(n,"collectionParents")}function bm(n){return Rr(n,"indexEntries")}function Hu(n){return Rr(n,"indexConfiguration")}function Cm(n){return Rr(n,"indexState")}const Tm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $i{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new $i(e,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Av(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(x,N,z)=>(m++,z.delete()));u.push(w.next(()=>{gt(1===m)}));const C=[];for(const x of t.mutations){const N=_v(e,x.key.path,t.batchId);u.push(o.delete(N)),C.push(x.key)}return de.waitFor(u).next(()=>C)}function Am(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}$i.DEFAULT_COLLECTION_PERCENTILE=10,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$i.DEFAULT=new $i(41943040,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$i.DISABLED=new $i(-1,0,0);class Sv{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){gt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Sv(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Za(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=uc(e),d=Za(e);return d.add({}).next(m=>{gt("number"==typeof m);const w=new wv(m,t,r,o),C=function(z,te,ge){const Fe=ge.baseMutations.map(Ft=>rc(z.Jt,Ft)),nt=ge.mutations.map(Ft=>rc(z.Jt,Ft));return{userId:te,batchId:ge.batchId,localWriteTimeMs:ge.localWriteTime.toMillis(),baseMutations:Fe,mutations:nt}}(this.M,this.userId,w),x=[];let N=new mn((z,te)=>Ct(z.canonicalString(),te.canonicalString()));for(const z of o){const te=_v(this.userId,z.key.path,m);N=N.add(z.key.path.popLast()),x.push(d.put(C)),x.push(u.put(te,vv))}return N.forEach(z=>{x.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),de.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return Za(e).get(t).next(r=>r?(gt(r.userId===this.userId),Kd(this.M,r)):null)}fn(e,t){return this.ln[t]?de.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Za(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(gt(m.batchId>=r),u=Kd(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Za(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Za(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Kd(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=yv(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return uc(e).Wt({range:o},(d,m,w)=>{const[C,x,N]=d,z=qa(x);if(C===this.userId&&t.path.isEqual(z))return Za(e).get(N).next(te=>{if(!te)throw tt();gt(te.userId===this.userId),u.push(Kd(this.M,te))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Ct);const o=[];return t.forEach(u=>{const d=yv(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=uc(e).Wt({range:m},(C,x,N)=>{const[z,te,ge]=C,Fe=qa(te);z===this.userId&&u.path.isEqual(Fe)?r=r.add(ge):N.done()});o.push(w)}),de.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=yv(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new mn(Ct);return uc(e).Wt({range:d},(w,C,x)=>{const[N,z,te]=w,ge=qa(z);N===this.userId&&r.isPrefixOf(ge)?ge.length===o&&(m=m.add(te)):x.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Za(e).get(u).next(d=>{if(null===d)throw tt();gt(d.userId===this.userId),r.push(Kd(this.M,d))}))}),de.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Av(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),de.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return uc(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=qa(u[1]);o.push(w)}else m.done()}).next(()=>{gt(0===o.length)})})}containsKey(e,t){return Sm(e,this.userId,t)}wn(e){return Zf(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Sm(n,e,t){const r=yv(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return uc(n).Wt({range:u,jt:!0},(m,w,C)=>{const[x,N,z]=m;x===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function Za(n){return Rr(n,"mutations")}function uc(n){return Rr(n,"documentMutations")}function Zf(n){return Rr(n,"mutationQueues")}class Ka{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Ka(0)}static yn(){return new Ka(-1)}}class jT{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Ka(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>dt.fromTimestamp(new Mn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>lc(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(gt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return lc(e).Wt((d,m)=>{const w=Em(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>de.waitFor(u)).next(()=>o)}forEachTarget(e,t){return lc(e).Wt((r,o)=>{const u=Em(o);t(u)})}pn(e){return vI(e).get("targetGlobalKey").next(t=>(gt(null!==t),t))}In(e,t){return vI(e).put("targetGlobalKey",t)}Tn(e,t){return lc(e).put(wm(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Wo(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return lc(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=Em(m);yn(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Ya(e);return t.forEach(d=>{const m=ji(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),de.waitFor(o)}removeMatchingKeys(e,t,r){const o=Ya(e);return de.forEach(t,u=>{const d=ji(u.path);return de.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ya(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ya(e);let u=en();return o.Wt({range:r,jt:!0},(d,m,w)=>{const C=qa(d[1]),x=new He(C);u=u.add(x)}).next(()=>u)}containsKey(e,t){const r=ji(t.path),o=IDBKeyRange.bound([r],[ow(r)],!1,!0);let u=0;return Ya(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return lc(e).get(t).next(r=>r?Em(r):null)}}function lc(n){return Rr(n,"targets")}function vI(n){return Rr(n,"targetGlobal")}function Ya(n){return Rr(n,"targetDocuments")}function Xo(n){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,G.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==aI)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),Mm.apply(this,arguments)}function EI([n,e],[t,r]){const o=Ct(n,t);return 0===o?Ct(e,r):o}class Mv{constructor(e){this.An=e,this.buffer=new mn(EI),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();EI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xv{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;ke("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,G.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){za(o)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Xo(o)}yield t.Sn(e)}))}}class $T{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(Bi.A);const r=new Mv(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Tm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tm):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,w,C;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),tm()<=Xt.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-x}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class iC{constructor(e,t){this.db=e,this.garbageCollector=new $T(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return xm(e,r)}removeReference(e,t,r){return xm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return xm(e,t)}On(e,t){return function(r,o){let u=!1;return Zf(r).zt(d=>Sm(r,d,o).next(m=>(m&&(u=!0),de.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,dt.min()),Ya(e).delete([0,ji(d.path)])))});o.push(w)}}).next(()=>de.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return xm(e,t)}Mn(e,t){const r=Ya(e);let o,u=Bi.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(u!==Bi.A&&t(new He(qa(o)),u),u=C,o=w):u=Bi.A}).next(()=>{u!==Bi.A&&t(new He(qa(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xm(n,e){return Ya(n).put((r=n.currentSequenceNumber,{targetId:0,path:ji(e.path),sequenceNumber:r}));var r}class Rv{constructor(){this.changes=new Lu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wI{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Gu(e).put(r)}removeEntry(e,t,r){return Gu(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Zd(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=gn.newInvalidDocument(t);return Gu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Kf(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:gn.newInvalidDocument(t)};return Gu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Kf(t))},(o,u)=>{r={document:this.$n(t,u),size:Am(u)}}).next(()=>r)}getEntries(e,t){let r=Us();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=Us(),o=new Ln(He.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,Am(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return de.resolve();let o=new mn(Ov);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(Kf(o.first()),Kf(o.last())),d=o.getIterator();let m=d.getNext();return Gu(e).Wt({index:"documentKeyIndex",range:u},(w,C,x)=>{const N=He.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Ov(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?x.Ut(Kf(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Zd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gu(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=Us();for(const w of d){const C=this.$n(He.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Us();const d=II(t,r),m=II(t,zo.max());return Gu(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,x)=>{const N=this.$n(He.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&x.done()}).next(()=>u)}newChangeBuffer(e){return new sC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Nv(e).get("remoteDocumentGlobalKey").next(t=>(gt(!!t),t))}Fn(e,t){return Nv(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function dI(n,e){let t;if(e.document)t=Ww(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),o=ac(e.noDocument.readTime);t=gn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=He.fromSegments(e.unknownDocument.path),o=ac(e.unknownDocument.version);t=gn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Mn(r[0],r[1]);return dt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(dt.min()))return r}return gn.newInvalidDocument(e)}}class sC extends Rv{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Lu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new mn((u,d)=>Ct(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=Iv(this.Kn.M,d);o=o.add(u.path.popLast()),r+=Am(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=Iv(this.Kn.M,d.convertToNoDocument(dt.min()));t.push(this.Kn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Nv(n){return Rr(n,"remoteDocumentGlobal")}function Gu(n){return Rr(n,"remoteDocumentsV14")}function Kf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function II(n,e){const t=e.documentKey.path.toArray();return[n,Zd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ov(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ct(t[u],r[u]),o)return o;return o=Ct(t.length,r.length),o||(o=Ct(t[t.length-2],r[r.length-2]),o||Ct(t[t.length-1],r[r.length-1]))}class oC{constructor(e){this.M=e}kt(e,t,r,o){const u=new _m("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mv,{unique:!0}),m.createObjectStore("documentMutations"),Pv(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=de.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Pv(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mv,{unique:!0});const x=w.store("mutations"),N=C.map(z=>x.put(z));return de.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:nI});w.createIndex("collectionPathOverlayIndex",rI,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",iI,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:qb});w.createIndex("documentKeyIndex",tI),w.createIndex("collectionGroupIndex",zb)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:Qb}).createIndex("sequenceNumberIndex",Jb,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Xb}).createIndex("documentKeyIndex",$f,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Am(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>de.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>de.forEach(m,w=>{gt(w.userId===u.userId);const C=Kd(this.M,w);return Av(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const w=new Bt(d),C=[0,ji(w)];u.push(t.get(C).next(x=>x?de.resolve():t.put({targetId:0,path:ji(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>de.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Yb});const r=t.store("collectionParents"),o=new zr,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:ji(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new Bt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],C)=>{const x=qa(m);return u(x.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Em(o),d=wm(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new He(Bt.fromString(C.document.name).popFirst(5)):C.noDocument?He.fromSegments(C.noDocument.path):C.unknownDocument?He.fromSegments(C.unknownDocument.path):tt()).path.toArray();var C;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(x))}).next(()=>de.waitFor(o))}}function Pv(n){n.createObjectStore("targetDocuments",{keyPath:Zb}).createIndex("documentTargetsIndex",Kb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Wb,{unique:!0}),n.createObjectStore("targetGlobal")}const Rm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Nm{constructor(e,t,r,o,u,d,m,w,C,x,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=C,this.Zn=x,this.ts=N,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=z=>Promise.resolve(),!Nm.vt())throw new Me(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iC(this,o),this.hs=t+"main",this.M=new cI(w),this.ls=new po(this.hs,this.ts,new oC(this.M)),this.fs=new jT(this.referenceDelegate,this.M),this.ds=new wI(this.M),this._s=new Dv,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&qn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(le.FAILED_PRECONDITION,Rm);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Bi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,G.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,G.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,G.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Om(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(za(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Yd(e).get("owner").next(t=>de.resolve(this.Ps(t)))}Vs(e){return Om(e).delete(this.clientId)}vs(){var e=this;return(0,G.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Rr(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return de.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?de.resolve(!0):Yd(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Me(le.FAILED_PRECONDITION,Rm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Om(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,G.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new lI(t,Bi.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Om(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Sv.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new rC(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return bv.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?eC:13===d?oI:12===d?sI:11===d?Ev:void tt();var d;let m;return this.ls.runTransaction(e,o,u,w=>(m=new lI(w,this.es?this.es.next():Bi.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Me(le.FAILED_PRECONDITION,aI);return r(m)}).next(C=>this.bs(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return Yd(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(le.FAILED_PRECONDITION,Rm)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yd(e).put("owner",t)}static vt(){return po.vt()}Rs(e){const t=Yd(e);return t.get("owner").next(r=>this.Ps(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(qn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Oe.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){qn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yd(n){return Rr(n,"owner")}function Om(n){return Rr(n,"clientMetadata")}function kv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class HT{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return He.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):ev(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new He(t)).next(r=>{let o=gm();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=gm();return this.indexManager.getCollectionParents(e,o).next(d=>de.forEach(d,m=>{const w=(C=t,x=m.child(o),new Zo(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,x;return this.zs(e,w,r).next(C=>{C.forEach((x,N)=>{u=u.insert(x,N)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const w=m.key;let C=o.get(w);null==C&&(C=gn.newInvalidDocument(w),o=o.insert(w,C)),ov(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,d)=>{iv(t,d)||(o=o.remove(u))}),o))}}class Pm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=en(),o=en();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Pm(e,t.fromCache,r,o)}}class aC{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return de.resolve(null)}ei(e,t,r,o){return function Nf(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(dt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,o)?this.ni(e,t):(tm()<=Xt.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),rv(t)),this.ri(e,d,t,Cb(o,-1)))})}si(e,t){let r=new mn(xb(e));return t.forEach((o,u)=>{iv(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return tm()<=Xt.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",rv(t)),this.Zs.Qs(e,t,zo.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class GT{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new Ln(Ct),this.ai=new Lu(u=>Wo(u),yn),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new HT(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function uC(n,e,t,r){return new GT(n,e,t,r)}function lC(n,e){return DI.apply(this,arguments)}function DI(){return DI=(0,G.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=en();for(const C of o){d.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}for(const C of u){m.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}return t.fi.Ks(r,w).next(C=>({di:C,removedBatchIds:d,addedBatchIds:m}))})})}),DI.apply(this,arguments)}function qT(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const x=w.batch,N=x.keys();let z=de.resolve();return N.forEach(te=>{z=z.next(()=>C.getEntry(m,te)).next(ge=>{const Fe=w.docVersions.get(te);gt(null!==Fe),ge.version.compareTo(Fe)<0&&(x.applyToRemoteDocument(ge,w),ge.isValidDocument()&&(ge.setReadTime(w.commitVersion),C.addEntry(ge)))})}),z.next(()=>d.Bs.removeMutationBatch(m,x))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function cC(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function zT(n,e){const t=We(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const m=[];e.targetChanges.forEach((C,x)=>{const N=o.get(x);if(!N)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,x).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,x)));let z=N.withSequenceNumber(u.currentSequenceNumber);var te,ge,Fe;e.targetMismatches.has(x)?z=z.withResumeToken(nr.EMPTY_BYTE_STRING,dt.min()).withLastLimboFreeSnapshotVersion(dt.min()):C.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(C.resumeToken,r)),o=o.insert(x,z),ge=z,Fe=C,(0===(te=N).resumeToken.approximateByteSize()||ge.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,z))});let w=Us();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(Yf(u,d,e.documentUpdates).next(C=>{w=C})),!r.isEqual(dt.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(x=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return de.waitFor(m).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,w)).next(()=>w)}).then(u=>(t.ui=o,u))}function Yf(n,e,t){let r=en();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Us();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(dt.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):ke("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),u})}function WT(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function cc(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,de.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new Vu(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function qu(n,e,t){return km.apply(this,arguments)}function km(){return km=(0,G.Z)(function*(n,e,t){const r=We(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!za(d))throw d;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),km.apply(this,arguments)}function Qf(n,e,t){const r=We(n);let o=dt.min(),u=en();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const x=We(m),N=x.ai.get(C);return void 0!==N?de.resolve(x.ui.get(N)):x.fs.getTargetData(w,C)}(r,d,as(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.oi.Qs(d,e,t?o:dt.min(),t?u:en())).next(m=>(Fv(r,Mb(e),m),{documents:m,_i:u})))}function dC(n,e){const t=We(n),r=We(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function Fm(n,e){const t=We(n),r=t.ci.get(e)||dt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,Cb(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Fv(t,e,o),o))}function Fv(n,e,t){let r=dt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function Lm(){return Lm=(0,G.Z)(function*(n,e,t,r){const o=We(n);let u=en(),d=Us();for(const C of t){const x=e.wi(C.metadata.name);C.document&&(u=u.add(x));const N=e.mi(C);N.setReadTime(e.gi(C.metadata.readTime)),d=d.insert(x,N)}const m=o.hi.newChangeBuffer({trackRemovals:!0}),w=yield cc(o,(C=r,as(Ko(Bt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>Yf(C,m,d).next(x=>(m.apply(C),x)).next(x=>o.fs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.fs.addMatchingKeys(C,u,w.targetId)).next(()=>o.fi.Gs(C,x)).next(()=>x)))}),Lm.apply(this,arguments)}function ZT(n,e){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,G.Z)(function*(n,e,t=en()){const r=yield cc(n,as(qf(e.bundledQuery))),o=We(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=zn(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(nr.EMPTY_BYTE_STRING,d);return o.ui=o.ui.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),Vm.apply(this,arguments)}class hC{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return de.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:zn(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:qf(r.bundledQuery),readTime:zn(r.readTime)}),de.resolve();var r}}class Lv{constructor(){this.overlays=new Ln(He.comparator),this.Ii=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const o=Lf(),u=t.length+1,d=new He(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return de.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Ln((C,x)=>C-x);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let x=u.get(C.largestBatchId);null===x&&(x=Lf(),u=u.insert(C.largestBatchId,x)),x.set(C.getKey(),C)}}const m=Lf(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,x)=>m.set(C,x)),!(m.size()>=o)););return de.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Wd(t,r));let u=this.Ii.get(t);void 0===u&&(u=en(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class Vv{constructor(){this.Ti=new mn(Wr.Ei),this.Ai=new mn(Wr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Wr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Wr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new He(new Bt([])),r=new Wr(t,e),o=new Wr(t,e+1),u=[];return this.Ai.forEachInRange([r,o],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new He(new Bt([])),r=new Wr(t,e),o=new Wr(t,e+1);let u=en();return this.Ai.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Wr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Wr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return He.comparator(e.key,t.key)||Ct(e.Ci,t.Ci)}static Ri(e,t){return Ct(e.Ci,t.Ci)||He.comparator(e.key,t.key)}}class KT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new mn(Wr.Ei)}checkEmpty(e){return de.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const d=new wv(u,t,r,o);this.Bs.push(d);for(const m of o)this.Ni=this.Ni.add(new Wr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return de.resolve(d)}lookupMutationBatch(e,t){return de.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return de.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return de.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wr(t,0),o=new Wr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],d=>{const m=this.ki(d.Ci);u.push(m)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Ct);return t.forEach(o=>{const u=new Wr(o,0),d=new Wr(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],m=>{r=r.add(m.Ci)})}),de.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const d=new Wr(new He(u),0);let m=new mn(Ct);return this.Ni.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.Ci)),!0)},d),de.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){gt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return de.forEach(t.mutations,o=>{const u=new Wr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Wr(t,0),o=this.Ni.firstAfterOrEqual(r);return de.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return de.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class YT{constructor(e){this.$i=e,this.docs=new Ln(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let r=Us();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():gn.newInvalidDocument(o))}),de.resolve(r)}getAllFromCollection(e,t,r){let o=Us();const u=new He(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||W_(z_(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}Bi(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fC(this)}getSize(e){return de.resolve(this.size)}}class fC extends Rv{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class pC{constructor(e){this.persistence=e,this.Li=new Lu(t=>Wo(t),yn),this.lastRemoteSnapshotVersion=dt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Vv,this.targetCount=0,this.Ki=Ka.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),de.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Ka(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Tn(t),de.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),de.waitFor(u).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.qi.containsKey(t))}}class gC{constructor(e,t){this.Gi={},this.overlays={},this.es=new Bi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new pC(this),this.indexManager=new nC,this.ds=new YT(r=>this.referenceDelegate.Qi(r)),this.M=new cI(t),this._s=new hC(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new KT(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const o=new QT(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return de.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class QT extends uI{constructor(e){super(),this.currentSequenceNumber=e}}class Uv{constructor(e){this.persistence=e,this.Hi=new Vv,this.Ji=null}static Yi(e){return new Uv(e)}get Xi(){if(this.Ji)return this.Ji;throw tt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Xi,r=>{const o=He.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,dt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return de.or([()=>de.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Um(n,e){return`firestore_clients_${n}_${e}`}function CI(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function us(n,e){return`firestore_targets_${n}_${e}`}class Bm{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Me(o.error.code,o.error.message))),d?new Bm(e,t,o.state,u):(qn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Me(r.error.code,r.error.message))),u?new dc(e,r.state,o):(qn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=mm();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=dw(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new jm(e,u):(qn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Bv{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Bv(t.clientId,t.onlineState):(qn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Jf{constructor(){this.activeTargetIds=mm()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $m{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Ln(Ct),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=Um(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Jf),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,G.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(Um(e.persistenceKey,o));if(u){const d=jm.tr(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(us(this.persistenceKey,e));if(r){const o=dc.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(us(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,G.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let d=Bi.A;if(null!=u)try{const m=JSON.parse(u);gt("number"==typeof m),d=m}catch(m){qn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Bi.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new Bm(this.currentUser,e,t,r),u=CI(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=CI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=us(this.persistenceKey,e),u=new dc(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return jm.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return Bm.tr(new Mr(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return dc.tr(o,t)}pr(e){return Bv.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,G.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Lr(d,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=mm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class jv{constructor(){this.Ur=new Jf,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Jf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mC{Kr(e){}shutdown(){}}class $v{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const TI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class yC{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class _C extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ho(e,t);ke("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(w=>(ke("RestConnection","Received: ",w),w),w=>{throw Df("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${TI[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new vb;m.listenOnce(XE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case em.NO_ERROR:const C=m.getResponseJson();ke("Connection","XHR received:",JSON.stringify(C)),u(C);break;case em.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),d(new Me(le.DEADLINE_EXCEEDED,"Request time out"));break;case em.HTTP_ERROR:const x=m.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const z=function(te){const ge=te.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(ge)>=0?ge:le.UNKNOWN}(N.status);d(new Me(z,N.message))}else d(new Me(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Me(le.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=QE(),d=JE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new tw({})),this.lo(m.initMessageHeaders,t,r),(0,Oe.uI)()||(0,Oe.b$)()||(0,Oe.d)()||(0,Oe.w1)()||(0,Oe.Mn)()||(0,Oe.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");ke("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let x=!1,N=!1;const z=new yC({Jr:ge=>{N?ke("Connection","Not sending because WebChannel is closed:",ge):(x||(ke("Connection","Opening WebChannel transport."),C.open(),x=!0),ke("Connection","WebChannel sending:",ge),C.send(ge))},Yr:()=>C.close()}),te=(ge,Fe,nt)=>{ge.listen(Fe,Ft=>{try{nt(Ft)}catch(Lt){setTimeout(()=>{throw Lt},0)}})};return te(C,L_.EventType.OPEN,()=>{N||ke("Connection","WebChannel transport opened.")}),te(C,L_.EventType.CLOSE,()=>{N||(N=!0,ke("Connection","WebChannel transport closed"),z.ro())}),te(C,L_.EventType.ERROR,ge=>{N||(N=!0,Df("Connection","WebChannel transport errored:",ge),z.ro(new Me(le.UNAVAILABLE,"The operation could not be completed")))}),te(C,L_.EventType.MESSAGE,ge=>{var Fe;if(!N){const nt=ge.data[0];gt(!!nt);const Ft=nt,Lt=Ft.error||(null===(Fe=Ft[0])||void 0===Fe?void 0:Fe.error);if(Lt){ke("Connection","WebChannel received error:",Lt);const jt=Lt.status;let At=function(rn){const Wi=ir[rn];if(void 0!==Wi)return Lw(Wi)}(jt),Vt=Lt.message;void 0===At&&(At=le.INTERNAL,Vt="Unknown error status: "+jt+" with message "+Lt.message),N=!0,z.ro(new Me(At,Vt)),C.close()}else ke("Connection","WebChannel received:",nt),z.oo(nt)}}),te(d,ew.STAT_EVENT,ge=>{ge.stat===F_.PROXY?ke("Connection","Detected buffering proxy"):ge.stat===F_.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.io()},0),z}}function Hm(){return"undefined"!=typeof window?window:null}function Hi(){return"undefined"!=typeof document?document:null}function Xf(n){return new Ub(n,!0)}class AI{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class SI{constructor(e,t,r,o,u,d,m,w){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new AI(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,G.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,G.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,G.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(qn(t.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new Me(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,G.Z)(function*(){e.state=0,e.start()}))}jo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MI extends SI{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Kw(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:tt(),o=e.targetChange.targetIds||[],u=function(w,C){return w.N?(gt(void 0===C||"string"==typeof C),nr.fromBase64String(C||"")):(gt(void 0===C||C instanceof Uint8Array),nr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?le.UNKNOWN:Lw(w.code);return new Me(C,w.message||"")}(d);t=new Bw(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Qo(n,r.document.name),u=zn(r.document.updateTime),d=new qr({mapValue:{fields:r.document.fields}}),m=gn.newFoundDocument(o,u,d);t=new Vf(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Qo(n,r.document),u=r.readTime?zn(r.readTime):dt.min(),d=gn.newNoDocument(o,u);t=new Vf([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Qo(n,r.document);t=new Vf([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new Pb(r.count||0);t=new ym(r.targetId,u)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return dt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?dt.min():u.readTime?zn(u.readTime):dt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Uf(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=K_(m)?{documents:Yw(o,m)}:{query:fv(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Bb(o,u.resumeToken):u.snapshotVersion.compareTo(dt.min())>0&&(d.readTime=$d(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function $b(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Uf(this.M),t.removeTarget=e,this.Lo(t)}}class vC extends SI{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function Bf(n,e){return n&&n.length>0?(gt(void 0!==e),n.map(t=>function(r,o){let u=zn(r.updateTime?r.updateTime:o);return u.isEqual(dt.min())&&(u=zn(o)),new Rw(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.tu(r,t)}return gt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Uf(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>rc(this.M,r))};this.Lo(t)}}class EC extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new Me(le.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(le.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(le.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class xI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(qn(t),this.uu=!1):ke("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class wC{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,G.Z)(function*(){var w;Qa(d)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,G.Z)(function*(C){const x=We(C);x.wu.add(4),yield hc(x),x.yu.set("Unknown"),x.wu.delete(4),yield Gm(x)}),function(C){return w.apply(this,arguments)})(d))}))}),this.yu=new xI(r,o)}}function Gm(n){return qm.apply(this,arguments)}function qm(){return qm=(0,G.Z)(function*(n){if(Qa(n))for(const e of n.mu)yield e(!0)}),qm.apply(this,arguments)}function hc(n){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,G.Z)(function*(n){for(const e of n.mu)yield e(!1)}),Hv.apply(this,arguments)}function zm(n,e){const t=We(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Gv(t)?Zm(t):sp(t).Mo()&&ep(t,e))}function Qd(n,e){const t=We(n),r=sp(t);t._u.delete(e),r.Mo()&&Wm(t,e),0===t._u.size&&(r.Mo()?r.$o():Qa(t)&&t.yu.set("Unknown"))}function ep(n,e){n.pu.Z(e.targetId),sp(n).Ho(e)}function Wm(n,e){n.pu.Z(e),sp(n).Jo(e)}function Zm(n){n.pu=new lv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),sp(n).start(),n.yu.au()}function Gv(n){return Qa(n)&&!sp(n).ko()&&n._u.size>0}function Qa(n){return 0===We(n).wu.size}function qv(n){n.pu=void 0}function IC(n){return zv.apply(this,arguments)}function zv(){return zv=(0,G.Z)(function*(n){n._u.forEach((e,t)=>{ep(n,e)})}),zv.apply(this,arguments)}function JT(n,e){return RI.apply(this,arguments)}function RI(){return RI=(0,G.Z)(function*(n,e){qv(n),Gv(n)?(n.yu.lu(e),Zm(n)):n.yu.set("Unknown")}),RI.apply(this,arguments)}function NI(n,e,t){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,G.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Bw&&2===e.state&&e.cause)try{yield(r=(0,G.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Km(n,r)}else if(e instanceof Vf?n.pu.ut(e):e instanceof ym?n.pu._t(e):n.pu.ht(e),!t.isEqual(dt.min()))try{const r=yield cC(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.yt(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o._u.get(w);C&&o._u.set(w,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o._u.get(m);if(!w)return;o._u.set(m,w.withResumeToken(nr.EMPTY_BYTE_STRING,w.snapshotVersion)),Wm(o,m);const C=new Vu(w.target,m,1,w.sequenceNumber);ep(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Km(n,r)}var r}),Wv.apply(this,arguments)}function Km(n,e,t){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,G.Z)(function*(n,e,t){if(!za(e))throw e;n.wu.add(1),yield hc(n),n.yu.set("Offline"),t||(t=()=>cC(n.localStore)),n.asyncQueue.enqueueRetryable((0,G.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Gm(n)}))}),Zv.apply(this,arguments)}function DC(n,e){return e().catch(t=>Km(n,t,e))}function tp(n){return OI.apply(this,arguments)}function OI(){return OI=(0,G.Z)(function*(n){const e=We(n),t=fc(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;XT(e);)try{const o=yield WT(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,eA(e,o)}catch(o){yield Km(e,o)}PI(e)&&np(e)}),OI.apply(this,arguments)}function XT(n){return Qa(n)&&n.du.length<10}function eA(n,e){n.du.push(e);const t=fc(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function PI(n){return Qa(n)&&!fc(n).ko()&&n.du.length>0}function np(n){fc(n).start()}function bC(n){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,G.Z)(function*(n){fc(n).nu()}),Kv.apply(this,arguments)}function kI(n){return Ja.apply(this,arguments)}function Ja(){return Ja=(0,G.Z)(function*(n){const e=fc(n);for(const t of n.du)e.Zo(t.mutations)}),Ja.apply(this,arguments)}function FI(n,e,t){return rp.apply(this,arguments)}function rp(){return rp=(0,G.Z)(function*(n,e,t){const r=n.du.shift(),o=zd.from(r,e,t);yield DC(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield tp(n)}),rp.apply(this,arguments)}function Yv(n,e){return Qv.apply(this,arguments)}function Qv(){return Qv=(0,G.Z)(function*(n,e){var t;e&&fc(n).Xo&&(yield(t=(0,G.Z)(function*(r,o){if(Fw(u=o.code)&&u!==le.ABORTED){const d=r.du.shift();fc(r).Fo(),yield DC(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield tp(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),PI(n)&&np(n)}),Qv.apply(this,arguments)}function Ym(n,e){return ip.apply(this,arguments)}function ip(){return ip=(0,G.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Qa(t);t.wu.add(3),yield hc(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Gm(t)}),ip.apply(this,arguments)}function Jd(n,e){return LI.apply(this,arguments)}function LI(){return LI=(0,G.Z)(function*(n,e){const t=We(n);e?(t.wu.delete(2),yield Gm(t)):e||(t.wu.add(2),yield hc(t),t.yu.set("Unknown"))}),LI.apply(this,arguments)}function sp(n){return n.Iu||(n.Iu=function(e,t,r){const o=We(e);return o.iu(),new MI(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:IC.bind(null,n),eo:JT.bind(null,n),zo:NI.bind(null,n)}),n.mu.push(function(){var e=(0,G.Z)(function*(t){t?(n.Iu.Fo(),Gv(n)?Zm(n):n.yu.set("Unknown")):(yield n.Iu.stop(),qv(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function fc(n){return n.Tu||(n.Tu=function(e,t,r){const o=We(e);return o.iu(),new vC(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:bC.bind(null,n),eo:Yv.bind(null,n),eu:kI.bind(null,n),tu:FI.bind(null,n)}),n.mu.push(function(){var e=(0,G.Z)(function*(t){t?(n.Tu.Fo(),yield tp(n)):(yield n.Tu.stop(),n.du.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class VI{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new VI(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pc(n,e){if(qn("AsyncQueue",`${e}: ${n}`),za(n))return new Me(le.UNAVAILABLE,`${e}: ${n}`);throw n}class Xd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=gm(),this.sortedSet=new Ln(this.comparator)}static emptySet(e){return new Xd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class UI{constructor(){this.Eu=new Ln(He.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):tt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class eh{constructor(e,t,r,o,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new eh(e,t,Xd.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class CC{constructor(){this.Ru=void 0,this.listeners=[]}}class BI{constructor(){this.queries=new Lu(e=>nv(e),Of),this.onlineState="Unknown",this.bu=new Set}}function Qm(n,e){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,G.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new CC),o)try{u.Ru=yield t.onListen(r)}catch(d){const m=pc(d,`Initialization of query '${rv(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&$I(t)}),Jm.apply(this,arguments)}function Jv(n,e){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,G.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Xv.apply(this,arguments)}function jI(n,e){const t=We(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Vu(o)&&(r=!0);d.Ru=o}}r&&$I(t)}function e0(n,e,t){const r=We(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function $I(n){n.bu.forEach(e=>{e.next()})}class Xm{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new eh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=eh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class t0{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class HI{constructor(e){this.M=e}wi(e){return Qo(this.M,e)}mi(e){return e.metadata.exists?Ww(this.M,e.document,!1):gn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return zn(e)}}class TC{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=AC(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Bt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new HI(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||en()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,G.Z)(function*(){const t=yield function bI(n,e,t,r){return Lm.apply(this,arguments)}(e.localStore,new HI(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield ZT(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function AC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class SC{constructor(e){this.key=e}}class MC{constructor(e){this.key=e}}class GI{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=en(),this.mutatedKeys=en(),this.Gu=xb(e),this.Qu=new Xd(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new UI,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,N)=>{const z=o.get(x),te=iv(this.query,N)?N:null,ge=!!z&&this.mutatedKeys.has(z.key),Fe=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let nt=!1;z&&te?z.data.isEqual(te.data)?ge!==Fe&&(r.track({type:3,doc:te}),nt=!0):this.Hu(z,te)||(r.track({type:2,doc:te}),nt=!0,(w&&this.Gu(te,w)>0||C&&this.Gu(te,C)<0)&&(m=!0)):!z&&te?(r.track({type:0,doc:te}),nt=!0):z&&!te&&(r.track({type:1,doc:z}),nt=!0,(w||C)&&(m=!0)),nt&&(te?(d=d.add(te),u=Fe?u.add(x):u.delete(x)):(d=d.delete(x),u=u.delete(x)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const x="F"===this.query.limitType?d.last():d.first();d=d.delete(x.key),u=u.delete(x.key),r.track({type:1,doc:x})}return{Qu:d,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((C,x)=>function(N,z){const te=ge=>{switch(ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return te(N)-te(z)}(C.type,x.type)||this.Gu(C.doc,x.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new eh(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new UI,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=en(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new MC(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new SC(r))}),t}ta(e){this.Uu=e._i,this.Ku=en();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return eh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class xC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class tA{constructor(e){this.key=e,this.na=!1}}class nA{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new Lu(m=>nv(m),Of),this.ra=new Map,this.oa=new Set,this.ua=new Ln(He.comparator),this.aa=new Map,this.ca=new Vv,this.ha={},this.la=new Map,this.fa=Ka.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function rA(n,e){return qI.apply(this,arguments)}function qI(){return qI=(0,G.Z)(function*(n,e){const t=OC(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const d=yield cc(t.localStore,as(e));t.isPrimaryClient&&zm(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield zI(t,e,r,"current"===m)}return o}),qI.apply(this,arguments)}function zI(n,e,t,r){return n0.apply(this,arguments)}function n0(){return n0=(0,G.Z)(function*(n,e,t,r){n._a=(x,N,z)=>{return(te=(0,G.Z)(function*(ge,Fe,nt,Ft){let Lt=Fe.view.Wu(nt);Lt.ii&&(Lt=yield Qf(ge.localStore,Fe.query,!1).then(({documents:Vt})=>Fe.view.Wu(Vt,Lt)));const jt=Ft&&Ft.targetChanges.get(Fe.targetId),At=Fe.view.applyChanges(Lt,ge.isPrimaryClient,jt);return Pe(ge,Fe.targetId,At.Xu),At.snapshot}),function(ge,Fe,nt,Ft){return te.apply(this,arguments)})(n,x,N,z);var te};const o=yield Qf(n.localStore,e,!0),u=new GI(e,o._i),d=u.Wu(o.documents),m=tc.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);Pe(n,t,w.Xu);const C=new xC(e,t,u);return n.ia.set(e,C),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),w.snapshot}),n0.apply(this,arguments)}function iA(n,e){return WI.apply(this,arguments)}function WI(){return WI=(0,G.Z)(function*(n,e){const t=We(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!Of(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield qu(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Qd(t.remoteStore,r.targetId),K(t,r.targetId)}).catch(Xo))):(K(t,r.targetId),yield qu(t.localStore,r.targetId,!0))}),WI.apply(this,arguments)}function ZI(){return ZI=(0,G.Z)(function*(n,e,t){const r=PC(n);try{const o=yield function(u,d){const m=We(u),w=Mn.now(),C=d.reduce((N,z)=>N.add(z.key),en());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.fi.Ks(N,C).next(z=>{x=z;const te=[];for(const ge of d){const Fe=av(ge,x.get(ge.key));null!=Fe&&te.push(new Xl(ge.key,Fe,q_(Fe.value.mapValue),rr.exists(!0)))}return m.Bs.addMutationBatch(N,w,te,d)})).then(N=>(N.applyToLocalDocumentSet(x),{batchId:N.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.ha[u.currentUser.toKey()];w||(w=new Ln(Ct)),w=w.insert(d,m),u.ha[u.currentUser.toKey()]=w}(r,o.batchId,t),yield De(r,o.changes),yield tp(r.remoteStore)}catch(o){const u=pc(o,"Failed to persist write");t.reject(u)}}),ZI.apply(this,arguments)}function i(n,e){return s.apply(this,arguments)}function s(){return s=(0,G.Z)(function*(n,e){const t=We(n);try{const r=yield zT(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.aa.get(u);d&&(gt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.na=!0:o.modifiedDocuments.size>0?gt(d.na):o.removedDocuments.size>0&&(gt(d.na),d.na=!1))}),yield De(t,r,e)}catch(r){yield Xo(r)}}),s.apply(this,arguments)}function a(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,d)=>{const m=d.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=We(u);m.onlineState=d;let w=!1;m.queries.forEach((C,x)=>{for(const N of x.listeners)N.Pu(d)&&(w=!0)}),w&&$I(m)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function l(n,e,t){return c.apply(this,arguments)}function c(){return c=(0,G.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let d=new Ln(He.comparator);d=d.insert(u,gn.newNoDocument(u,dt.min()));const m=en().add(u),w=new ec(dt.min(),new Map,new mn(Ct),d,m);yield i(r,w),r.ua=r.ua.remove(u),r.aa.delete(e),Xe(r)}else yield qu(r.localStore,e,!1).then(()=>K(r,e,t)).catch(Xo)}),c.apply(this,arguments)}function f(n,e){return _.apply(this,arguments)}function _(){return _=(0,G.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const o=yield qT(t.localStore,e);V(t,r,null),k(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield De(t,o)}catch(o){yield Xo(o)}}),_.apply(this,arguments)}function E(n,e,t){return I.apply(this,arguments)}function I(){return I=(0,G.Z)(function*(n,e,t){const r=We(n);try{const o=yield function(u,d){const m=We(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.Bs.lookupMutationBatch(w,d).next(x=>(gt(null!==x),C=x.keys(),m.Bs.removeMutationBatch(w,x))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.fi.Ks(w,C))})}(r.localStore,e);V(r,e,t),k(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield De(r,o)}catch(o){yield Xo(o)}}),I.apply(this,arguments)}function S(){return S=(0,G.Z)(function*(n,e){const t=We(n);Qa(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=We(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=pc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),S.apply(this,arguments)}function k(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function V(n,e,t){const r=We(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function K(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||ye(n,r)})}function ye(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Qd(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),Xe(n))}function Pe(n,e,t){for(const r of t)r instanceof SC?(n.ca.addReference(r.key,e),$e(n,r)):r instanceof MC?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||ye(n,r.key)):tt()}function $e(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oa.add(r),Xe(n))}function Xe(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new He(Bt.fromString(e)),r=n.fa.next();n.aa.set(r,new tA(t)),n.ua=n.ua.insert(t,r),zm(n.remoteStore,new Vu(as(Ko(t.path)),r,2,Bi.A))}}function De(n,e,t){return at.apply(this,arguments)}function at(){return at=(0,G.Z)(function*(n,e,t){const r=We(n),o=[],u=[],d=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,w)=>{d.push(r._a(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const x=Pm.Ys(w.targetId,C);u.push(x)}}))}),yield Promise.all(d),r.sa.zo(o),yield(m=(0,G.Z)(function*(w,C){const x=We(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>de.forEach(C,z=>de.forEach(z.Hs,te=>x.persistence.referenceDelegate.addReference(N,z.targetId,te)).next(()=>de.forEach(z.Js,te=>x.persistence.referenceDelegate.removeReference(N,z.targetId,te)))))}catch(N){if(!za(N))throw N;ke("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const z=N.targetId;if(!N.fromCache){const te=x.ui.get(z),Fe=te.withLastLimboFreeSnapshotVersion(te.snapshotVersion);x.ui=x.ui.insert(z,Fe)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),at.apply(this,arguments)}function Nt(n,e){return Zt.apply(this,arguments)}function Zt(){return Zt=(0,G.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield lC(t.localStore,e);t.currentUser=e,(o=t).la.forEach(d=>{d.forEach(m=>{m.reject(new Me(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield De(t,r.di)}var o}),Zt.apply(this,arguments)}function ls(n,e){const t=We(n),r=t.aa.get(e);if(r&&r.na)return en().add(r.key);{let o=en();const u=t.ra.get(e);if(!u)return o;for(const d of u){const m=t.ia.get(d);o=o.unionWith(m.view.ju)}return o}}function gc(n,e){return op.apply(this,arguments)}function op(){return op=(0,G.Z)(function*(n,e){const t=We(n),r=yield Qf(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&Pe(t,e.targetId,o.Xu),o}),op.apply(this,arguments)}function r0(n,e){return ap.apply(this,arguments)}function ap(){return ap=(0,G.Z)(function*(n,e){const t=We(n);return Fm(t.localStore,e).then(r=>De(t,r))}),ap.apply(this,arguments)}function s0(n,e,t,r){return up.apply(this,arguments)}function up(){return up=(0,G.Z)(function*(n,e,t,r){const o=We(n),u=yield function(d,m){const w=We(d),C=We(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>C.fn(x,m).next(N=>N?w.fi.Ks(x,N):de.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield tp(o.remoteStore):"acknowledged"===t||"rejected"===t?(V(o,e,r||null),k(o,e),m=e,We(We(o.localStore).Bs)._n(m)):tt(),yield De(o,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),up.apply(this,arguments)}function lp(){return lp=(0,G.Z)(function*(n,e){const t=We(n);if(OC(t),PC(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield ey(t,r.toArray());t.da=!0,yield Jd(t.remoteStore,!0);for(const u of o)zm(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(K(t,d),qu(t.localStore,d,!0))),Qd(t.remoteStore,d)}),yield o,yield ey(t,r),function(u){const d=We(u);d.aa.forEach((m,w)=>{Qd(d.remoteStore,w)}),d.ca.Si(),d.aa=new Map,d.ua=new Ln(He.comparator)}(t),t.da=!1,yield Jd(t.remoteStore,!1)}}),lp.apply(this,arguments)}function ey(n,e,t){return cp.apply(this,arguments)}function cp(){return cp=(0,G.Z)(function*(n,e,t){const r=We(n),o=[],u=[];for(const d of e){let m;const w=r.ra.get(d);if(w&&0!==w.length){m=yield cc(r.localStore,as(w[0]));for(const C of w){const x=r.ia.get(C),N=yield gc(r,x);N.snapshot&&u.push(N.snapshot)}}else{const C=yield dC(r.localStore,d);m=yield cc(r.localStore,C),yield zI(r,oA(C),d,!1)}o.push(m)}return r.sa.zo(u),o}),cp.apply(this,arguments)}function oA(n){return Cw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function AM(n){const e=We(n);return We(We(e.localStore).persistence).Fs()}function SM(n,e,t,r){return RC.apply(this,arguments)}function RC(){return RC=(0,G.Z)(function*(n,e,t,r){const o=We(n);if(o.da)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield Fm(o.localStore,Mb(u[0])),m=ec.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield De(o,d,m);break}case"rejected":yield qu(o.localStore,e,!0),K(o,e,r);break;default:tt()}}),RC.apply(this,arguments)}function MM(n,e,t){return NC.apply(this,arguments)}function NC(){return NC=(0,G.Z)(function*(n,e,t){const r=OC(n);if(r.da){for(const o of e){if(r.ra.has(o)){ke("SyncEngine","Adding an already active target "+o);continue}const u=yield dC(r.localStore,o),d=yield cc(r.localStore,u);yield zI(r,oA(u),d.targetId,!1),zm(r.remoteStore,d)}for(const o of t)r.ra.has(o)&&(yield qu(r.localStore,o,!1).then(()=>{Qd(r.remoteStore,o),K(r,o)}).catch(Xo))}}),NC.apply(this,arguments)}function OC(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=i.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ls.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l.bind(null,e),e.sa.zo=jI.bind(null,e.eventManager),e.sa.wa=e0.bind(null,e.eventManager),e}function PC(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E.bind(null,e),e}class aA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,G.Z)(function*(){t.M=Xf(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return uC(this.persistence,new aC,e.initialUser,this.M)}ya(e){return new gC(Uv.Yi,this.M)}ga(e){return new jv}terminate(){var e=this;return(0,G.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class uA extends aA{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield PC(r.Ta.syncEngine),yield tp(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return uC(this.persistence,new aC,e.initialUser,this.M)}pa(e){return new xv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=kv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?$i.withCacheSize(this.cacheSizeBytes):$i.DEFAULT;return new Nm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Hm(),Hi(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new jv}}class RM extends uA{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof $m&&(r.sharedClientState.syncEngine={$r:s0.bind(null,o),Br:SM.bind(null,o),Lr:MM.bind(null,o),Fs:AM.bind(null,o),Fr:r0.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,G.Z)(function*(d){yield function o0(n,e){return lp.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=Hm();if(!$m.vt(t))throw new Me(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=kv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $m(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class kC{initialize(e,t){var r=this;return(0,G.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>a(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=Nt.bind(null,r.syncEngine),yield Jd(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new BI}createDatastore(e){const t=Xf(e.databaseInfo.databaseId),r=new _C(e.databaseInfo);return new EC(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>a(this.syncEngine,m,0),d=$v.vt()?new $v:new mC,new wC(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,C){const x=new nA(r,o,u,d,m,w);return C&&(x.da=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,G.Z)(function*(t){const r=We(t);ke("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield hc(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lA(n,e=10240){let t=0;return{read:()=>(0,G.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,G.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class KI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class NM{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new mr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,G.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,G.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,G.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new t0(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,G.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,G.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,G.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class OM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,G.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,G.Z)(function*(u,d){const m=We(u),w=Uf(m.M)+"/documents",C={documents:d.map(te=>Ga(m.M,te))},x=yield m._o("BatchGetDocuments",w,C),N=new Map;x.forEach(te=>{const ge=function Zw(n,e){return"found"in e?function(t,r){gt(!!r.found);const o=Qo(t,r.found.name),u=zn(r.found.updateTime),d=new qr({mapValue:{fields:r.found.fields}});return gn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){gt(!!r.missing),gt(!!r.readTime);const o=Qo(t,r.missing),u=zn(r.readTime);return gn.newNoDocument(o,u)}(n,e):tt()}(m.M,te);N.set(ge.key.toString(),ge)});const z=[];return d.forEach(te=>{const ge=N.get(te.toString());gt(!!ge),z.push(ge)}),z}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ff(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,G.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=He.fromPath(o);e.mutations.push(new pm(u,e.precondition(u)))}),yield(r=(0,G.Z)(function*(o,u){const d=We(o),m=Uf(d.M)+"/documents",w={writes:u.map(C=>rc(d.M,C))};yield d.co("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?rr.updateTime(t):rr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(dt.min()))throw new Me(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rr.updateTime(t)}return rr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class PM{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new AI(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,G.Z)(function*(){const t=new OM(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!bf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Fw(t)}return!1}}class kM{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Mr.UNAUTHENTICATED,this.clientId=sw.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,G.Z)(function*(m){ke("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(ke("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,G.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=pc(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function cA(n,e){return FC.apply(this,arguments)}function FC(){return FC=(0,G.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,G.Z)(function*(u){r.isEqual(u)||(yield lC(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),FC.apply(this,arguments)}function dA(n,e){return LC.apply(this,arguments)}function LC(){return LC=(0,G.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield VC(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>Ym(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>Ym(e.remoteStore,u)),n.onlineComponents=e}),LC.apply(this,arguments)}function VC(n){return UC.apply(this,arguments)}function UC(){return UC=(0,G.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield cA(n,new aA)),n.offlineComponents}),UC.apply(this,arguments)}function YI(n){return BC.apply(this,arguments)}function BC(){return BC=(0,G.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield dA(n,new kC)),n.onlineComponents}),BC.apply(this,arguments)}function hA(n){return VC(n).then(e=>e.persistence)}function jC(n){return VC(n).then(e=>e.localStore)}function fA(n){return YI(n).then(e=>e.remoteStore)}function $C(n){return YI(n).then(e=>e.syncEngine)}function ty(n){return HC.apply(this,arguments)}function HC(){return HC=(0,G.Z)(function*(n){const e=yield YI(n),t=e.eventManager;return t.onListen=rA.bind(null,e.syncEngine),t.onUnlisten=iA.bind(null,e.syncEngine),t}),HC.apply(this,arguments)}function pA(n,e,t={}){const r=new mr;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(o,u,d,m,w){const C=new KI({next:N=>{u.enqueueAndForget(()=>Jv(o,x));const z=N.docs.has(d);!z&&N.fromCache?w.reject(new Me(le.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&N.fromCache&&m&&"server"===m.source?w.reject(new Me(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new Xm(Ko(d.path),C,{includeMetadataChanges:!0,ku:!0});return Qm(o,x)}(yield ty(n),n.asyncQueue,e,t,r)})),r.promise}function gA(n,e,t={}){const r=new mr;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(o,u,d,m,w){const C=new KI({next:N=>{u.enqueueAndForget(()=>Jv(o,x)),N.fromCache&&"server"===m.source?w.reject(new Me(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new Xm(d,C,{includeMetadataChanges:!0,ku:!0});return Qm(o,x)}(yield ty(n),n.asyncQueue,e,t,r)})),r.promise}const mA=new Map;function GC(n,e,t){if(!t)throw new Me(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yA(n,e,t,r){if(!0===e&&!0===r)throw new Me(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _A(n){if(!He.isDocumentKey(n))throw new Me(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vA(n){if(He.isDocumentKey(n))throw new Me(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function QI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=QI(n);throw new Me(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function EA(n,e){if(e<=0)throw new Me(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class wA{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class a0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wA({}),this._settingsFrozen=!1,e instanceof Ho?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Me(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(o.options.projectId)}(e))}get app(){if(!this._app)throw new Me(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wA(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new rw;switch(t.type){case"gapi":const r=t.client;return gt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new bb(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=mA.get(e);t&&(ke("ComponentProvider","Removing Datastore"),mA.delete(e),t.terminate())}(this),Promise.resolve()}}class Rn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class Gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class zu extends Gi{constructor(e,t,r){super(e,t,Ko(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new He(e))}withConverter(e){return new zu(this.firestore,e,this._path)}}function IA(n,e,...t){if(n=(0,Oe.m9)(n),GC("collection","path",e),n instanceof a0){const r=Bt.fromString(e,...t);return vA(r),new zu(n,null,r)}{if(!(n instanceof Rn||n instanceof zu))throw new Me(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Bt.fromString(e,...t));return vA(r),new zu(n.firestore,null,r)}}function JI(n,e,...t){if(n=(0,Oe.m9)(n),1===arguments.length&&(e=sw.R()),GC("doc","path",e),n instanceof a0){const r=Bt.fromString(e,...t);return _A(r),new Rn(n,null,new He(r))}{if(!(n instanceof Rn||n instanceof zu))throw new Me(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Bt.fromString(e,...t));return _A(r),new Rn(n.firestore,n instanceof zu?n.converter:null,new He(r))}}function DA(n,e){return n=(0,Oe.m9)(n),e=(0,Oe.m9)(e),(n instanceof Rn||n instanceof zu)&&(e instanceof Rn||e instanceof zu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bA(n,e){return n=(0,Oe.m9)(n),e=(0,Oe.m9)(e),n instanceof Gi&&e instanceof Gi&&n.firestore===e.firestore&&Of(n._query,e._query)&&n.converter===e.converter}class zM{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new AI(this,"async_queue_retry"),this.Qa=()=>{const t=Hi();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Hi();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Hi();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new mr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,G.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!za(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,qn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=VI.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&tt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,G.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function qC(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class WM{constructor(){this._progressObserver={},this._taskCompletionResolver=new mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Vn extends a0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new zM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||CA(this),this._firestoreClient.terminate()}}function Nr(n){return n._firestoreClient||CA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function CA(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new cw(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new kM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function TA(n,e,t){const r=new mr;return n.asyncQueue.enqueue((0,G.Z)(function*(){try{yield cA(n,t),yield dA(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===le.FAILED_PRECONDITION||u.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function AA(n){if(n._initialized||n._terminated)throw new Me(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class mc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wu(nr.fromBase64String(e))}catch(t){throw new Me(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wu(nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dp{constructor(e){this._methodName=e}}class XI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ct(this._lat,e._lat)||Ct(this._long,e._long)}}const rx=/^__.*__$/;class ix{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Xl(e,this.data,this.fieldMask,t,this.fieldTransforms):new jd(e,this.data,t,this.fieldTransforms)}}class SA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class eD{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new eD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return rD(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(MA(this.ec)&&rx.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class sx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Xf(e)}lc(e,t,r,o=!1){return new eD({ec:e,methodName:t,hc:r,path:yr.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function hp(n){const e=n._freezeSettings(),t=Xf(n._databaseId);return new sx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tD(n,e,t,r,o,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,o);KC("Data must be an object, but it was:",d,r);const m=NA(r,d);let w,C;if(u.merge)w=new ql(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const x=[];for(const N of u.mergeFields){const z=YC(e,N,t);if(!d.contains(z))throw new Me(le.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);PA(x,z)||x.push(z)}w=new ql(x),C=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=d.fieldTransforms;return new ix(new qr(m),w,C)}class u0 extends dp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof u0}}function xA(n,e,t){return new eD({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class zC extends dp{_toFieldTransform(e){return new Yo(e.path,new Bd)}isEqual(e){return e instanceof zC}}class ox extends dp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=xA(this,e,!0),r=this.fc.map(u=>fp(u,t)),o=new Yl(r);return new Yo(e.path,o)}isEqual(e){return this===e}}class ax extends dp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=xA(this,e,!0),r=this.fc.map(u=>fp(u,t)),o=new Ql(r);return new Yo(e.path,o)}isEqual(e){return this===e}}class ux extends dp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Jl(e.M,Pf(e.M,this.dc));return new Yo(e.path,t)}isEqual(e){return this===e}}function WC(n,e,t,r){const o=n.lc(1,e,t);KC("Data must be an object, but it was:",o,r);const u=[],d=qr.empty();Nu(r,(w,C)=>{const x=nD(e,w,t);C=(0,Oe.m9)(C);const N=o.oc(x);if(C instanceof u0)u.push(x);else{const z=fp(C,N);null!=z&&(u.push(x),d.set(x,z))}});const m=new ql(u);return new SA(d,m,o.fieldTransforms)}function ZC(n,e,t,r,o,u){const d=n.lc(1,e,t),m=[YC(e,r,t)],w=[o];if(u.length%2!=0)throw new Me(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<u.length;z+=2)m.push(YC(e,u[z])),w.push(u[z+1]);const C=[],x=qr.empty();for(let z=m.length-1;z>=0;--z)if(!PA(C,m[z])){const te=m[z];let ge=w[z];ge=(0,Oe.m9)(ge);const Fe=d.oc(te);if(ge instanceof u0)C.push(te);else{const nt=fp(ge,Fe);null!=nt&&(C.push(te),x.set(te,nt))}}const N=new ql(C);return new SA(x,N,d.fieldTransforms)}function RA(n,e,t,r=!1){return fp(t,n.lc(r?4:3,e))}function fp(n,e){if(OA(n=(0,Oe.m9)(n)))return KC("Unsupported field value:",e,n),NA(n,e);if(n instanceof dp)return function(t,r){if(!MA(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=fp(d,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Oe.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Pf(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Mn.fromDate(t);return{timestampValue:$d(r.M,o)}}if(t instanceof Mn){const o=new Mn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:$d(r.M,o)}}if(t instanceof XI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wu)return{bytesValue:Bb(r.M,t._byteString)};if(t instanceof Rn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${QI(t)}`)}(n,e)}function NA(n,e){const t={};return uw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nu(n,(r,o)=>{const u=fp(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function OA(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Mn||n instanceof XI||n instanceof Wu||n instanceof Rn||n instanceof dp)}function KC(n,e,t){if(!OA(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=QI(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function YC(n,e,t){if((e=(0,Oe.m9)(e))instanceof mc)return e._internalPath;if("string"==typeof e)return nD(n,e);throw rD("Field path arguments must be of type string or ",n,!1,void 0,t)}const lx=new RegExp("[~\\*/\\[\\]]");function nD(n,e,t){if(e.search(lx)>=0)throw rD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mc(...e.split("."))._internalPath}catch(r){throw rD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rD(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Me(le.INVALID_ARGUMENT,m+n+w)}function PA(n,e){return n.some(t=>t.isEqual(e))}class l0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cx extends l0{data(){return super.data()}}function iD(n,e){return"string"==typeof e?nD(n,e):e instanceof mc?e._internalPath:e._delegate._internalPath}class pp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yc extends l0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new c0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(iD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class c0 extends yc{data(e={}){return super.data(e)}}class th{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new pp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new c0(this._firestore,this._userDataWriter,r.key,r,new pp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new c0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new pp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new c0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new pp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:dx(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function kA(n,e){return n instanceof yc&&e instanceof yc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof th&&e instanceof th&&n._firestore===e._firestore&&bA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function FA(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class d0{}function nh(n,...e){for(const t of e)n=t._apply(n);return n}class hx extends d0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=hp(e.firestore),r=function(o,u,d,m,w,C,x){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Me(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){$A(x,C);const te=[];for(const ge of x)te.push(jA(m,o,ge));N={arrayValue:{values:te}}}else N=jA(m,o,x)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||$A(x,C),N=RA(d,"where",x,"in"===C||"not-in"===C);const z=xr.create(w,C,N);return function(te,ge){if(ge.S()){const nt=X_(te);if(null!==nt&&!nt.isEqual(ge.field))throw new Me(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${nt.toString()}' and '${ge.field.toString()}'`);const Ft=J_(te);null!==Ft&&HA(0,ge.field,Ft)}const Fe=function(nt,Ft){for(const Lt of nt.filters)if(Ft.indexOf(Lt.op)>=0)return Lt.op;return null}(te,function(nt){switch(nt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ge.op));if(null!==Fe)throw new Me(le.INVALID_ARGUMENT,Fe===ge.op?`Invalid query. You cannot use more than one '${ge.op.toString()}' filter.`:`Invalid query. You cannot use '${ge.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,z),z}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Gi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Zo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class px extends d0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Me(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Vd(o,u);return function(m,w){if(null===J_(m)){const C=X_(m);null!==C&&HA(0,C,w.field)}}(r,d),d}(e._query,this._c,this.gc);return new Gi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Zo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class LA extends d0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Gi(e.firestore,e.converter,tv(e._query,this.yc,this.Ic))}}class VA extends d0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=BA(e,this.type,this.Tc,this.Ec);return new Gi(e.firestore,e.converter,(o=t,new Zo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class UA extends d0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=BA(e,this.type,this.Tc,this.Ec);return new Gi(e.firestore,e.converter,(o=t,new Zo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function BA(n,e,t,r){if(t[0]=(0,Oe.m9)(t[0]),t[0]instanceof l0)return function(o,u,d,m,w){if(!m)throw new Me(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const x of Kl(o))if(x.field.isKeyField())C.push(Wl(u,m.key));else{const N=m.data.field(x.field);if(sm(N))throw new Me(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const z=x.field.canonicalString();throw new Me(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}C.push(N)}return new Fu(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=hp(n.firestore);return function(u,d,m,w,C,x){const N=u.explicitOrderBy;if(C.length>N.length)throw new Me(le.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let te=0;te<C.length;te++){const ge=C[te];if(N[te].field.isKeyField()){if("string"!=typeof ge)throw new Me(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ge}`);if(!ev(u)&&-1!==ge.indexOf("/"))throw new Me(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ge}' contains a slash.`);const Fe=u.path.child(Bt.fromString(ge));if(!He.isDocumentKey(Fe))throw new Me(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const nt=new He(Fe);z.push(Wl(d,nt))}else{const Fe=RA(m,w,ge);z.push(Fe)}}return new Fu(z,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function jA(n,e,t){if("string"==typeof(t=(0,Oe.m9)(t))){if(""===t)throw new Me(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ev(e)&&-1!==t.indexOf("/"))throw new Me(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Bt.fromString(t));if(!He.isDocumentKey(r))throw new Me(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wl(n,new He(r))}if(t instanceof Rn)return Wl(n,t._key);throw new Me(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${QI(t)}.`)}function $A(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function HA(n,e,t){if(!t.isEqual(e))throw new Me(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Ix={maxAttempts:5};class QC{convertValue(e,t="none"){switch(zl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ou(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return Nu(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new XI(xn(e.latitude),xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=U_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pd(e));default:return null}}convertTimestamp(e){const t=$a(e);return new Mn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Bt.fromString(e);gt(ic(r));const o=new Ho(r.get(1),r.get(3)),u=new He(r.popFirst(5));return o.isEqual(t)||qn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function sD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Dx extends QC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,t)}}class GA{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hp(e)}set(e,t,r){this._verifyNotCommitted();const o=rh(e,this._firestore),u=sD(o.converter,t,r),d=tD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,rr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=rh(e,this._firestore);let d;return d="string"==typeof(t=(0,Oe.m9)(t))||t instanceof mc?ZC(this._dataReader,"WriteBatch.update",u._key,t,r,o):WC(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rh(e,this._firestore);return this._mutations=this._mutations.concat(new Ff(t._key,rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rh(n,e){if((n=(0,Oe.m9)(n)).firestore!==e)throw new Me(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class gp extends QC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,t)}}function qA(n,e,t){n=zt(n,Rn);const r=zt(n.firestore,Vn),o=sD(n.converter,e,t);return ny(r,[tD(hp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,rr.none())])}function zA(n,e,t,...r){n=zt(n,Rn);const o=zt(n.firestore,Vn),u=hp(o);let d;return d="string"==typeof(e=(0,Oe.m9)(e))||e instanceof mc?ZC(u,"updateDoc",n._key,e,t,r):WC(u,"updateDoc",n._key,e),ny(o,[d.toMutation(n._key,rr.exists(!0))])}function WA(n,...e){var t,r,o;n=(0,Oe.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||qC(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(qC(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,x;if(n instanceof Rn)C=zt(n.firestore,Vn),x=Ko(n._key.path),w={next:N=>{e[d]&&e[d](JC(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=zt(n,Gi);C=zt(N.firestore,Vn),x=N._query;const z=new gp(C);w={next:te=>{e[d]&&e[d](new th(C,z,N,te))},error:e[d+1],complete:e[d+2]},FA(n._query)}return function(N,z,te,ge){const Fe=new KI(ge),nt=new Xm(z,Fe,te);return N.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return Qm(yield ty(N),nt)})),()=>{Fe.Aa(),N.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return Jv(yield ty(N),nt)}))}}(Nr(C),x,m,w)}function ny(n,e){return function(t,r){const o=new mr;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function sA(n,e,t){return ZI.apply(this,arguments)}(yield $C(t),r,o)})),o.promise}(Nr(n),e)}function JC(n,e,t){const r=t.docs.get(e._key),o=new gp(n);return new yc(n,o,e._key,r,new pp(t.hasPendingWrites,t.fromCache),e.converter)}class Ox extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=hp(e)}get(e){const t=rh(e,this._firestore),r=new Dx(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new l0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new l0(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=rh(e,this._firestore),u=sD(o.converter,t,r),d=tD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=rh(e,this._firestore);let d;return d="string"==typeof(t=(0,Oe.m9)(t))||t instanceof mc?ZC(this._dataReader,"Transaction.update",u._key,t,r,o):WC(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=rh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rh(e,this._firestore),r=new gp(this._firestore);return super.get(e).then(o=>new yc(this._firestore,r,t._key,o._document,new pp(!1,!1),t.converter))}}function XC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function KA(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function YA(){if(!function lw(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Rd=je.SDK_VERSION,(0,je._registerComponent)(new ot.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Vn(o,new jo(t.getProvider("auth-internal")),new fo(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,je.registerVersion)(nw,"3.4.9",n),(0,je.registerVersion)(nw,"3.4.9","esm2017")}();class h0{constructor(e){this._delegate=e}static fromBase64String(e){return YA(),new h0(Wu.fromBase64String(e))}static fromUint8Array(e){return KA(),new h0(Wu.fromUint8Array(e))}toBase64(){return YA(),this._delegate.toBase64()}toUint8Array(){return KA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eT(n){return function $x(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Hx{enableIndexedDbPersistence(e,t){return function KM(n,e){AA(n=zt(n,Vn));const t=Nr(n),r=n._freezeSettings(),o=new kC;return TA(t,o,new uA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function YM(n){AA(n=zt(n,Vn));const e=Nr(n),t=n._freezeSettings(),r=new kC;return TA(e,r,new RM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function QM(n){if(n._initialized&&!n._terminated)throw new Me(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{yield(t=(0,G.Z)(function*(r){if(!po.vt())return Promise.resolve();const o=r+"main";yield po.delete(o)}),function(r){return t.apply(this,arguments)})(kv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class QA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ho||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Df("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function GM(n,e,t,r={}){var o;const u=(n=zt(n,a0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Df("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Mr.MOCK_USER;else{d=(0,Oe.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Me(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Mr(w)}n._authCredentials=new V_(new Ib(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function XM(n){return function FM(n){return n.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield hA(n),t=yield fA(n);return e.setNetworkEnabled(!0),function(r){const o=We(r);return o.wu.delete(0),Gm(o)}(t)}))}(Nr(n=zt(n,Vn)))}(this._delegate)}disableNetwork(){return function ex(n){return function LM(n){return n.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield hA(n),t=yield fA(n);return e.setNetworkEnabled(!1),(r=(0,G.Z)(function*(o){const u=We(o);u.wu.add(0),yield hc(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Nr(n=zt(n,Vn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function JM(n){return function(e){const t=new mr;return e.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function A(n,e){return S.apply(this,arguments)}(yield $C(e),t)})),t.promise}(Nr(n=zt(n,Vn)))}(this._delegate)}onSnapshotsInSync(e){return function Nx(n,e){return function BM(n,e){const t=new KI(e);return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return r=yield ty(n),o=t,We(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return r=yield ty(n),o=t,void We(r).bu.delete(o);var r,o}))}}(Nr(n=zt(n,Vn)),qC(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ry(this,IA(this._delegate,e))}catch(t){throw cs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ea(this,JI(this._delegate,e))}catch(t){throw cs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ds(this,function qM(n,e){if(n=zt(n,a0),GC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gi(n,null,(t=e,new Zo(Bt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw cs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Px(n,e,t){n=zt(n,Vn);const r=Object.assign(Object.assign({},Ix),t);return function(o){if(o.maxAttempts<1)throw new Me(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function jM(n,e,t){const r=new mr;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){const o=yield(u=n,YI(u).then(d=>d.datastore));var u;new PM(n.asyncQueue,o,t,e,r).run()})),r.promise}(Nr(n),o=>e(new Ox(n,o)),r)}(this._delegate,t=>e(new JA(this,t)))}batch(){return Nr(this._delegate),new XA(new GA(this._delegate,e=>ny(this._delegate,e)))}loadBundle(e){return function tx(n,e){const t=Nr(n=zt(n,Vn)),r=new WM;return function $M(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return lA(w,C);if(w instanceof ArrayBuffer)return lA(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new NM(w,d);var w}(t,Xf(e));n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){!function xM(n,e,t){const r=We(n);var o;(o=(0,G.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(z,te){const ge=We(z),Fe=zn(te.createTime);return ge.persistence.runTransaction("hasNewerBundle","readonly",nt=>ge._s.getBundleMetadata(nt,te.id)).then(nt=>!!nt&&nt.createTime.compareTo(Fe)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(z=w).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);m._updateProgress(AC(w));const C=new TC(w,u.localStore,d.M);let x=yield d.ma();for(;x;){const z=yield C.Fu(x);z&&m._updateProgress(z),x=yield d.ma()}const N=yield C.complete();return yield De(u,N.Lu,void 0),yield function(z,te){const ge=We(z);return ge.persistence.runTransaction("Save bundle","readwrite",Fe=>ge._s.saveBundleMetadata(Fe,te))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return Df("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var z}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield $C(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function nx(n,e){return function HM(n,e){return n.asyncQueue.enqueue((0,G.Z)(function*(){return function(t,r){const o=We(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield jC(n),e)}))}(Nr(n=zt(n,Vn)),e).then(t=>t?new Gi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ds(this,t):null)}}class oD extends QC{constructor(e){super(),this.firestore=e}convertBytes(e){return new h0(new Wu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ea.forKey(t,this.firestore,null)}}class JA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}get(e){const t=yp(e);return this._delegate.get(t).then(r=>new f0(this._firestore,new yc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=yp(e);return r?(XC("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=yp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=yp(e);return this._delegate.delete(t),this}}class XA{constructor(e){this._delegate=e}set(e,t,r){const o=yp(e);return r?(XC("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=yp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=yp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class mp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new c0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new p0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=mp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new mp(e,new oD(e),t),o.set(t,u)),u}}mp.INSTANCES=new WeakMap;class ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ea(t,new Rn(t._delegate,r,new He(e)))}static forKey(e,t,r){return new ea(t,new Rn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ry(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ry(this.firestore,IA(this._delegate,e))}catch(t){throw cs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Oe.m9)(e))instanceof Rn&&DA(this._delegate,e)}set(e,t){t=XC("DocumentReference.set",t);try{return t?qA(this._delegate,e,t):qA(this._delegate,e)}catch(r){throw cs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?zA(this._delegate,e):zA(this._delegate,e,t,...r)}catch(o){throw cs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function xx(n){return ny(zt(n.firestore,Vn),[new Ff(n._key,rr.none())])}(this._delegate)}onSnapshot(...e){const t=eS(e),r=tS(e,o=>new f0(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return WA(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Cx(n){n=zt(n,Rn);const e=zt(n.firestore,Vn),t=Nr(e),r=new gp(e);return function VM(n,e){const t=new mr;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(o,u,d){try{const m=yield function(w,C){const x=We(w);return x.persistence.runTransaction("read document","readonly",N=>x.fi.Ls(N,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Me(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=pc(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield jC(n),e,t);var r})),t.promise}(t,n._key).then(o=>new yc(e,r,n._key,o,new pp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Tx(n){n=zt(n,Rn);const e=zt(n.firestore,Vn);return pA(Nr(e),n._key,{source:"server"}).then(t=>JC(e,n,t))}(this._delegate):function bx(n){n=zt(n,Rn);const e=zt(n.firestore,Vn);return pA(Nr(e),n._key).then(t=>JC(e,n,t))}(this._delegate),t.then(r=>new f0(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ea(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}function cs(n,e,t){return n.message=n.message.replace(e,t),n}function eS(n){for(const e of n)if("object"==typeof e&&!eT(e))return e;return{}}function tS(n,e){var t,r;let o;return o=eT(n[0])?n[0]:eT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class f0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return kA(this._delegate,e._delegate)}}class p0 extends f0{data(e){const t=this._delegate.data(e);return function wb(n,e){n||tt()}(void 0!==t),t}}class ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}where(e,t,r){try{return new ds(this.firestore,nh(this._delegate,function fx(n,e,t){const r=e,o=iD("where",n);return new hx(o,r,t)}(e,t,r)))}catch(o){throw cs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ds(this.firestore,nh(this._delegate,function gx(n,e="asc"){const t=e,r=iD("orderBy",n);return new px(r,t)}(e,t)))}catch(r){throw cs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ds(this.firestore,nh(this._delegate,function mx(n){return EA("limit",n),new LA("limit",n,"F")}(e)))}catch(t){throw cs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ds(this.firestore,nh(this._delegate,function yx(n){return EA("limitToLast",n),new LA("limitToLast",n,"L")}(e)))}catch(t){throw cs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ds(this.firestore,nh(this._delegate,function _x(...n){return new VA("startAt",n,!0)}(...e)))}catch(t){throw cs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ds(this.firestore,nh(this._delegate,function vx(...n){return new VA("startAfter",n,!1)}(...e)))}catch(t){throw cs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ds(this.firestore,nh(this._delegate,function Ex(...n){return new UA("endBefore",n,!1)}(...e)))}catch(t){throw cs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ds(this.firestore,nh(this._delegate,function wx(...n){return new UA("endAt",n,!0)}(...e)))}catch(t){throw cs(t,"endAt()","Query.endAt()")}}isEqual(e){return bA(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Sx(n){n=zt(n,Gi);const e=zt(n.firestore,Vn),t=Nr(e),r=new gp(e);return function UM(n,e){const t=new mr;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(o,u,d){try{const m=yield Qf(o,u,!0),w=new GI(u,m._i),C=w.Wu(m.documents),x=w.applyChanges(C,!1);d.resolve(x.snapshot)}catch(m){const w=pc(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield jC(n),e,t);var r})),t.promise}(t,n._query).then(o=>new th(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function Mx(n){n=zt(n,Gi);const e=zt(n.firestore,Vn),t=Nr(e),r=new gp(e);return gA(t,n._query,{source:"server"}).then(o=>new th(e,r,n,o))}(this._delegate):function Ax(n){n=zt(n,Gi);const e=zt(n.firestore,Vn),t=Nr(e),r=new gp(e);return FA(n._query),gA(t,n._query).then(o=>new th(e,r,n,o))}(this._delegate),t.then(r=>new tT(this.firestore,new th(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=eS(e),r=tS(e,o=>new tT(this.firestore,new th(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return WA(this._delegate,t,r)}withConverter(e){return new ds(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}class qx{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new p0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new p0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qx(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new p0(this._firestore,r))})}isEqual(e){return kA(this._delegate,e._delegate)}}class ry extends ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ea(this.firestore,e):null}doc(e){try{return new ea(this.firestore,void 0===e?JI(this._delegate):JI(this._delegate,e))}catch(t){throw cs(t,"doc()","CollectionReference.doc()")}}add(e){return function Rx(n,e){const t=zt(n.firestore,Vn),r=JI(n),o=sD(n.converter,e);return ny(t,[tD(hp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,rr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ea(this.firestore,t))}isEqual(e){return DA(this._delegate,e._delegate)}withConverter(e){return new ry(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}function yp(n){return zt(n,Rn)}class nT{constructor(...e){this._delegate=new mc(...e)}static documentId(){return new nT(yr.keyField().canonicalString())}isEqual(e){return(e=(0,Oe.m9)(e))instanceof mc&&this._delegate._internalPath.isEqual(e._internalPath)}}class _p{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Fx(){return new zC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new _p(e)}static delete(){const e=function kx(){return new u0("deleteField")}();return e._methodName="FieldValue.delete",new _p(e)}static arrayUnion(...e){const t=function Lx(...n){return new ox("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new _p(t)}static arrayRemove(...e){const t=function Vx(...n){return new ax("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new _p(t)}static increment(e){const t=function Ux(n){return new ux("increment",n)}(e);return t._methodName="FieldValue.increment",new _p(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const zx={Firestore:QA,GeoPoint:XI,Timestamp:Mn,Blob:h0,Transaction:JA,WriteBatch:XA,DocumentReference:ea,DocumentSnapshot:f0,Query:ds,QueryDocumentSnapshot:p0,QuerySnapshot:tT,CollectionReference:ry,FieldPath:nT,FieldValue:_p,setLogLevel:function Gx(n){!function Eb(n){pn.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function nS(n,e){return function Kx(n,e=lE.z){return new Es.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function rT(n,e){return nS(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function aD(n,e){return rT(n,e).pipe(Fa(void 0),Jh(),(0,wt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(x=>x.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function rS(n,e,t){return aD(n,t).pipe(La((r,o)=>function Qx(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Jx(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return iT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return iT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return iT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function cd(n,e=Sl.y){return n=null!=n?n:$D,(0,ln.e)((t,r)=>{let o,u=!0;t.subscribe((0,Tt.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,wt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function iT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function iS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Zx(n){(function Wx(n,e){n.INTERNAL.registerComponent(new ot.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},zx)))})(n,(e,t)=>new QA(e,t,new Hx)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(cE.Z);class sS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Fa(void 0),Jh(),io(([r,o])=>o.length>0||!r),(0,wt.U)(([r,o])=>o),Gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(La((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iS(e);return rS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gn.iC)}valueChanges(e={}){return rT(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Gn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(Gn.iC)}add(e){return this.ref.add(e)}doc(e){return new oS(this.ref.doc(e),this.afs)}}class oS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=lS(r,t);return new sS(o,u,this.afs)}snapshotChanges(){return function Yx(n,e){return nS(n,e).pipe(Fa(void 0),Jh(),(0,wt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Gn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,En.D)(this.ref.get(e)).pipe(Gn.iC)}}class Xx{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aD(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),io(t=>t.length>0),Gn.iC):aD(this.query,this.afs.schedulers.outsideAngular).pipe(Gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(La((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iS(e);return rS(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gn.iC)}valueChanges(e={}){return rT(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Gn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(Gn.iC)}}const aS=new g.OlP("angularfire2.enableFirestorePersistence"),uS=new g.OlP("angularfire2.firestore.persistenceSettings"),eR=new g.OlP("angularfire2.firestore.settings"),tR=new g.OlP("angularfire2.firestore.use-emulator");function lS(n,e=(t=>t)){return{query:e(n),ref:n}}let nR=(()=>{class n{constructor(t,r,o,u,d,m,w,C,x,N,z,te,ge,Fe,nt,Ft,Lt){this.schedulers=w;const jt=(0,gr.on)(t,m,r),At=x;N&&uE(jt,m,z,ge,Fe,nt,te,Ft),[this.firestore,this.persistenceEnabled$]=(0,gr.cc)(`${jt.name}.firestore`,"AngularFirestore",jt.name,()=>{const Vt=m.runOutsideAngular(()=>jt.firestore());if(u&&Vt.settings(u),At&&Vt.useEmulator(...At),o&&!wo(d)){const rn=()=>{try{return(0,En.D)(Vt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Wi){return"undefined"!=typeof console&&console.warn(Wi),vt(!1)}};return[Vt,m.runOutsideAngular(rn)]}return[Vt,vt(!1)]},[u,At,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=lS(o,r),m=this.schedulers.ngZone.run(()=>u);return new sS(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new Xx(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new oS(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(gr.Dh),g.LFG(gr.xv,8),g.LFG(aS,8),g.LFG(eR,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Gn.HU),g.LFG(uS,8),g.LFG(tR,8),g.LFG(ud,8),g.LFG(Eg,8),g.LFG($y,8),g.LFG(wg,8),g.LFG(aE,8),g.LFG(ka,8),g.LFG(Hy,8),g.LFG(vg,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rR=(()=>{class n{constructor(){sE.Z.registerVersion("angularfire",Gn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:aS,useValue:!0},{provide:uS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[nR]}),n})();class Xa extends is.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var iR=O(9672);function cS(n,e,t){n?(0,iR.f)(t,n,e):e()}function uD(n,e){const t=(0,Ar.m)(n)?n:()=>n,r=o=>o.error(t());return new Es.y(e?o=>e.schedule(r,0,o):r)}function dS(n){return new Es.y(e=>{(0,Lr.Xf)(n()).subscribe(e)})}var iy=O(515),hS=O(727);function fS(){return(0,ln.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Tt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class aR extends Es.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ln.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new hS.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Tt.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=hS.w0.EMPTY)}return e}refCount(){return fS()(this)}}function ih(n){return(0,ln.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Tt.x)(t,void 0,void 0,d=>{u=(0,Lr.Xf)(n(d,ih(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var qi=O(5577);function g0(n,e){return(0,Ar.m)(e)?(0,qi.z)(n,e,1):(0,qi.z)(n,1)}function sT(n){return n<=0?()=>iy.E:(0,ln.e)((e,t)=>{let r=[];e.subscribe((0,Tt.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}var go=O(8505);class _c{constructor(e,t){this.id=e,this.url=t}}class oT extends _c{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class m0 extends _c{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pS extends _c{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class cR extends _c{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dR extends _c{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hR extends _c{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fR extends _c{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pR extends _c{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gR extends _c{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gS{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mS{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class mR{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yR{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _R{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vR{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yS{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const kt="primary";class ER{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function sy(n){return new ER(n)}const _S="ngNavigationCancelingError";function aT(n){const e=Error("NavigationCancelingError: "+n);return e[_S]=!0,e}function IR(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Zu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!vS(n[o],e[o]))return!1;return!0}function vS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function ES(n){return Array.prototype.concat.apply([],n)}function wS(n){return n.length>0?n[n.length-1]:null}function Ei(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ku(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,En.D)(Promise.resolve(n)):vt(n)}const CR={exact:function bS(n,e,t){if(!Ep(n.segments,e.segments)||!lD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!bS(n.children[r],e.children[r],t))return!1;return!0},subset:CS},IS={exact:function TR(n,e){return Zu(n,e)},subset:function AR(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vS(n[t],e[t]))},ignored:()=>!0};function DS(n,e,t){return CR[t.paths](n.root,e.root,t.matrixParams)&&IS[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function CS(n,e,t){return TS(n,e,e.segments,t)}function TS(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Ep(o,t)||e.hasChildren()||!lD(o,t,r))}if(n.segments.length===t.length){if(!Ep(n.segments,t)||!lD(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!CS(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ep(n.segments,o)&&lD(n.segments,o,r)&&n.children[kt])&&TS(n.children[kt],e,u,r)}}function lD(n,e,t){return e.every((r,o)=>IS[t](n[o].parameters,r.parameters))}class vp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sy(this.queryParams)),this._queryParamMap}toString(){return xR.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ei(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cD(this)}}class y0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=sy(this.parameters)),this._parameterMap}toString(){return RS(this)}}function Ep(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class AS{}class SS{parse(e){const t=new UR(e);return new vp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${_0(e.root,!0)}`,r=function OR(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${dD(t)}=${dD(o)}`).join("&"):`${dD(t)}=${dD(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function RR(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const xR=new SS;function cD(n){return n.segments.map(e=>RS(e)).join("/")}function _0(n,e){if(!n.hasChildren())return cD(n);if(e){const t=n.children[kt]?_0(n.children[kt],!1):"",r=[];return Ei(n.children,(o,u)=>{u!==kt&&r.push(`${u}:${_0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function MR(n,e){let t=[];return Ei(n.children,(r,o)=>{o===kt&&(t=t.concat(e(r,o)))}),Ei(n.children,(r,o)=>{o!==kt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===kt?[_0(n.children[kt],!1)]:[`${o}:${_0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${cD(n)}/${t[0]}`:`${cD(n)}/(${t.join("//")})`}}function MS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dD(n){return MS(n).replace(/%3B/gi,";")}function uT(n){return MS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hD(n){return decodeURIComponent(n)}function xS(n){return hD(n.replace(/\+/g,"%20"))}function RS(n){return`${uT(n.path)}${function NR(n){return Object.keys(n).map(e=>`;${uT(e)}=${uT(n[e])}`).join("")}(n.parameters)}`}const PR=/^[^\/()?;=#]+/;function fD(n){const e=n.match(PR);return e?e[0]:""}const kR=/^[^=?&#]+/,LR=/^[^&#]+/;class UR{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[kt]=new Ht(e,t)),r}parseSegment(){const e=fD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new y0(hD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=fD(this.remaining);o&&(r=o,this.capture(r))}e[hD(t)]=hD(r)}parseQueryParam(e){const t=function FR(n){const e=n.match(kR);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function VR(n){const e=n.match(LR);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=xS(t),u=xS(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fD(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=kt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[kt]:new Ht([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class NS{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=lT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=lT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return cT(e,this._root).map(t=>t.value)}}function lT(n,e){if(n===e.value)return e;for(const t of e.children){const r=lT(n,t);if(r)return r}return null}function cT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cT(n,t);if(r.length)return r.unshift(e),r}return[]}class vc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function oy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class OS extends NS{constructor(e,t){super(e),this.snapshot=t,dT(this,e)}toString(){return this.snapshot.toString()}}function PS(n,e){const t=function BR(n,e){const d=new pD([],{},{},"",{},kt,e,null,n.root,-1,{});return new FS("",new vc(d,[]))}(n,e),r=new Xa([new y0("",{})]),o=new Xa({}),u=new Xa({}),d=new Xa({}),m=new Xa(""),w=new ay(r,o,d,m,u,kt,e,t.root);return w.snapshot=t.root,new OS(new vc(w,[]),t)}class ay{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>sy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>sy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kS(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function jR(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class pD{constructor(e,t,r,o,u,d,m,w,C,x,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=x,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class FS extends NS{constructor(e,t){super(t),this.url=e,dT(this,t)}toString(){return LS(this._root)}}function dT(n,e){e.value._routerState=n,e.children.forEach(t=>dT(n,t))}function LS(n){const e=n.children.length>0?` { ${n.children.map(LS).join(", ")} } `:"";return`${n.value}${e}`}function hT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Zu(e.params,t.params)||n.params.next(t.params),function DR(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Zu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function fT(n,e){const t=Zu(n.params,e.params)&&function SR(n,e){return Ep(n,e)&&n.every((t,r)=>Zu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||fT(n.parent,e.parent))}function v0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function HR(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return v0(n,r,o);return v0(n,r)})}(n,e,t);return new vc(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>v0(n,m)),d}}const r=function GR(n){return new ay(new Xa(n.url),new Xa(n.params),new Xa(n.queryParams),new Xa(n.fragment),new Xa(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>v0(n,u));return new vc(r,o)}}function gD(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function E0(n){return"object"==typeof n&&null!=n&&n.outlets}function pT(n,e,t,r,o){let u={};if(r&&Ei(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new vp(t,u,o);const d=VS(n,e,t);return new vp(d,u,o)}function VS(n,e,t){const r={};return Ei(n.children,(o,u)=>{r[u]=o===e?t:VS(o,e,t)}),new Ht(n.segments,r)}class US{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&gD(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(E0);if(o&&o!==wS(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gT{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function BS(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return mD(n,e,t);const r=function YR(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(E0(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!$S(w,C,d))return u;r+=2}else{if(!$S(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ht(n.segments.slice(0,r.pathIndex),{});return u.children[kt]=new Ht(n.segments.slice(r.pathIndex),n.children),mD(u,0,o)}return r.match&&0===o.length?new Ht(n.segments,{}):r.match&&!n.hasChildren()?mT(n,e,t):r.match?mD(n,0,o):mT(n,e,t)}function mD(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const r=function KR(n){return E0(n[0])?n[0].outlets:{[kt]:n}}(t),o={};return Ei(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=BS(n.children[d],e,u))}),Ei(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Ht(n.segments,o)}}function mT(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(E0(u)){const w=QR(u.outlets);return new Ht(r,w)}if(0===o&&gD(t[0])){r.push(new y0(n.segments[e].path,jS(t[0]))),o++;continue}const d=E0(u)?u.outlets[kt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&gD(m)?(r.push(new y0(d,jS(m))),o+=2):(r.push(new y0(d,{})),o++)}return new Ht(r,{})}function QR(n){const e={};return Ei(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=mT(new Ht([],{}),0,t))}),e}function jS(n){const e={};return Ei(n,(t,r)=>e[r]=`${t}`),e}function $S(n,e,t){return n==t.path&&Zu(e,t.parameters)}class XR{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=oy(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Ei(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=oy(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=oy(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=oy(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new vR(u.value.snapshot))}),e.children.length&&this.forwardEvent(new yR(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(hT(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),hT(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function eN(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class yT{constructor(e,t){this.routes=e,this.module=t}}function sh(n){return"function"==typeof n}function wp(n){return n instanceof vp}const w0=Symbol("INITIAL_VALUE");function I0(){return Fn(n=>function sR(...n){const e=(0,ws.yG)(n),t=(0,ws.jO)(n),{args:r,keys:o}=mu(n);if(0===r.length)return(0,En.D)([],e);const u=new Es.y(function oR(n,e,t=Sl.y){return r=>{cS(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)cS(e,()=>{const C=(0,En.D)(n[w],e);let x=!1;C.subscribe((0,Tt.x)(r,N=>{u[w]=N,x||(x=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>cl(o,d):Sl.y));return t?u.pipe(Ia(t)):u}(n.map(e=>e.pipe((0,Fi.q)(1),Fa(w0)))).pipe(La((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==w0?o:(u===w0&&(r=!0),r||!1!==u&&d!==t.length-1&&!wp(u)?o:u),e)},w0),io(e=>e!==w0),(0,wt.U)(e=>wp(e)?e:!0===e),(0,Fi.q)(1)))}class oN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new D0,this.attachRef=null}}class D0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new oN,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let _T=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=u||kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new aN(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(D0),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class aN{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ay?this.route:e===D0?this.childContexts:this.parent.get(e,t)}}let HS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[_T],encapsulation:2}),n})();function GS(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];uN(r,lN(e,r))}}function uN(n,e){n.children&&GS(n.children,e)}function lN(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function vT(n){const e=n.children&&n.children.map(vT),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=HS),t}function ta(n){return n.outlet||kt}function qS(n,e){const t=n.filter(r=>ta(r)===e);return t.push(...n.filter(r=>ta(r)!==e)),t}const zS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yD(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},zS):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||IR)(t,n,e);if(!u)return Object.assign({},zS);const d={};Ei(u.posParams,(w,C)=>{d[C]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function _D(n,e,t,r,o="corrected"){if(t.length>0&&function hN(n,e,t){return t.some(r=>vD(n,e,r)&&ta(r)!==kt)}(n,t,r)){const d=new Ht(e,function dN(n,e,t,r){const o={};o[kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ta(u)!==kt){const d=new Ht([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[ta(u)]=d}return o}(n,e,r,new Ht(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function fN(n,e,t){return t.some(r=>vD(n,e,r))}(n,t,r)){const d=new Ht(n.segments,function cN(n,e,t,r,o,u){const d={};for(const m of r)if(vD(n,t,m)&&!o[ta(m)]){const w=new Ht([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[ta(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Ht(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function vD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function WS(n,e,t,r){return!!(ta(n)===r||r!==kt&&vD(e,t,n))&&("**"===n.path||yD(e,n,t).matched)}function ZS(n,e,t){return 0===e.length&&!n.children[t]}class ED{constructor(e){this.segmentGroup=e||null}}class KS{constructor(e){this.urlTree=e}}function b0(n){return uD(new ED(n))}function YS(n){return uD(new KS(n))}function pN(n){return uD(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class yN{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=_D(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ht(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,kt).pipe((0,wt.U)(u=>this.createUrlTree(ET(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ih(u=>{if(u instanceof KS)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ED?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,kt).pipe((0,wt.U)(o=>this.createUrlTree(ET(o),e.queryParams,e.fragment))).pipe(ih(o=>{throw o instanceof ED?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Ht([],{[kt]:e}):e;return new vp(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,wt.U)(u=>new Ht([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,En.D)(o).pipe(g0(u=>{const d=r.children[u],m=qS(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,wt.U)(w=>({segment:w,outlet:u})))}),La((u,d)=>(u[d.outlet]=d.segment,u),{}),function uR(n,e){const t=arguments.length>=2;return r=>r.pipe(n?io((o,u)=>n(o,u,r)):Sl.y,sT(1),t?jh(e):tg(()=>new Al))}())}expandSegment(e,t,r,o,u,d){return(0,En.D)(r).pipe(g0(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(ih(C=>{if(C instanceof ED)return vt(null);throw C}))),Vo(m=>!!m),ih((m,w)=>{if(m instanceof Al||"EmptyError"===m.name)return ZS(t,o,u)?vt(new Ht([],{})):b0(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return WS(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):b0(t):b0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?YS(u):this.lineralizeSegments(r,u).pipe((0,qi.z)(d=>{const m=new Ht(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:x}=yD(t,o,u);if(!m)return b0(t);const N=this.applyRedirectCommands(w,o.redirectTo,x);return o.redirectTo.startsWith("/")?YS(N):this.lineralizeSegments(o,N).pipe((0,qi.z)(z=>this.expandSegment(e,t,r,z.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?vt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,wt.U)(N=>(r._loadedConfig=N,new Ht(o,{})))):vt(new Ht(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=yD(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,qi.z)(x=>{const N=x.module,z=x.routes,{segmentGroup:te,slicedSegments:ge}=_D(t,m,w,z),Fe=new Ht(te.segments,te.children);if(0===ge.length&&Fe.hasChildren())return this.expandChildren(N,z,Fe).pipe((0,wt.U)(jt=>new Ht(m,jt)));if(0===z.length&&0===ge.length)return vt(new Ht(m,{}));const nt=ta(r)===u;return this.expandSegment(N,Fe,z,ge,nt?kt:u,!0).pipe((0,wt.U)(Lt=>new Ht(m.concat(Lt.segments),Lt.children)))})):b0(t)}getChildConfig(e,t,r){return t.children?vt(new yT(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?vt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,qi.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,wt.U)(u=>(t._loadedConfig=u,u))):function gN(n){return uD(aT(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):vt(new yT([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return vt(!0);const u=o.map(d=>{const m=e.get(d);let w;if(function nN(n){return n&&sh(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!sh(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return Ku(w)});return vt(u).pipe(I0(),(0,go.b)(d=>{if(!wp(d))return;const m=aT(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,wt.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return vt(r);if(o.numberOfChildren>1||!o.children[kt])return pN(e.redirectTo);o=o.children[kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new vp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ei(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Ei(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Ht(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function ET(n){const e={};for(const r of Object.keys(n.children)){const u=ET(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function _N(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}class QS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wD{constructor(e,t){this.component=e,this.route=t}}function EN(n,e,t){const r=n._root;return C0(r,e?e._root:null,t,[r.value])}function ID(n,e,t){const r=function IN(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function C0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=oy(e);return n.children.forEach(d=>{(function DN(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function bN(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ep(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ep(n.url,e.url)||!Zu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fT(n,e)||!Zu(n.queryParams,e.queryParams);default:return!fT(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new QS(r)):(u.data=d.data,u._resolvedData=d._resolvedData),C0(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new wD(m.outlet.component,d))}else d&&T0(e,m,o),o.canActivateChecks.push(new QS(r)),C0(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Ei(u,(d,m)=>T0(d,t.getContext(m),o)),o}function T0(n,e,t){const r=oy(n),o=n.value;Ei(r,(u,d)=>{T0(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new wD(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class ON{}function JS(n){return new Es.y(e=>e.error(n))}class kN{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=_D(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,kt);if(null===t)return null;const r=new pD([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},kt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new vc(r,t),u=new FS(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=kS(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=qS(e,u),w=this.processSegmentGroup(m,d,u);if(null===w)return null;r.push(...w)}const o=XS(r);return function FN(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return ZS(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!WS(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const te=r.length>0?wS(r).parameters:{};u=new pD(r,te,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,nM(e),ta(e),e.component,e,eM(t),tM(t)+r.length,rM(e))}else{const te=yD(t,e,r);if(!te.matched)return null;d=te.consumedSegments,m=te.remainingSegments,u=new pD(d,te.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,nM(e),ta(e),e.component,e,eM(t),tM(t)+d.length,rM(e))}const w=function LN(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:x}=_D(t,d,m,w.filter(te=>void 0===te.redirectTo),this.relativeLinkResolution);if(0===x.length&&C.hasChildren()){const te=this.processChildren(w,C);return null===te?null:[new vc(u,te)]}if(0===w.length&&0===x.length)return[new vc(u,[])];const N=ta(e)===o,z=this.processSegment(w,C,x,N?kt:o);return null===z?null:[new vc(u,z)]}}function VN(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function XS(n){const e=[],t=new Set;for(const r of n){if(!VN(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=XS(r.children);e.push(new vc(r.value,o))}return e.filter(r=>!t.has(r))}function eM(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function tM(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function nM(n){return n.data||{}}function rM(n){return n.resolve||{}}function iM(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wT(n){return Fn(e=>{const t=n(e);return t?(0,En.D)(t).pipe((0,wt.U)(()=>e)):vt(e)})}class zN extends class qN{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const IT=new g.OlP("ROUTES");class sM{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,wt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new yT(ES(d.injector.get(IT,void 0,g.XFs.Self|g.XFs.Optional)).map(vT),d)}),ih(u=>{throw t._loader$=void 0,u}));return t._loader$=new aR(o,()=>new is.x).pipe(fS()),t._loader$}loadModuleFactory(e){return Ku(e()).pipe((0,qi.z)(t=>t instanceof g.YKP?vt(t):(0,En.D)(this.compiler.compileModuleAsync(t))))}}class ZN{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function KN(n){throw n}function YN(n,e,t){return e.parse("/")}function oM(n,e){return vt(null)}const QN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zi=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new is.x,this.errorHandler=KN,this.malformedUriErrorHandler=YN,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:oM,afterPreactivation:oM},this.urlHandlingStrategy=new ZN,this.routeReuseStrategy=new zN,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const N=d.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function bR(){return new vp(new Ht([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new sM(d,m,z=>this.triggerEvent(new gS(z)),z=>this.triggerEvent(new mS(z))),this.routerState=PS(this.currentUrlTree,this.rootComponentType),this.transitions=new Xa({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(io(o=>0!==o.id),(0,wt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Fn(o=>{let u=!1,d=!1;return vt(o).pipe((0,go.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Fn(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return aM(m.source)&&(this.browserUrlTree=m.extractedUrl),vt(m).pipe(Fn(N=>{const z=this.transitions.getValue();return r.next(new oT(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),z!==this.transitions.getValue()?iy.E:Promise.resolve(N)}),function vN(n,e,t,r){return Fn(o=>function mN(n,e,t,r,o){return new yN(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,wt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,go.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function UN(n,e,t,r,o){return(0,qi.z)(u=>function PN(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new kN(n,e,t,r,o,u).recognize();return null===d?JS(new ON):vt(d)}catch(d){return JS(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,wt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,go.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const te=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(te,N)}this.browserUrlTree=N.urlAfterRedirects}const z=new dR(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(z)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:z,extractedUrl:te,source:ge,restoredState:Fe,extras:nt}=m,Ft=new oT(z,this.serializeUrl(te),ge,Fe);r.next(Ft);const Lt=PS(te,this.rootComponentType).snapshot;return vt(Object.assign(Object.assign({},m),{targetSnapshot:Lt,urlAfterRedirects:te,extras:Object.assign(Object.assign({},nt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),iy.E}),wT(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:z,replaceUrl:te}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!z,replaceUrl:!!te})}),(0,go.b)(m=>{const w=new hR(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,wt.U)(m=>Object.assign(Object.assign({},m),{guards:EN(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function CN(n,e){return(0,qi.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?vt(Object.assign(Object.assign({},t),{guardsResult:!0})):function TN(n,e,t,r){return(0,En.D)(n).pipe((0,qi.z)(o=>function NN(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?vt(u.map(m=>{const w=ID(m,e,o);let C;if(function sN(n){return n&&sh(n.canDeactivate)}(w))C=Ku(w.canDeactivate(n,e,t,r));else{if(!sh(w))throw new Error("Invalid CanDeactivate guard");C=Ku(w(n,e,t,r))}return C.pipe(Vo())})).pipe(I0()):vt(!0)}(o.component,o.route,t,e,r)),Vo(o=>!0!==o,!0))}(d,r,o,n).pipe((0,qi.z)(m=>m&&function tN(n){return"boolean"==typeof n}(m)?function AN(n,e,t,r){return(0,En.D)(e).pipe(g0(o=>kl(function MN(n,e){return null!==n&&e&&e(new mR(n)),vt(!0)}(o.route.parent,r),function SN(n,e){return null!==n&&e&&e(new _R(n)),vt(!0)}(o.route,r),function RN(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function wN(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>dS(()=>vt(d.guards.map(w=>{const C=ID(w,d.node,t);let x;if(function iN(n){return n&&sh(n.canActivateChild)}(C))x=Ku(C.canActivateChild(r,n));else{if(!sh(C))throw new Error("Invalid CanActivateChild guard");x=Ku(C(r,n))}return x.pipe(Vo())})).pipe(I0())));return vt(u).pipe(I0())}(n,o.path,t),function xN(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return vt(!0);const o=r.map(u=>dS(()=>{const d=ID(u,e,t);let m;if(function rN(n){return n&&sh(n.canActivate)}(d))m=Ku(d.canActivate(e,n));else{if(!sh(d))throw new Error("Invalid CanActivate guard");m=Ku(d(e,n))}return m.pipe(Vo())}));return vt(o).pipe(I0())}(n,o.route,t))),Vo(o=>!0!==o,!0))}(r,u,n,e):vt(m)),(0,wt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,go.b)(m=>{if(wp(m.guardsResult)){const C=aT(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new fR(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),io(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),wT(m=>{if(m.guards.canActivateChecks.length)return vt(m).pipe((0,go.b)(w=>{const C=new pR(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),Fn(w=>{let C=!1;return vt(w).pipe(function BN(n,e){return(0,qi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return vt(t);let u=0;return(0,En.D)(o).pipe(g0(d=>function jN(n,e,t,r){return function $N(n,e,t,r){const o=iM(n);if(0===o.length)return vt({});const u={};return(0,En.D)(o).pipe((0,qi.z)(d=>function HN(n,e,t,r){const o=ID(n,e,r);return Ku(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,go.b)(m=>{u[d]=m}))),sT(1),(0,qi.z)(()=>iM(u).length===o.length?vt(u):iy.E))}(n._resolve,n,e,r).pipe((0,wt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),kS(n,t).resolve),null)))}(d.route,r,n,e)),(0,go.b)(()=>u++),sT(1),(0,qi.z)(d=>u===o.length?vt(t):iy.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,go.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,go.b)(w=>{const C=new gR(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),wT(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:z,replaceUrl:te}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!z,replaceUrl:!!te})}),(0,wt.U)(m=>{const w=function $R(n,e,t){const r=v0(n,e._root,t?t._root:void 0);return new OS(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,go.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,wt.U)(r=>(new XR(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,go.b)({next(){u=!0},complete(){u=!0}}),function lR(n){return(0,ln.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),ih(m=>{if(d=!0,function wR(n){return n&&n[_S]}(m)){const w=wp(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new pS(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||aM(o.source)};this.scheduleNavigation(x,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new cR(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return iy.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){GS(t),this.config=t.map(vT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,x=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function qR(n,e,t,r,o){if(0===t.length)return pT(e.root,e.root,e.root,r,o);const u=function zR(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new US(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Ei(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new US(t,e,r)}(t);if(u.toRoot())return pT(e.root,e.root,new Ht([],{}),r,o);const d=function WR(n,e,t){if(n.isAbsolute)return new gT(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new gT(u,u===e.root,0)}const r=gD(n.commands[0])?0:1;return function ZR(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new gT(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?mD(d.segmentGroup,d.index,u.commands):BS(d.segmentGroup,d.index,u.commands);return pT(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=wp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function XN(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},QN):!1===r?Object.assign({},JN):r,wp(t))return DS(this.currentUrlTree,t,o);const u=this.parseUrl(t);return DS(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new m0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,w;if(this.disposed)return Promise.resolve(!1);let C,x,N;d?(C=d.resolve,x=d.reject,N=d.promise):N=new Promise((ge,Fe)=>{C=ge,x=Fe});const z=++this.navigationId;let te;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),te=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):te=0,this.setTransition({id:z,targetPageId:te,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:x,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ge=>Promise.reject(ge))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new pS(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function aM(n){return"imperative"!==n}let DD=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new is.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:uy(this.skipLocationChange),replaceUrl:uy(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:uy(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zi),g.Y36(ay),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&g.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})();function uy(n){return""===n||!!n}class uM{}class lM{preload(e,t){return vt(null)}}let cM=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new sM(o,r,w=>t.triggerEvent(new gS(w)),w=>t.triggerEvent(new mS(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(io(t=>t instanceof m0),g0(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,En.D)(o).pipe((0,Ig.J)(),(0,wt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?vt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,qi.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(zi),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(uM))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),bT=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof oT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof m0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new yS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Ip=new g.OlP("ROUTER_CONFIGURATION"),dM=new g.OlP("ROUTER_FORROOT_GUARD"),rO=[ve,{provide:AS,useClass:SS},{provide:zi,useFactory:function uO(n,e,t,r,o,u,d={},m,w){const C=new zi(null,n,e,t,r,o,ES(u));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function lO(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(x=>{var N,z;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(z=console.groupEnd)||void 0===z||z.call(console)}),C},deps:[AS,D0,ve,g.zs3,g.Sil,IT,Ip,[class WN{},new g.FiY],[class GN{},new g.FiY]]},D0,{provide:ay,useFactory:function cO(n){return n.routerState.root},deps:[zi]},cM,lM,class nO{preload(e,t){return t().pipe(ih(()=>vt(null)))}},{provide:Ip,useValue:{enableTracing:!1}}];function iO(){return new g.PXZ("Router",zi)}let hM=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[rO,fM(t),{provide:dM,useFactory:aO,deps:[[zi,new g.FiY,new g.tp0]]},{provide:Ip,useValue:r||{}},{provide:he,useFactory:oO,deps:[se,[new g.tBr(qe),new g.FiY],Ip]},{provide:bT,useFactory:sO,deps:[zi,Xu,Ip]},{provide:uM,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:lM},{provide:g.PXZ,multi:!0,useFactory:iO},[CT,{provide:g.ip1,multi:!0,useFactory:dO,deps:[CT]},{provide:pM,useFactory:hO,deps:[CT]},{provide:g.tb,multi:!0,useExisting:pM}]]}}static forChild(t){return{ngModule:n,providers:[fM(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(dM,8),g.LFG(zi,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function sO(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new bT(n,e,t)}function oO(n,e,t={}){return t.useHash?new Ce(n,e):new Ze(n,e)}function aO(n){return"guarded"}function fM(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:IT,multi:!0,useValue:n}]}let CT=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new is.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(zi),d=this.injector.get(Ip);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?vt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Ip),o=this.injector.get(cM),u=this.injector.get(bT),d=this.injector.get(zi),m=this.injector.get(g.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function dO(n){return n.appInitializer.bind(n)}function hO(n){return n.bootstrapListener.bind(n)}const pM=new g.OlP("Router Initializer");let pO=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-bienvenida"]],decls:10,vars:0,consts:[["id","bienvenida-contenedor",1,"d-flex","justify-content-center","align-items-center"],[1,"d-flex","flex-column","align-items-center","text-white","p-5",2,"background","rgba(0, 0, 0, .7)","border-radius",".6rem"],["routerLink","/login",1,"btn","btn-secondary","m-3"],["routerLink","/registro",1,"btn","btn-secondary","m-auto"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"h1"),g._uU(3,"Cl\xednica OnLine"),g.qZA(),g.TgZ(4,"h2"),g._uU(5,"Especialistas en salud."),g.qZA(),g.TgZ(6,"button",2),g._uU(7,"Login"),g.qZA(),g.TgZ(8,"button",3),g._uU(9,"Registro"),g.qZA()()())},directives:[DD],styles:[""]}),n})(),TT=(()=>{class n{constructor(t){this.angularFireAuth=t}SignUp(t,r){return this.angularFireAuth.createUserWithEmailAndPassword(t,r)}SignIn(t,r){return this.angularFireAuth.signInWithEmailAndPassword(t,r)}SignOut(){return this.angularFireAuth.signOut()}getAuthState(){return this.angularFireAuth.authState}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ud))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gO(n,e){if(1&n&&(g.TgZ(0,"span",17),g._uU(1),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.hij(" ",t.error," ")}}let mO=(()=>{class n{constructor(t,r){this.router=t,this.authService=r,this.error="",this.atrEmail="",this.atrPassword=""}ngOnInit(){}signIn(t){this.authService.SignIn(t.email,t.password).then(()=>this.router.navigateByUrl("page/home")).catch(r=>this.error=r.message)}rellenarConPaciente(){this.atrEmail="paciente@valido.com",this.atrPassword="123456"}rellenarConEspecialista(){this.atrEmail="especialista@valido.com",this.atrPassword="123456"}rellenarConAdministrador(){this.atrEmail="administrador@valido.com",this.atrPassword="123456"}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zi),g.Y36(TT))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:30,vars:3,consts:[["id","bienvenida-contenedor",1,"d-flex","justify-content-center","align-items-center"],[1,"text-white","text-center","p-5",2,"background","rgba(0, 0, 0, .7)","border-radius",".6rem"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"fw-bold","mb-4","text-uppercase"],[1,"form-outline","form-white","mb-4"],["name","email","required","","type","email",1,"form-control","form-control-lg",3,"ngModel"],[1,"form-label"],["name","password","required","","type","password",1,"form-control","form-control-lg",3,"ngModel"],[1,"d-flex","flex-column","align-items-center"],["type","button",1,"btn","btn-secondary","mb-4",3,"click"],["type","button",1,"btn","btn-secondary","mb-5",3,"click"],["type","submit",1,"btn","btn-outline-light","btn-lg","px-5"],[2,"height","2rem","margin-top","1rem"],["class","help-block text-danger",4,"ngIf"],[1,"mb-0"],["href","registro",1,"text-white-50","fw-bold"],[1,"help-block","text-danger"]],template:function(t,r){if(1&t){const o=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"form",2,3),g.NdJ("ngSubmit",function(){g.CHM(o);const d=g.MAs(3);return r.signIn(d.value)}),g.TgZ(4,"h2",4),g._uU(5,"Login"),g.qZA(),g.TgZ(6,"div",5),g._UZ(7,"input",6),g.TgZ(8,"label",7),g._uU(9,"Email"),g.qZA()(),g.TgZ(10,"div",5),g._UZ(11,"input",8),g.TgZ(12,"label",7),g._uU(13,"Contrase\xf1a"),g.qZA()(),g.TgZ(14,"div",9)(15,"button",10),g.NdJ("click",function(){return r.rellenarConPaciente()}),g._uU(16,"Acceso paciente"),g.qZA(),g.TgZ(17,"button",10),g.NdJ("click",function(){return r.rellenarConEspecialista()}),g._uU(18,"Acceso especialista"),g.qZA(),g.TgZ(19,"button",11),g.NdJ("click",function(){return r.rellenarConAdministrador()}),g._uU(20,"Acceso administrador"),g.qZA()(),g.TgZ(21,"button",12),g._uU(22,"Ingresar"),g.qZA()(),g.TgZ(23,"div",13),g.YNc(24,gO,2,1,"span",14),g.qZA(),g.TgZ(25,"div")(26,"p",15),g._uU(27," \xbfNo tienes una cuenta? "),g.qZA(),g.TgZ(28,"a",16),g._uU(29,"Reg\xedstrate"),g.qZA()()()()}2&t&&(g.xp6(7),g.Q6J("ngModel",r.atrEmail),g.xp6(4),g.Q6J("ngModel",r.atrPassword),g.xp6(13),g.Q6J("ngIf",r.error))},directives:[Th,Cs,Iu,Pi,Oa,to,Qc,kn],styles:[""]}),n})(),yO=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-registro-paciente"]],decls:2,vars:0,template:function(t,r){1&t&&(g.TgZ(0,"p"),g._uU(1,"registro-paciente works!"),g.qZA())},styles:[""]}),n})();function _O(n,e){1&n&&(g.TgZ(0,"span",29),g._uU(1," Nombre requerido "),g.qZA())}function vO(n,e){1&n&&(g.TgZ(0,"span",29),g._uU(1," Apellido requerido "),g.qZA())}function EO(n,e){1&n&&(g.TgZ(0,"span",29),g._uU(1," Edad inv\xe1lida "),g.qZA())}function wO(n,e){1&n&&(g.TgZ(0,"span",29),g._uU(1," DNI inv\xe1lido "),g.qZA())}function IO(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",30)(1,"input",31),g.NdJ("change",function(o){return g.CHM(t),g.oxw().onChangeEspecialidad(o)}),g.qZA(),g.TgZ(2,"label",32),g._uU(3),g.qZA()()}if(2&n){const t=e.$implicit;g.xp6(1),g.Q6J("value",t),g.xp6(2),g.hij(" ",t," ")}}function DO(n,e){if(1&n&&(g.TgZ(0,"div",33),g._UZ(1,"input",34),g.qZA()),2&n){const t=e.index;g.xp6(1),g.Q6J("formControlName",t)}}function bO(n,e){1&n&&(g.TgZ(0,"span",29),g._uU(1," Email requerido "),g.qZA())}function CO(n,e){1&n&&(g.TgZ(0,"span",29),g._uU(1," Contrase\xf1a requerida "),g.qZA())}const TO=function(n){return{disabled:n}};let AO=(()=>{class n{constructor(t,r){this.router=t,this.authService=r,this.especialidades=["General","Nutrici\xf3n","Dermatolog\xeda","Traumatolog\xeda"],this.error=""}get nombre(){return this.signupForm.get("nombre")}get apellido(){return this.signupForm.get("apellido")}get edad(){return this.signupForm.get("edad")}get dni(){return this.signupForm.get("dni")}get email(){return this.signupForm.get("email")}get clave(){return this.signupForm.get("clave")}ngOnInit(){this.signupForm=new wl({nombre:new pr(null,[tn.required,this.emptyValidator]),apellido:new pr(null,[tn.required,this.emptyValidator]),edad:new pr(null,[tn.required,tn.min(18),tn.max(99)]),dni:new pr(null,[tn.required,tn.max(99999999)]),especialidades:new Il([]),email:new pr(null,[tn.required,tn.max(99999999)]),clave:new pr(null,[tn.required,tn.max(99999999)])})}onAddEspecialidad(){const t=new pr(null);this.signupForm.get("especialidades").push(t)}onChangeEspecialidad(t){const o=t.target.value;if(t.target.checked){const u=new pr(o,tn.required);this.signupForm.get("especialidades").push(u)}else{const u=this.signupForm.get("especialidades").value.findIndex(d=>d===o);this.signupForm.get("especialidades").removeAt(u)}}emptyValidator(t){const r=t.value;return r&&0===r.trim().length?{emptyField:!0}:null}onSubmit(){console.log(this.signupForm.value)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zi),g.Y36(TT))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-registro-especialista"]],decls:61,vars:12,consts:[[1,"d-flex","justify-content-center","mb-4"],[3,"formGroup","ngSubmit"],[1,"d-flex"],[2,"margin-right","2rem"],["for","nombre"],["type","text","id","nombre","formControlName","nombre","required","",1,"form-control"],[2,"height","2rem"],["class","help-block text-danger",4,"ngIf"],["for","apellido"],["type","text","id","apellido","formControlName","apellido","required","",1,"form-control"],["for","edad"],["type","number","id","edad","formControlName","edad","required","",1,"form-control"],["for","dni"],["type","number","id","dni","formControlName","dni","required","",1,"form-control"],[1,"d-flex","justify-content-center","mb-3"],[2,"margin-right","2rem","width","50%"],["class","form-check",4,"ngFor","ngForOf"],["formArrayName","especialidades"],["class","form-group",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-success","rounded-circle",3,"click"],[2,"margin-top","1rem"],["for","email"],["type","text","id","email","formControlName","email","required","",1,"form-control"],[2,"margin-bottom","2rem"],["for","clave"],["type","password","id","clave","formControlName","clave","required","",1,"form-control"],[1,"btn","btn-primary",3,"ngClass"],[1,"fas","fa-plus-circle"],[1,"help-block","text-danger"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"value","change"],[1,"form-check-label"],[1,"form-group"],["type","text",1,"form-control","my-2",2,"font-size",".8rem",3,"formControlName"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"h2"),g._uU(2,"Registro de especialistas"),g.qZA()(),g.TgZ(3,"form",1),g.NdJ("ngSubmit",function(){return r.onSubmit()}),g.TgZ(4,"div",2)(5,"div",3)(6,"label",4),g._uU(7," Nombre "),g.qZA(),g._UZ(8,"input",5),g.TgZ(9,"div",6),g.YNc(10,_O,2,0,"span",7),g.qZA()(),g.TgZ(11,"div")(12,"label",8),g._uU(13," Apellido "),g.qZA(),g._UZ(14,"input",9),g.TgZ(15,"div",6),g.YNc(16,vO,2,0,"span",7),g.qZA()()(),g.TgZ(17,"div",2)(18,"div",3)(19,"label",10),g._uU(20," Edad "),g.qZA(),g._UZ(21,"input",11),g.TgZ(22,"div",6),g.YNc(23,EO,2,0,"span",7),g.qZA()(),g.TgZ(24,"div")(25,"label",12),g._uU(26," DNI "),g.qZA(),g._UZ(27,"input",13),g.TgZ(28,"div",6),g.YNc(29,wO,2,0,"span",7),g.qZA()()(),g.TgZ(30,"div",14)(31,"h4"),g._uU(32,"Especialidades"),g.qZA()(),g.TgZ(33,"div",2)(34,"div",15)(35,"h6"),g._uU(36,"Opciones:"),g.qZA(),g.YNc(37,IO,4,2,"div",16),g.qZA(),g.TgZ(38,"div",17)(39,"h6"),g._uU(40,"Selecci\xf3n:"),g.qZA(),g.YNc(41,DO,2,1,"div",18),g.TgZ(42,"div",19)(43,"button",20),g.NdJ("click",function(){return r.onAddEspecialidad()}),g._uU(44,"+"),g.qZA()()()(),g.TgZ(45,"div",21)(46,"label",22),g._uU(47," Email "),g.qZA(),g._UZ(48,"input",23),g.TgZ(49,"div",6),g.YNc(50,bO,2,0,"span",7),g.qZA()(),g.TgZ(51,"div",24)(52,"label",25),g._uU(53," Contrase\xf1a "),g.qZA(),g._UZ(54,"input",26),g.TgZ(55,"div",6),g.YNc(56,CO,2,0,"span",7),g.qZA()(),g.TgZ(57,"div",19)(58,"button",27),g._uU(59," Enviar"),g._UZ(60,"i",28),g.qZA()()()),2&t&&(g.xp6(3),g.Q6J("formGroup",r.signupForm),g.xp6(7),g.Q6J("ngIf",!(null!=r.nombre&&r.nombre.valid)&&(null==r.nombre?null:r.nombre.touched)),g.xp6(6),g.Q6J("ngIf",!(null!=r.apellido&&r.apellido.valid)&&(null==r.apellido?null:r.apellido.touched)),g.xp6(7),g.Q6J("ngIf",!(null!=r.edad&&r.edad.valid)&&(null==r.edad?null:r.edad.touched)),g.xp6(6),g.Q6J("ngIf",!(null!=r.dni&&r.dni.valid)&&(null==r.dni?null:r.dni.touched)),g.xp6(8),g.Q6J("ngForOf",r.especialidades),g.xp6(4),g.Q6J("ngForOf",r.signupForm.get("especialidades").controls),g.xp6(9),g.Q6J("ngIf",!(null!=r.email&&r.email.valid)&&(null==r.email?null:r.email.touched)),g.xp6(6),g.Q6J("ngIf",!(null!=r.clave&&r.clave.valid)&&(null==r.clave?null:r.clave.touched)),g.xp6(2),g.Q6J("ngClass",g.VKq(10,TO,!r.signupForm.valid)))},directives:[Th,Cs,bl,Pi,to,Jc,Oa,kn,Ah,Bn,Rh,bi],styles:[""]}),n})();function SO(n,e){1&n&&(g.TgZ(0,"div",6),g._UZ(1,"app-registro-paciente"),g.qZA())}function MO(n,e){1&n&&(g.TgZ(0,"div",6),g._UZ(1,"app-registro-especialista"),g.qZA())}const gM=function(n){return{active:n}},xO=[{path:"",redirectTo:"bienvenida",pathMatch:"full"},{path:"bienvenida",component:pO},{path:"login",component:mO},{path:"registro",component:(()=>{class n{constructor(t,r){this.router=t,this.authService=r,this.juegos=["Ahorcado","Mayor o Menor","Preguntados","Alcohol\xedmetro"],this.esPaciente=!1,this.error=""}ngOnInit(){this.encuestaForm=new wl({nombre:new pr(null,[tn.required,this.emptyValidator]),apellido:new pr(null,[tn.required,this.emptyValidator]),edad:new pr(null,[tn.required,tn.min(18),tn.max(99)]),dni:new pr(null,[tn.required,tn.max(99999999)]),juego:new pr(null,[tn.required]),meGusta:new pr(!1),comentario:new pr(null,[tn.required,this.emptyValidator])})}get nombre(){return this.encuestaForm.get("nombre")}get apellido(){return this.encuestaForm.get("apellido")}get edad(){return this.encuestaForm.get("edad")}get dni(){return this.encuestaForm.get("dni")}get juego(){return this.encuestaForm.get("juego")}get meGusta(){return this.encuestaForm.get("meGusta")}get comentario(){return this.encuestaForm.get("comentario")}emptyValidator(t){const r=t.value;return r&&0===r.trim().length?{emptyField:!0}:null}onSubmit(){console.log("Submit")}signUp(t){this.authService.SignUp(t.email,t.password).then(()=>this.router.navigateByUrl("page/home")).catch(r=>this.error=r.message)}clickPacienteHandler(){this.esPaciente=!0}clickEspecialistaHandler(){this.esPaciente=!1}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zi),g.Y36(TT))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-registro"]],decls:10,vars:8,consts:[["id","bienvenida-contenedor",1,"d-flex","justify-content-center","align-items-center"],[1,"text-white",2,"background","rgba(0, 0, 0, .7)","border-radius",".6rem"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","rounded-3"],[1,"container-fluid","navbar-nav"],[1,"nav-link","m-auto",3,"ngClass","click"],["style","width: 30rem; padding: 2rem 3rem",4,"ngIf"],[2,"width","30rem","padding","2rem 3rem"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"div",3)(4,"a",4),g.NdJ("click",function(){return r.clickPacienteHandler()}),g._uU(5,"Paciente"),g.qZA(),g.TgZ(6,"a",4),g.NdJ("click",function(){return r.clickEspecialistaHandler()}),g._uU(7,"Especialista"),g.qZA()()(),g.YNc(8,SO,2,0,"div",5),g.YNc(9,MO,2,0,"div",5),g.qZA()()),2&t&&(g.xp6(4),g.Q6J("ngClass",g.VKq(4,gM,r.esPaciente)),g.xp6(2),g.Q6J("ngClass",g.VKq(6,gM,!r.esPaciente)),g.xp6(2),g.Q6J("ngIf",r.esPaciente),g.xp6(1),g.Q6J("ngIf",!r.esPaciente))},directives:[bi,kn,yO,AO],styles:["a[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),n})()}];let RO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[hM.forRoot(xO)],hM]}),n})(),NO=(()=>{class n{constructor(){this.title="clinica"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[_T],styles:[""]}),n})(),OO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[NO]}),n.\u0275inj=g.cJS({providers:[],imports:[[ya,RO,Cl,jr,gr.hO.initializeApp(Hn_firebase),BD,rR]]}),n})();(0,g.G48)(),hu().bootstrapModule(OO).catch(n=>console.error(n))},5867:(Qe,Ee,O)=>{O.d(Ee,{Mq:()=>g.getApp,C6:()=>g.getApps});var g=O(9681);(0,g.registerVersion)("firebase","9.8.2","app")},127:(Qe,Ee,O)=>{O.d(Ee,{Z:()=>g.Z});var g=O(3942);g.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Qe,Ee,O)=>{O.r(Ee);var g=O(5861),J=O(3942),P=O(2090),ae=O(9681),ne=O(655),fe=O(1877),ue=O(4859);const Re=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new fe.Yd("@firebase/auth");function Ze(y,...h){qe.logLevel<=fe.in.ERROR&&qe.error(`Auth (${ae.SDK_VERSION}): ${y}`,...h)}function Ce(y,...h){throw Ve(y,...h)}function ve(y,...h){return Ve(y,...h)}function we(y,h,p){const v=Object.assign(Object.assign({},Le()),{[h]:p});return new P.LL("auth","Firebase",v).create(h,{appName:y.name})}function Be(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ce(y,"argument-error"),we(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return he.create(y,...h)}function B(y,h,...p){if(!y)throw Ve(h,...p)}function _e(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ze(h),new Error(h)}function Z(y,h){y||_e(h)}const re=new Map;function X(y){Z(y instanceof Function,"Expected a class definition");let h=re.get(y);return h?(Z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,re.set(y,h),h)}function Ne(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function st(){return"http:"===Ot()||"https:"===Ot()}function Ot(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Wt{constructor(h,p){this.shortDelay=h,this.longDelay=p,Z(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Mt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(st()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dn(y,h){Z(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Yt{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},_r=new Wt(3e4,6e4);function Ut(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function St(y,h,p,v){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,g.Z)(function*(y,h,p,v,T={}){return Zr(y,T,(0,g.Z)(function*(){let R={},W={};v&&("GET"===h?W=v:R={body:JSON.stringify(v)});const pe=(0,P.xO)(Object.assign({key:y.config.apiKey},W)).slice(1),G=yield y._getAdditionalHeaders();return G["Content-Type"]="application/json",y.languageCode&&(G["X-Firebase-Locale"]=y.languageCode),Yt.fetch()(hs(y,y.config.apiHost,p,pe),Object.assign({method:h,headers:G,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Zr(y,h,p){return sr.apply(this,arguments)}function sr(){return(sr=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Gt),h);try{const T=new Kr(y),R=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const W=yield R.json();if("needConfirmation"in W)throw li(y,"account-exists-with-different-credential",W);if(R.ok&&!("errorMessage"in W))return W;{const pe=R.ok?W.errorMessage:W.error.message,[G,je]=pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===G)throw li(y,"credential-already-in-use",W);if("EMAIL_EXISTS"===G)throw li(y,"email-already-in-use",W);if("USER_DISABLED"===G)throw li(y,"user-disabled",W);const ot=v[G]||G.toLowerCase().replace(/[_\s]+/g,"-");if(je)throw we(y,ot,je);Ce(y,ot)}}catch(T){if(T instanceof P.ZR)throw T;Ce(y,"network-request-failed")}})).apply(this,arguments)}function vr(y,h,p,v){return wi.apply(this,arguments)}function wi(){return(wi=(0,g.Z)(function*(y,h,p,v,T={}){const R=yield St(y,h,p,v,T);return"mfaPendingCredential"in R&&Ce(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function hs(y,h,p,v){const T=`${h}${p}?${v}`;return y.config.emulator?Dn(y.config,T):`${y.config.apiScheme}://${T}`}class Kr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(ve(this.auth,"network-request-failed")),_r.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function li(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=ve(y,h,v);return T.customData._tokenResponse=p,T}function Yr(){return(Yr=(0,g.Z)(function*(y,h){return St(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function _n(y,h){return bn.apply(this,arguments)}function bn(){return(bn=(0,g.Z)(function*(y,h){return St(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Bs(y,h){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(y,h){return St(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Un(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function mo(){return(mo=(0,g.Z)(function*(y,h=!1){const p=(0,P.m9)(y),v=yield p.getIdToken(h),T=rt(v);B(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,W=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:Un(Pt(T.auth_time)),issuedAtTime:Un(Pt(T.iat)),expirationTime:Un(Pt(T.exp)),signInProvider:W||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Pt(y){return 1e3*Number(y)}function rt(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(p);return T?JSON.parse(T):(Ze("Failed to decode base64 JWT payload"),null)}catch(T){return Ze("Caught error parsing JWT payload as JSON",T),null}}function or(y,h){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof P.ZR&&xt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function xt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class js{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class ar{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Un(this.lastLoginAt),this.creationTime=Un(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ur(y){return L.apply(this,arguments)}function L(){return(L=(0,g.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),T=yield or(y,Bs(p,{idToken:v}));B(null==T?void 0:T.users.length,p,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const W=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?$(R.providerUserInfo):[],pe=Ie(y.providerData,W),ot=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==pe?void 0:pe.length)),Oe={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:pe,metadata:new ar(R.createdAt,R.lastLoginAt),isAnonymous:ot};Object.assign(y,Oe)})).apply(this,arguments)}function q(){return(q=(0,g.Z)(function*(y){const h=(0,P.m9)(y);yield ur(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ie(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function $(y){return y.map(h=>{var{providerId:p}=h,v=(0,ne._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Se(){return(Se=(0,g.Z)(function*(y,h){const p=yield Zr(y,{},(0,g.Z)(function*(){const v=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,W=hs(y,T,"/v1/token",`key=${R}`),pe=yield y._getAdditionalHeaders();return pe["Content-Type"]="application/x-www-form-urlencoded",Yt.fetch()(W,{method:"POST",headers:pe,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){B(h.idToken,"internal-error"),B(void 0!==h.idToken,"internal-error"),B(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function ht(y){const h=rt(y);return B(h,"internal-error"),B(void 0!==h.exp,"internal-error"),B(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,g.Z)(function*(){return B(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:W}=yield function Q(y,h){return Se.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(T,R,Number(W))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:T,expirationTime:R}=p,W=new Ye;return v&&(B("string"==typeof v,"internal-error",{appName:h}),W.refreshToken=v),T&&(B("string"==typeof T,"internal-error",{appName:h}),W.accessToken=T),R&&(B("number"==typeof R,"internal-error",{appName:h}),W.expirationTime=R),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ye,this.toJSON())}_performRefresh(){return _e("not implemented")}}function ut(y,h){B("string"==typeof y||void 0===y,"internal-error",{appName:h})}class _t{constructor(h){var{uid:p,auth:v,stsTokenManager:T}=h,R=(0,ne._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new js(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ar(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const v=yield or(p,p.stsTokenManager.getToken(p.auth,h));return B(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function ci(y){return mo.apply(this,arguments)}(this,h)}reload(){return function H(y){return q.apply(this,arguments)}(this)}_assign(h){this!==h&&(B(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new _t(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,g.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield ur(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield or(h,function ct(y,h){return Yr.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,T,R,W,pe,G,je,ot;const Oe=null!==(v=p.displayName)&&void 0!==v?v:void 0,Xt=null!==(T=p.email)&&void 0!==T?T:void 0,si=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,Rl=null!==(W=p.photoURL)&&void 0!==W?W:void 0,by=null!==(pe=p.tenantId)&&void 0!==pe?pe:void 0,cn=null!==(G=p._redirectEventId)&&void 0!==G?G:void 0,oi=null!==(je=p.createdAt)&&void 0!==je?je:void 0,Tu=null!==(ot=p.lastLoginAt)&&void 0!==ot?ot:void 0,{uid:Nl,emailVerified:sd,isAnonymous:rg,providerData:$h,stsTokenManager:Hh}=p;B(Nl&&Hh,h,"internal-error");const Cy=Ye.fromJSON(this.name,Hh);B("string"==typeof Nl,h,"internal-error"),ut(Oe,h.name),ut(Xt,h.name),B("boolean"==typeof sd,h,"internal-error"),B("boolean"==typeof rg,h,"internal-error"),ut(si,h.name),ut(Rl,h.name),ut(by,h.name),ut(cn,h.name),ut(oi,h.name),ut(Tu,h.name);const Gh=new _t({uid:Nl,auth:h,email:Xt,emailVerified:sd,displayName:Oe,isAnonymous:rg,photoURL:Rl,phoneNumber:si,tenantId:by,stsTokenManager:Cy,createdAt:oi,lastLoginAt:Tu});return $h&&Array.isArray($h)&&(Gh.providerData=$h.map(Ty=>Object.assign({},Ty))),cn&&(Gh._redirectEventId=cn),Gh}static _fromIdTokenResponse(h,p,v=!1){return(0,g.Z)(function*(){const T=new Ye;T.updateFromServerResponse(p);const R=new _t({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield ur(R),R})()}}const mt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,g.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function Nn(y,h,p){return`firebase:${y}:${h}:${p}`}class Er{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=Nn(this.userKey,T.apiKey,R),this.fullPersistenceKey=Nn("persistence",T.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?_t._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new Er(X(mt),h,v);const T=(yield Promise.all(p.map(function(){var je=(0,g.Z)(function*(ot){if(yield ot._isAvailable())return ot});return function(ot){return je.apply(this,arguments)}}()))).filter(je=>je);let R=T[0]||X(mt);const W=Nn(v,h.config.apiKey,h.name);let pe=null;for(const je of p)try{const ot=yield je._get(W);if(ot){const Oe=_t._fromJSON(h,ot);je!==R&&(pe=Oe),R=je;break}}catch(ot){}const G=T.filter(je=>je._shouldAllowMigration);return R._shouldAllowMigration&&G.length?(R=G[0],pe&&(yield R._set(W,pe.toJSON())),yield Promise.all(p.map(function(){var je=(0,g.Z)(function*(ot){if(ot!==R)try{yield ot._remove(W)}catch(Oe){}});return function(ot){return je.apply(this,arguments)}}())),new Er(R,h,v)):new Er(R,h,v)})()}}function eu(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(On(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(na(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ki(h))return"Blackberry";if(Pn(h))return"Webos";if(tu(h))return"Safari";if((h.includes("chrome/")||ra(h))&&!h.includes("edge/"))return"Chrome";if(wr(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function na(y=(0,P.z$)()){return/firefox\//i.test(y)}function tu(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function ra(y=(0,P.z$)()){return/crios\//i.test(y)}function On(y=(0,P.z$)()){return/iemobile/i.test(y)}function wr(y=(0,P.z$)()){return/android/i.test(y)}function Ki(y=(0,P.z$)()){return/blackberry/i.test(y)}function Pn(y=(0,P.z$)()){return/webos/i.test(y)}function Or(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)}function fs(y=(0,P.z$)()){return Or(y)||wr(y)||Pn(y)||Ki(y)||/windows phone/i.test(y)||On(y)}function yo(y,h=[]){let p;switch(y){case"Browser":p=eu((0,P.z$)());break;case"Worker":p=`${eu((0,P.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ae.SDK_VERSION}/${v}`}class Pr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const v=R=>new Promise((W,pe)=>{try{W(h(R))}catch(G){pe(G)}});v.onAbort=p,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){if(p.auth.currentUser===h)return;const v=[];try{for(const T of p.queue)yield T(h),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const R of v)try{R()}catch(W){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class ze{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kt(this),this.idTokenSubscription=new Kt(this),this.beforeStateQueue=new Pr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=X(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield Er.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(W){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var v;const T=yield p.assertedPersistence.getCurrentUser();let R=T,W=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const pe=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,G=null==R?void 0:R._redirectEventId,je=yield p.tryRedirectSignIn(h);(!pe||pe===G)&&(null==je?void 0:je.user)&&(R=je.user,W=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(W)try{yield p.beforeStateQueue.runMiddleware(R)}catch(pe){R=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(pe))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return B(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(T){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield ur(h)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ke(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const v=h?(0,P.m9)(h):null;return v&&B(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h,p=!1){var v=this;return(0,g.Z)(function*(){if(!v._deleted)return h&&B(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),p||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,g.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(X(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,g.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&X(h)||p._popupRedirectResolver;B(v,p,"argument-error"),p.redirectPersistenceManager=yield Er.create(p,[X(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,T){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),W=this._isInitialized?Promise.resolve():this._initializationPromise;return B(W,this,"internal-error"),W.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,v,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=yo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function it(y){return(0,P.m9)(y)}class Kt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ii(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Di(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class di{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return _e("not implemented")}_getIdTokenResponse(h){return _e("not implemented")}_linkToIdToken(h,p){return _e("not implemented")}_getReauthenticationResolver(h){return _e("not implemented")}}function Cn(y,h){return Et.apply(this,arguments)}function Et(){return(Et=(0,g.Z)(function*(y,h){return St(y,"POST","/v1/accounts:resetPassword",Ut(y,h))})).apply(this,arguments)}function sa(y,h){return bi.apply(this,arguments)}function bi(){return(bi=(0,g.Z)(function*(y,h){return St(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function nu(y,h){return ps.apply(this,arguments)}function ps(){return(ps=(0,g.Z)(function*(y,h){return St(y,"POST","/v1/accounts:update",Ut(y,h))})).apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(y,h){return vr(y,"POST","/v1/accounts:signInWithPassword",Ut(y,h))})).apply(this,arguments)}function gs(y,h){return kn.apply(this,arguments)}function kn(){return(kn=(0,g.Z)(function*(y,h){return St(y,"POST","/v1/accounts:sendOobCode",Ut(y,h))})).apply(this,arguments)}function Qt(y,h){return ru.apply(this,arguments)}function ru(){return(ru=(0,g.Z)(function*(y,h){return gs(y,h)})).apply(this,arguments)}function oa(y,h){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,g.Z)(function*(y,h){return gs(y,h)})).apply(this,arguments)}function Ci(y,h){return iu.apply(this,arguments)}function iu(){return(iu=(0,g.Z)(function*(y,h){return gs(y,h)})).apply(this,arguments)}function wc(y,h){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,g.Z)(function*(y,h){return gs(y,h)})).apply(this,arguments)}function Yu(){return(Yu=(0,g.Z)(function*(y,h){return vr(y,"POST","/v1/accounts:signInWithEmailLink",Ut(y,h))})).apply(this,arguments)}function Ic(){return(Ic=(0,g.Z)(function*(y,h){return vr(y,"POST","/v1/accounts:signInWithEmailLink",Ut(y,h))})).apply(this,arguments)}class lr extends di{constructor(h,p,v,T=null){super("password",v),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new lr(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new lr(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function Bn(y,h){return Hs.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ai(y,h){return Yu.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ce(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return sa(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Dp(y,h){return Ic.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:Ce(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function ms(y,h){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,g.Z)(function*(y,h){return vr(y,"POST","/v1/accounts:signInWithIdp",Ut(y,h))})).apply(this,arguments)}class Yi extends di{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Yi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ce("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=p,R=(0,ne._T)(p,["providerId","signInMethod"]);if(!v||!T)return null;const W=new Yi(v,T);return W.idToken=R.idToken||void 0,W.accessToken=R.accessToken||void 0,W.secret=R.secret,W.nonce=R.nonce,W.pendingToken=R.pendingToken||null,W}_getIdTokenResponse(h){return ms(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,ms(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,ms(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,P.xO)(p)}return h}}function Cp(y,h){return bc.apply(this,arguments)}function bc(){return(bc=(0,g.Z)(function*(y,h){return St(y,"POST","/v1/accounts:sendVerificationCode",Ut(y,h))})).apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,h){return vr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ut(y,h))})).apply(this,arguments)}function Cc(){return(Cc=(0,g.Z)(function*(y,h){const p=yield vr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ut(y,h));if(p.temporaryProof)throw li(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Ap={USER_NOT_FOUND:"user-not-found"};function Tc(){return(Tc=(0,g.Z)(function*(y,h){return vr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ut(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Ap)})).apply(this,arguments)}class _o extends di{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new _o({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new _o({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Qu(y,h){return ys.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Tp(y,h){return Cc.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Sp(y,h){return Tc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}=h;return v||p||T||R?new _o({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class su{constructor(h){var p,v,T,R,W,pe;const G=(0,P.zd)((0,P.pd)(h)),je=null!==(p=G.apiKey)&&void 0!==p?p:null,ot=null!==(v=G.oobCode)&&void 0!==v?v:null,Oe=function oh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=G.mode)&&void 0!==T?T:null);B(je&&ot&&Oe,"argument-error"),this.apiKey=je,this.operation=Oe,this.code=ot,this.continueUrl=null!==(R=G.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(W=G.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(pe=G.tenantId)&&void 0!==pe?pe:null}static parseLink(h){const p=function aa(y){const h=(0,P.zd)((0,P.pd)(y)).link,p=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,v=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(v?(0,P.zd)((0,P.pd)(v)).link:null)||v||p||h||y}(h);try{return new su(p)}catch(v){return null}}}let Sc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return lr._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=su.parseLink(v);return B(T,"argument-error"),lr._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class cr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Gs extends cr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Si extends Gs{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return B("providerId"in p&&"signInMethod"in p,"argument-error"),Yi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return B(h.idToken||h.accessToken,"argument-error"),Yi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Si.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Si.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:W,providerId:pe}=h;if(!v&&!T&&!p&&!R||!pe)return null;try{return new Si(pe)._credential({idToken:p,accessToken:v,nonce:W,pendingToken:R})}catch(G){return null}}}let vo=(()=>{class y extends Gs{constructor(){super("facebook.com")}static credential(p){return Yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Mc=(()=>{class y extends Gs{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ah=(()=>{class y extends Gs{constructor(){super("github.com")}static credential(p){return Yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class qs extends di{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return ms(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,ms(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,ms(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:R}=p;return v&&T&&R&&v===T?new qs(v,R):null}static _create(h,p){return new qs(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ir extends cr{constructor(h){B(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ir.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ir.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=qs.fromJSON(h);return B(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return qs._create(v,p)}catch(T){return null}}}let Rc=(()=>{class y extends Gs{constructor(){super("twitter.com")}static credential(p,v){return Yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Dr(y,h){return wo.apply(this,arguments)}function wo(){return(wo=(0,g.Z)(function*(y,h){return vr(y,"POST","/v1/accounts:signUp",Ut(y,h))})).apply(this,arguments)}class Xr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,T=!1){return(0,g.Z)(function*(){const R=yield _t._fromIdTokenResponse(h,v,T),W=Ju(v);return new Xr({user:R,providerId:W,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=Ju(v);return new Xr({user:h,providerId:T,_tokenResponse:v,operationType:p})})()}}function Ju(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Xu(){return(Xu=(0,g.Z)(function*(y){var h;const p=it(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new Xr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Dr(p,{returnSecureToken:!0}),T=yield Xr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class Io extends P.ZR{constructor(h,p,v,T){var R;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,Io.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,T){return new Io(h,p,v,T)}}function el(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Io._fromErrorAndOperation(y,R,h,v):R})}function Mi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Jt(){return(Jt=(0,g.Z)(function*(y,h){const p=(0,P.m9)(y);yield qt(!0,p,h);const{providerUserInfo:v}=yield _n(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=Mi(v||[]);return p.providerData=p.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function ua(y,h){return zs.apply(this,arguments)}function zs(){return(zs=(0,g.Z)(function*(y,h,p=!1){const v=yield or(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Xr._forOperation(y,"link",v)})).apply(this,arguments)}function qt(y,h,p){return la.apply(this,arguments)}function la(){return(la=(0,g.Z)(function*(y,h,p){yield ur(h);const T=!1===y?"provider-already-linked":"no-such-provider";B(Mi(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function ou(y,h){return _s.apply(this,arguments)}function _s(){return(_s=(0,g.Z)(function*(y,h,p=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield or(y,el(v,T,h,y),p);B(R.idToken,v,"internal-error");const W=rt(R.idToken);B(W,v,"internal-error");const{sub:pe}=W;return B(y.uid===pe,v,"user-mismatch"),Xr._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Ce(v,"user-mismatch"),R}})).apply(this,arguments)}function Zn(y,h){return tl.apply(this,arguments)}function tl(){return(tl=(0,g.Z)(function*(y,h,p=!1){const v="signIn",T=yield el(y,v,h),R=yield Xr._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function dn(y,h){return xi.apply(this,arguments)}function xi(){return(xi=(0,g.Z)(function*(y,h){return Zn(it(y),h)})).apply(this,arguments)}function Kn(y,h){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,g.Z)(function*(y,h){const p=(0,P.m9)(y);return yield qt(!1,p,h.providerId),ua(p,h)})).apply(this,arguments)}function Qi(y,h){return ca.apply(this,arguments)}function ca(){return(ca=(0,g.Z)(function*(y,h){return ou((0,P.m9)(y),h)})).apply(this,arguments)}function hi(y,h){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,g.Z)(function*(y,h){return vr(y,"POST","/v1/accounts:signInWithCustomToken",Ut(y,h))})).apply(this,arguments)}function lt(){return(lt=(0,g.Z)(function*(y,h){const p=it(y),v=yield hi(p,{token:h,returnSecureToken:!0}),T=yield Xr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class bo{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?au._fromServerResponse(h,p):Ce(h,"internal-error")}}class au extends bo{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new au(p)}}function da(y,h,p){var v;B((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),B(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(B(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(B(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function ha(){return(ha=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),T={requestType:"PASSWORD_RESET",email:h};p&&da(v,T,p),yield oa(v,T)})).apply(this,arguments)}function il(){return(il=(0,g.Z)(function*(y,h,p){yield Cn((0,P.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function bt(){return(bt=(0,g.Z)(function*(y,h){yield nu((0,P.m9)(y),{oobCode:h})})).apply(this,arguments)}function uu(y,h){return an.apply(this,arguments)}function an(){return(an=(0,g.Z)(function*(y,h){const p=(0,P.m9)(y),v=yield Cn(p,{oobCode:h}),T=v.requestType;switch(B(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(v.mfaInfo,p,"internal-error");default:B(v.email,p,"internal-error")}let R=null;return v.mfaInfo&&(R=bo._fromServerResponse(it(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function Zs(){return(Zs=(0,g.Z)(function*(y,h){const{data:p}=yield uu((0,P.m9)(y),h);return p.email})).apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(y,h,p){const v=it(y),T=yield Dr(v,{returnSecureToken:!0,email:h,password:p}),R=yield Xr._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function lu(){return(lu=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};B(p.handleCodeInApp,v,"argument-error"),p&&da(v,T,p),yield Ci(v,T)})).apply(this,arguments)}function Tn(){return(Tn=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),T=Sc.credentialWithLink(h,p||Ne());return B(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),dn(v,T)})).apply(this,arguments)}function Ji(y,h){return ga.apply(this,arguments)}function ga(){return(ga=(0,g.Z)(function*(y,h){return St(y,"POST","/v1/accounts:createAuthUri",Ut(y,h))})).apply(this,arguments)}function fi(){return(fi=(0,g.Z)(function*(y,h){const v={identifier:h,continueUri:st()?Ne():"http://localhost"},{signinMethods:T}=yield Ji((0,P.m9)(y),v);return T||[]})).apply(this,arguments)}function du(){return(du=(0,g.Z)(function*(y,h){const p=(0,P.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&da(p.auth,T,h);const{email:R}=yield Qt(p.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function hu(){return(hu=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&da(v.auth,R,p);const{email:W}=yield wc(v.auth,R);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function ma(y,h){return ya.apply(this,arguments)}function ya(){return(ya=(0,g.Z)(function*(y,h){return St(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function _a(){return(_a=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,P.m9)(y),R={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},W=yield or(v,ma(v.auth,R));v.displayName=W.displayName||null,v.photoURL=W.photoUrl||null;const pe=v.providerData.find(({providerId:G})=>"password"===G);pe&&(pe.displayName=v.displayName,pe.photoURL=v.photoURL),yield v._updateTokensIfNecessary(W)})).apply(this,arguments)}function To(y,h,p){return va.apply(this,arguments)}function va(){return(va=(0,g.Z)(function*(y,h,p){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const W=yield or(y,sa(v,R));yield y._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class Ao{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class Pc extends Ao{constructor(h,p,v,T){super(h,p,v),this.username=T}}class So extends Ao{constructor(h,p){super(h,"facebook.com",p)}}class Ni extends Pc{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class lh extends Ao{constructor(h,p){super(h,"google.com",p)}}class jn extends Pc{constructor(h,p,v){super(h,"twitter.com",p,v)}}function Oi(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Oc(y){var h,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const W=null===(p=null===(h=rt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(W)return new Ao(R,"anonymous"!==W&&"custom"!==W?W:null)}if(!v)return null;switch(v){case"facebook.com":return new So(R,T);case"github.com":return new Ni(R,T);case"google.com":return new lh(R,T);case"twitter.com":return new jn(R,T,y.screenName||null);case"custom":case"anonymous":return new Ao(R,null);default:return new Ao(R,v,T)}}(p)}class Xi{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new Xi("enroll",h)}static _fromMfaPendingCredential(h){return new Xi("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return Xi._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return Xi._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Mo{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=it(h),T=p.customData._serverResponse,R=(T.mfaInfo||[]).map(pe=>bo._fromServerResponse(v,pe));B(T.mfaPendingCredential,v,"internal-error");const W=Xi._fromMfaPendingCredential(T.mfaPendingCredential);return new Mo(W,R,function(){var pe=(0,g.Z)(function*(G){const je=yield G._process(v,W);delete T.mfaInfo,delete T.mfaPendingCredential;const ot=Object.assign(Object.assign({},T),{idToken:je.idToken,refreshToken:je.refreshToken});switch(p.operationType){case"signIn":const Oe=yield Xr._fromIdTokenResponse(v,p.operationType,ot);return yield v._updateCurrentUser(Oe.user),Oe;case"reauthenticate":return B(p.user,v,"internal-error"),Xr._forOperation(p.user,p.operationType,ot);default:Ce(v,"internal-error")}});return function(G){return pe.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function dh(y,h){return St(y,"POST","/v2/accounts/mfaEnrollment:start",Ut(y,h))}class Lc{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>bo._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Lc(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Xi._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,g.Z)(function*(){const T=h,R=yield v.getSession(),W=yield or(v.user,T._process(v.user.auth,R,p));return yield v.user._updateTokensIfNecessary(W),v.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield p.user.getIdToken(),R=yield or(p.user,function fu(y,h){return St(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ut(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:W})=>W!==v),yield p.user._updateTokensIfNecessary(R);try{yield p.user.reload()}catch(W){if("auth/user-token-expired"!==W.code)throw W}})()}}const pu=new WeakMap,Ys="__sak";class Vc{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Ys,"1"),this.storage.removeItem(Ys),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const wa=(()=>{class y extends Vc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Np(){const y=(0,P.z$)();return tu(y)||Or(y)}()&&function Wn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=fs(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&p(v,R,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((pe,G,je)=>{this.notifyListeners(pe,je)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pe=this.storage.getItem(T);if(p.newValue!==pe)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const R=()=>{const pe=this.storage.getItem(T);!v&&this.localCache[T]===pe||this.notifyListeners(T,pe)},W=this.storage.getItem(T);!function ia(){return(0,P.w1)()&&10===document.documentMode}()||W===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,R=this;return(0,g.Z)(function*(){yield T().call(R,p,v),R.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,g.Z)(function*(){const R=yield v().call(T,p);return T.localCache[p]=JSON.stringify(R),R})()}_remove(p){var v=()=>super._remove,T=this;return(0,g.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),pi=(()=>{class y extends Vc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let Bc=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(R=>R.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const T=p,{eventId:R,eventType:W,data:pe}=T.data,G=v.handlersMap[W];if(!(null==G?void 0:G.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:W});const je=Array.from(G).map(function(){var Oe=(0,g.Z)(function*(Xt){return Xt(T.origin,pe)});return function(Xt){return Oe.apply(this,arguments)}}()),ot=yield function mu(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(je);T.ports[0].postMessage({status:"done",eventId:R,eventType:W,response:ot})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Lr(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class ws{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var T=this;return(0,g.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let W,pe;return new Promise((G,je)=>{const ot=Lr("",20);R.port1.start();const Oe=setTimeout(()=>{je(new Error("unsupported_event"))},v);pe={messageChannel:R,onMessage(Xt){const si=Xt;if(si.data.eventId===ot)switch(si.data.status){case"ack":clearTimeout(Oe),W=setTimeout(()=>{je(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),G(si.data.response);break;default:clearTimeout(Oe),clearTimeout(W),je(new Error("invalid_response"))}}},T.handlers.add(pe),R.port1.addEventListener("message",pe.onMessage),T.target.postMessage({eventType:h,eventId:ot,data:p},[R.port2])}).finally(()=>{pe&&T.removeMessageHandler(pe)})})()}}function Tt(){return window}function Qs(){return void 0!==Tt().WorkerGlobalScope&&"function"==typeof Tt().importScripts}function Ia(){return(Ia=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const dl="firebaseLocalStorageDb",hr="firebaseLocalStorage",xo="fbase_key";class es{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function fr(y,h){return y.transaction([hr],h?"readwrite":"readonly").objectStore(hr)}function Da(){const y=indexedDB.open(dl,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(hr,{keyPath:xo})}catch(T){p(T)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(hr)?h(v):(v.close(),yield function $c(){const y=indexedDB.deleteDatabase(dl);return new es(y).toPromise()}(),h(yield Da()))}))})}function Pi(y,h,p){return ti.apply(this,arguments)}function ti(){return(ti=(0,g.Z)(function*(y,h,p){const v=fr(y,!0).put({[xo]:h,value:p});return new es(v).toPromise()})).apply(this,arguments)}function hn(){return(hn=(0,g.Z)(function*(y,h){const p=fr(y,!1).get(h),v=yield new es(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function gi(y,h){const p=fr(y,!0).delete(h);return new es(p).toPromise()}const Is=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Da()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield p(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return Qs()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=Bc._getInstance(function hh(){return Qs()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(T,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function jc(){return Ia.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new ws(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function cl(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Da();return yield Pi(p,Ys,"1"),yield gi(p,Ys),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(R=>Pi(R,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=yield v._withRetries(R=>function yu(y,h){return hn.apply(this,arguments)}(R,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(T=>gi(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries(W=>{const pe=fr(W,!1).getAll();return new es(pe).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:W,value:pe}of v)R.add(W),JSON.stringify(p.localCache[W])!==JSON.stringify(pe)&&(p.notifyListeners(W,pe),T.push(W));for(const W of Object.keys(p.localCache))p.localCache[W]&&!R.has(W)&&(p.notifyListeners(W,null),T.push(W));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function ba(y,h){return St(y,"POST","/v2/accounts/mfaSignIn:start",Ut(y,h))}function Ro(){return(Ro=(0,g.Z)(function*(y){return(yield St(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ds(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const R=ve("internal-error");R.customData=T,p(R)},v.type="text/javascript",v.charset="UTF-8",function No(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function ni(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Oo=1e12;class eo{constructor(h){this.auth=h,this.counter=Oo,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new Op(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||Oo;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Oo))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(h||Oo))||void 0===v||v.execute(),""})()}}class Op{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;B(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function _u(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const un=ni("rcb"),Hc=new Wt(3e4,6e4);class ph{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Tt().grecaptcha}load(h,p=""){return B(function gh(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Tt().grecaptcha):new Promise((v,T)=>{const R=Tt().setTimeout(()=>{T(ve(h,"network-request-failed"))},Hc.get());Tt()[un]=()=>{Tt().clearTimeout(R),delete Tt()[un];const pe=Tt().grecaptcha;if(!pe)return void T(ve(h,"internal-error"));const G=pe.render;pe.render=(je,ot)=>{const Oe=G(je,ot);return this.counter++,Oe},this.hostLanguage=p,v(pe)},Ds(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:un,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),T(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!Tt().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Gc{load(h){return(0,g.Z)(function*(){return new eo(h)})()}clearedOneInstance(){}}const fl="recaptcha",qc={theme:"light",type:"image"};class bs{constructor(h,p=Object.assign({},qc),v){this.parameters=p,this.type=fl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=it(v),this.isInvisible="invisible"===this.parameters.size,B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;B(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gc:new ph,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(R=>{const W=pe=>{!pe||(h.tokenChangeListeners.delete(W),R(pe))};h.tokenChangeListeners.add(W),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=Tt()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){B(st()&&!Qs(),h.auth,"internal-error"),yield function mh(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Ca(y){return Ro.apply(this,arguments)}(h.auth);B(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class fn{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=_o._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function br(){return(br=(0,g.Z)(function*(y,h,p){const v=it(y),T=yield to(v,h,(0,P.m9)(p));return new fn(T,R=>dn(v,R))})).apply(this,arguments)}function Eu(){return(Eu=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);yield qt(!1,v,"phone");const T=yield to(v.auth,h,(0,P.m9)(p));return new fn(T,R=>Kn(v,R))})).apply(this,arguments)}function yi(){return(yi=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y),T=yield to(v.auth,h,(0,P.m9)(p));return new fn(T,R=>Qi(v,R))})).apply(this,arguments)}function to(y,h,p){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,g.Z)(function*(y,h,p){var v;const T=yield p.verify();try{let R;if(B("string"==typeof T,y,"argument-error"),B(p.type===fl,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const W=R.session;if("phoneNumber"in R)return B("enroll"===W.type,y,"internal-error"),(yield dh(y,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{B("signin"===W.type,y,"internal-error");const pe=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return B(pe,y,"missing-multi-factor-info"),(yield ba(y,{mfaPendingCredential:W.credential,mfaEnrollmentId:pe,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield Cp(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return W}}finally{p._reset()}})).apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(y,h){yield ua((0,P.m9)(y),h)})).apply(this,arguments)}let no=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=it(p)}verifyPhoneNumber(p,v){return to(this.auth,p,(0,P.m9)(v))}static credential(p,v){return _o._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?_o._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function _i(y,h){return h?X(h):(B(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class wu extends di{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return ms(h,this._buildIdpRequest())}_linkToIdToken(h,p){return ms(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return ms(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function yh(y){return Zn(y.auth,new wu(y),y.bypassAuthState)}function pl(y){const{auth:h,user:p}=y;return B(p,h,"internal-error"),ou(p,new wu(y),y.bypassAuthState)}function vi(y){return gl.apply(this,arguments)}function gl(){return(gl=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return B(p,h,"internal-error"),ua(p,new wu(y),y.bypassAuthState)})).apply(this,arguments)}class Aa{constructor(h,p,v,T,R=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:W,error:pe,type:G}=h;if(pe)return void p.reject(pe);const je={auth:p.auth,requestUri:v,sessionId:T,tenantId:W||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(G)(je))}catch(ot){p.reject(ot)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return yh;case"linkViaPopup":case"linkViaRedirect":return vi;case"reauthViaPopup":case"reauthViaRedirect":return pl;default:Ce(this.auth,"internal-error")}}resolve(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cy=new Wt(2e3,1e4);function rs(){return(rs=(0,g.Z)(function*(y,h,p){const v=it(y);Be(y,h,cr);const T=_i(v,p);return new Ts(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function ml(){return(ml=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);Be(v.auth,h,cr);const T=_i(v.auth,p);return new Ts(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function ri(){return(ri=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);Be(v.auth,h,cr);const T=_i(v.auth,p);return new Ts(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let Ts=(()=>{class y extends Aa{constructor(p,v,T,R,W){super(p,v,R,W),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return B(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){Z(1===p.filter.length,"Popup operations only handle one event");const v=Lr();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(ve(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,cy.get())};p()}}return y.currentPopupAction=null,y})();const ki=new Map;class dy extends Aa{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=ki.get(p.auth._key());if(!v){try{const R=(yield function As(y,h){return Ss.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}ki.set(p.auth._key(),v)}return p.bypassAuthState||ki.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Ss(){return(Ss=(0,g.Z)(function*(y,h){const p=F(h),v=M(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function Po(y,h){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,g.Z)(function*(y,h){return M(y)._set(F(h),"true")})).apply(this,arguments)}function b(y,h){ki.set(y._key(),h)}function M(y){return X(y._redirectPersistence)}function F(y){return Nn("pendingRedirect",y.config.apiKey,y.name)}function xe(){return(xe=(0,g.Z)(function*(y,h,p){const v=it(y);Be(y,h,cr);const T=_i(v,p);return yield Po(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function yt(){return(yt=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);Be(v.auth,h,cr);const T=_i(v.auth,p);yield Po(T,v.auth);const R=yield Tr(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Yn(){return(Yn=(0,g.Z)(function*(y,h,p){const v=(0,P.m9)(y);Be(v.auth,h,cr);const T=_i(v.auth,p);yield qt(!1,v,h.providerId),yield Po(T,v.auth);const R=yield Tr(v);return T._openRedirect(v.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function Ms(){return(Ms=(0,g.Z)(function*(y,h){return yield it(y)._initializationPromise,Br(y,h,!1)})).apply(this,arguments)}function Br(y,h){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,g.Z)(function*(y,h,p=!1){const v=it(y),T=_i(v,h),W=yield new dy(v,T,p).execute();return W&&!p&&(delete W.user._redirectEventId,yield v._persistUserIfCurrent(W.user),yield v._setRedirectUser(null,h)),W})).apply(this,arguments)}function Tr(y){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,g.Z)(function*(y){const h=Lr(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class yl{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function vh(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sa(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!Sa(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(ve(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_l(h))}saveEventToCache(h){this.cachedEventUids.add(_l(h)),this.lastProcessedEventTime=Date.now()}}function _l(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Sa({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function vl(y){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,g.Z)(function*(y,h={}){return St(y,"GET","/v1/projects",h)})).apply(this,arguments)}const ko=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,El=/^https?/;function Eh(){return(Eh=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield vl(y);for(const p of h)try{if(wh(p))return}catch(v){}Ce(y,"unauthorized-domain")})).apply(this,arguments)}function wh(y){const h=Ne(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const W=new URL(y);return""===W.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&W.hostname===v}if(!El.test(p))return!1;if(ko.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Ih=new Wt(3e4,6e4);function pr(){const y=Tt().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Il=null;function hy(y){return Il=Il||function wl(y){return new Promise((h,p)=>{var v,T,R;function W(){pr(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{pr(),p(ve(y,"network-request-failed"))},timeout:Ih.get()})}if(null===(T=null===(v=Tt().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=Tt().gapi)||void 0===R?void 0:R.load)){const pe=ni("iframefcb");return Tt()[pe]=()=>{gapi.load?W():p(ve(y,"network-request-failed"))},Ds(`https://apis.google.com/js/api.js?onload=${pe}`).catch(G=>p(G))}W()}}).catch(h=>{throw Il=null,h})}(y),Il}const Fo=new Wt(5e3,15e3),x0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bD(y){const h=y.config;B(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?Dn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:ae.SDK_VERSION},T=R0.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${p}?${(0,P.xO)(v).slice(1)}`}function Dl(){return Dl=(0,g.Z)(function*(y){const h=yield hy(y),p=Tt().gapi;return B(p,y,"internal-error"),h.open({where:document.body,url:bD(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:x0,dontclear:!0},v=>new Promise(function(){var T=(0,g.Z)(function*(R,W){yield v.restyle({setHideOnLeave:!1});const pe=ve(y,"network-request-failed"),G=Tt().setTimeout(()=>{W(pe)},Fo.get());function je(){Tt().clearTimeout(G),R(v)}v.ping(je).then(je,()=>{W(pe)})});return function(R,W){return T.apply(this,arguments)}}()))}),Dl.apply(this,arguments)}const bh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lp{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function xa(y,h,p,v,T,R){B(y.config.authDomain,y,"auth-domain-config-required"),B(y.config.apiKey,y,"invalid-api-key");const W={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:ae.SDK_VERSION,eventId:T};if(h instanceof cr){h.setDefaultLanguage(y.languageCode),W.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(W.customParameters=JSON.stringify(h.getCustomParameters()));for(const[G,je]of Object.entries(R||{}))W[G]=je}if(h instanceof Gs){const G=h.getScopes().filter(je=>""!==je);G.length>0&&(W.scopes=G.join(","))}y.tenantId&&(W.tid=y.tenantId);const pe=W;for(const G of Object.keys(pe))void 0===pe[G]&&delete pe[G];return`${function Vp({config:y}){return y.emulator?Dn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(pe).slice(1)}`}const Up="webStorageSupport";class Mh extends class O0{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Mh(h)}_finalizeEnroll(h,p,v){return function Ks(y,h){return St(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ut(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Js(y,h){return St(y,"POST","/v2/accounts/mfaSignIn:finalize",Ut(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Bp=(()=>{class y{constructor(){}static assertion(p){return Mh._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var bl="@firebase/auth";class xh{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var T;h((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xs(){return window}function Lo(){return(Lo=(0,g.Z)(function*(y,h,p){var v;const{BuildInfo:T}=xs();Z(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Gp(h.sessionId),W={};return Or()?W.ibi=T.packageName:wr()?W.apn=T.packageName:Ce(y,"operation-not-supported-in-this-environment"),T.displayName&&(W.appDisplayName=T.displayName),W.sessionId=R,xa(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,W)})).apply(this,arguments)}function Du(){return(Du=(0,g.Z)(function*(y){const{BuildInfo:h}=xs(),p={};Or()?p.iosBundleId=h.packageName:wr()?p.androidPackageName=h.packageName:Ce(y,"operation-not-supported-in-this-environment"),yield vl(y,p)})).apply(this,arguments)}function Nh(){return(Nh=(0,g.Z)(function*(y,h,p){const{cordova:v}=xs();let T=()=>{};try{yield new Promise((R,W)=>{let pe=null;function G(){var Oe;R();const Xt=null===(Oe=v.plugins.browsertab)||void 0===Oe?void 0:Oe.close;"function"==typeof Xt&&Xt(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function je(){pe||(pe=window.setTimeout(()=>{W(ve(y,"redirect-cancelled-by-user"))},2e3))}function ot(){"visible"===(null==document?void 0:document.visibilityState)&&je()}h.addPassiveListener(G),document.addEventListener("resume",je,!1),wr()&&document.addEventListener("visibilitychange",ot,!1),T=()=>{h.removePassiveListener(G),document.removeEventListener("resume",je,!1),document.removeEventListener("visibilitychange",ot,!1),pe&&window.clearTimeout(pe)}})}finally{T()}})).apply(this,arguments)}function Gp(y){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,g.Z)(function*(y){const h=Oh(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Oh(y){if(Z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function Rh(y){(0,ae._registerComponent)(new ue.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:R,authDomain:W}=v.options;return((pe,G)=>{B(R&&!R.includes(":"),"invalid-api-key",{appName:pe.name}),B(!(null==W?void 0:W.includes(":")),"argument-error",{appName:pe.name});const je={apiKey:R,authDomain:W,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yo(y)},ot=new ze(pe,G,je);return function oe(y,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(X);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(ot,p),ot})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ue.wA("auth-internal",h=>{const p=it(h.getProvider("auth").getImmediate());return new xh(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(bl,"0.20.2",function gy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(bl,"0.20.2","esm2017")}("Browser");class F0 extends yl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function qp(y){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,g.Z)(function*(y){const h=yield bu()._get(Fh(y));return h&&(yield bu()._remove(Fh(y))),h})).apply(this,arguments)}function kh(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function bu(){return X(wa)}function Fh(y){return Nn("authEvent",y.config.apiKey,y.name)}function wn(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,P.zd)(p.join("?"))}function Lh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function td(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Yp(y=(0,P.z$)()){return!("file:"!==td()&&"ionic:"!==td()&&"capacitor:"!==td()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jp(){try{const y=self.localStorage,h=Lr();if(y)return y.setItem(h,"1"),y.removeItem(h),!function wy(y=(0,P.z$)()){return function jr(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Qp(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return Hn()&&(0,P.hl)()}return!1}function Hn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function gr(){return(function CD(){return"http:"===td()||"https:"===td()}()||(0,P.ru)()||Yp())&&!function Cl(){return(0,P.b$)()||(0,P.UG)()}()&&Jp()&&!Hn()}function is(){return Yp()&&"undefined"!=typeof document}function Vh(){return(Vh=(0,g.Z)(function*(){return!!is()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const ln={LOCAL:"local",NONE:"none",SESSION:"session"},Fn=B,Xp="persistence";function Uh(y){return nd.apply(this,arguments)}function nd(){return(nd=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Al(),p=Nn(Xp,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Al(){var y;try{return(null===(y=function Tl(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const io=B;class Fi{constructor(){this.browserResolver=X(class py{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pi,this._completeRedirectFn=Br,this._overrideRedirectResult=b}_openPopup(h,p,v,T){var R=this;return(0,g.Z)(function*(){var W;Z(null===(W=R.eventManagers[h._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const pe=xa(h,p,v,Ne(),T);return function Ah(y,h,p,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),W=Math.max((window.screen.availWidth-v)/2,0).toString();let pe="";const G=Object.assign(Object.assign({},bh),{width:v.toString(),height:T.toString(),top:R,left:W}),je=(0,P.z$)().toLowerCase();p&&(pe=ra(je)?"_blank":p),na(je)&&(h=h||"http://localhost",G.scrollbars="yes");const ot=Object.entries(G).reduce((Xt,[si,Rl])=>`${Xt}${si}=${Rl},`,"");if(function $s(y=(0,P.z$)()){var h;return Or(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(je)&&"_self"!==pe)return function fy(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",pe),new Lp(null);const Oe=window.open(h||"",pe,ot);B(Oe,y,"popup-blocked");try{Oe.focus()}catch(Xt){}return new Lp(Oe)}(h,pe,Lr())})()}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(h),function wt(y){Tt().location.href=y}(xa(h,p,v,Ne(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:R}=this.eventManagers[p];return T?Promise.resolve(T):(Z(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const v=yield function Dh(y){return Dl.apply(this,arguments)}(h),T=new yl(h);return v.register("authEvent",R=>(B(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Up,{type:Up},T=>{var R;const W=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[Up];void 0!==W&&p(!!W),Ce(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function kp(y){return Eh.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return fs()||tu()||Or()}}),this.cordovaResolver=X(class vy{constructor(){this._redirectPersistence=pi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Br,this._overrideRedirectResult=b}_initialize(h){var p=this;return(0,g.Z)(function*(){const v=h._key();let T=p.eventManagers.get(v);return T||(T=new F0(h),p.eventManagers.set(v,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){Ce(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){!function k0(y){var h,p,v,T,R,W,pe,G,je,ot;const Oe=xs();B("function"==typeof(null===(h=null==Oe?void 0:Oe.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),B(void 0!==(null===(p=null==Oe?void 0:Oe.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),B("function"==typeof(null===(R=null===(T=null===(v=null==Oe?void 0:Oe.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(G=null===(pe=null===(W=null==Oe?void 0:Oe.cordova)||void 0===W?void 0:W.plugins)||void 0===pe?void 0:pe.browsertab)||void 0===G?void 0:G.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(ot=null===(je=null==Oe?void 0:Oe.cordova)||void 0===je?void 0:je.InAppBrowser)||void 0===ot?void 0:ot.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const W=yield R._initialize(h);yield W.initialized(),W.resetRedirect(),function D(){ki.clear()}(),yield R._originValidation(h);const pe=function Ph(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:kh(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,v,T);yield function Na(y,h){return bu()._set(Fh(y),h)}(h,pe);const G=yield function Rs(y,h,p){return Lo.apply(this,arguments)}(h,pe,p),je=yield function Hp(y){const{cordova:h}=xs();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function Ec(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(G);return function P0(y,h,p){return Nh.apply(this,arguments)}(h,W,je)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function $p(y){return Du.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=xs(),W=setTimeout((0,g.Z)(function*(){yield qp(h),p.onEvent(Lh())}),500),pe=function(){var ot=(0,g.Z)(function*(Oe){clearTimeout(W);const Xt=yield qp(h);let si=null;Xt&&(null==Oe?void 0:Oe.url)&&(si=function _y(y,h){var p,v;const T=function zp(y){const h=wn(y),p=h.link?decodeURIComponent(h.link):void 0,v=wn(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return wn(T).link||T||v||p||y}(h);if(T.includes("/__/auth/callback")){const R=wn(T),W=R.firebaseError?function Oa(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,pe=null===(v=null===(p=null==W?void 0:W.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],G=pe?ve(pe):null;return G?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:G,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Xt,Oe.url)),p.onEvent(si||Lh())});return function(Xt){return ot.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,pe);const G=T,je=`${R.packageName.toLowerCase()}://`;xs().handleOpenURL=function(){var ot=(0,g.Z)(function*(Oe){if(Oe.toLowerCase().startsWith(je)&&pe({url:Oe}),"function"==typeof G)try{G(Oe)}catch(Xt){console.error(Xt)}});return function(Oe){return ot.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=pi,this._completeRedirectFn=Br,this._overrideRedirectResult=b}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,v,T)})()}_openRedirect(h,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,v,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return is()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return io(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function vt(){return Vh.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function jh(y){return y.unwrap()}function rd(y){return Vo(y)}function Vo(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return no.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=Mc;break;case"facebook.com":v=vo;break;case"github.com":v=ah;break;case"twitter.com":v=Rc;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:W,pendingToken:pe,nonce:G}=h;return R||W||T||pe?pe?p.startsWith("saml.")?qs._create(p,pe):Yi._fromParams({providerId:p,signInMethod:p,pendingToken:pe,idToken:T,accessToken:R}):new Si(p).credential({idToken:T,accessToken:R,rawNonce:G}):null}return y instanceof P.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function Ar(y,h){return h.catch(p=>{throw p instanceof P.ZR&&function Sl(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Gn(y,function $n(y,h){var p;const v=(0,P.m9)(y),T=h;return B(h.customData.operationType,v,"argument-error"),B(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),Mo._fromError(v,T)}(y,h));else if(v){const T=Vo(h),R=h;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:rd(p),additionalUserInfo:Oi(p),user:Ns.getOrCreate(T)}})}function id(y,h){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>Ar(y,p.confirm(v))}})).apply(this,arguments)}class Gn{constructor(h,p){this.resolver=p,this.auth=function tg(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Ar(jh(this.auth),this.resolver.resolveSignIn(h))}}class Ns{constructor(h){this._delegate=h,this.multiFactor=function gu(y){const h=(0,P.m9)(y);return pu.has(h)||pu.set(h,Lc._fromUser(h)),pu.get(h)}(h)}static getOrCreate(h){return Ns.USER_MAP.has(h)||Ns.USER_MAP.set(h,new Ns(h)),Ns.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return Ar(p.auth,Kn(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,g.Z)(function*(){return id(v.auth,function Ur(y,h,p){return Eu.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return Ar(p.auth,function _h(y,h,p){return ri.apply(this,arguments)}(p._delegate,h,Fi))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Uh(it(p.auth)),function Rt(y,h,p){return function pt(y,h,p){return Yn.apply(this,arguments)}(y,h,p)}(p._delegate,h,Fi)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return Ar(p.auth,Qi(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return id(this.auth,function mi(y,h,p){return yi.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Ar(this.auth,function Wc(y,h,p){return ml.apply(this,arguments)}(this._delegate,h,Fi))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Uh(it(p.auth)),function Ue(y,h,p){return function ft(y,h,p){return yt.apply(this,arguments)}(y,h,p)}(p._delegate,h,Fi)})()}sendEmailVerification(h){return function ol(y,h){return du.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function uh(y,h){return Jt.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function xp(y,h){return To((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function ll(y,h){return To((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function ts(y,h){return ns.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function ul(y,h){return _a.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function al(y,h,p){return hu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ns.USER_MAP=new WeakMap;const Uo=B;let ng=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;Uo(T,"invalid-api-key",{appName:p.name}),Uo(T,"invalid-api-key",{appName:p.name});const R="undefined"!=typeof window?Fi:void 0;this._delegate=v.initialize({options:{persistence:Dy(T,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Re),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ns.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function kr(y,h,p){const v=it(y);B(v._canInitEmulator,v,"emulator-config-failed"),B(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),R=Ii(h),{host:W,port:pe}=function Sn(y){const h=Ii(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:Di(v.substr(R.length+1))}}{const[R,W]=v.split(":");return{host:R,port:Di(W)}}}(h);v.config.emulator={url:`${R}//${W}${null===pe?"":`:${pe}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:W,port:pe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function on(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function Te(y,h){return bt.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return uu(this._delegate,p)}confirmPasswordReset(p,v){return function rl(y,h,p){return il.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,g.Z)(function*(){return Ar(T._delegate,function ei(y,h,p){return fa.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function vs(y,h){return fi.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function pa(y,h){const p=su.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Uo(gr(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function Qn(y,h){return Ms.apply(this,arguments)}(p._delegate,Fi);return v?Ar(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Zp(y,h){it(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:R,error:W,complete:pe}=Iy(p,v,T);return this._delegate.onAuthStateChanged(R,W,pe)}onIdTokenChanged(p,v,T){const{next:R,error:W,complete:pe}=Iy(p,v,T);return this._delegate.onIdTokenChanged(R,W,pe)}sendSignInLinkToEmail(p,v){return function Mp(y,h,p){return lu.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function nl(y,h,p){return ha.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let T;switch(function eg(y,h){Fn(Object.values(ln).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?Fn(h!==ln.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?Fn(h===ln.NONE,y,"unsupported-persistence-type"):Hn()?Fn(h===ln.NONE||h===ln.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):Fn(h===ln.NONE||Jp(),y,"unsupported-persistence-type")}(v._delegate,p),p){case ln.SESSION:T=pi;break;case ln.LOCAL:T=(yield X(Is)._isAvailable())?Is:wa;break;case ln.NONE:T=mt;break;default:return Ce("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Ar(this._delegate,function Nc(y){return Xu.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Ar(this._delegate,dn(this._delegate,p))}signInWithCustomToken(p){return Ar(this._delegate,function Do(y,h){return lt.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return Ar(this._delegate,function sl(y,h,p){return dn((0,P.m9)(y),Sc.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return Ar(this._delegate,function cu(y,h,p){return Tn.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return id(this._delegate,function vu(y,h,p){return br.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return Uo(gr(),v._delegate,"operation-not-supported-in-this-environment"),Ar(v._delegate,function zc(y,h,p){return rs.apply(this,arguments)}(v._delegate,p,Fi))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return Uo(gr(),v._delegate,"operation-not-supported-in-this-environment"),yield Uh(v._delegate),function Y(y,h,p){return function ie(y,h,p){return xe.apply(this,arguments)}(y,h,p)}(v._delegate,p,Fi)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Co(y,h){return Zs.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ln,y})();function Iy(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const T=v;return{next:W=>T(W&&Ns.getOrCreate(W)),error:h,complete:p}}function Dy(y,h){const p=function Bh(y,h){const p=Al();if(!p)return[];const v=Nn(Xp,y,h);switch(p.getItem(v)){case ln.NONE:return[mt];case ln.LOCAL:return[Is,pi];case ln.SESSION:return[pi];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(Is)&&p.push(Is),"undefined"!=typeof window)for(const v of[wa,pi])p.includes(v)||p.push(v);return p.includes(mt)||p.push(mt),p}class xl{constructor(){this.providerId="phone",this._delegate=new no(jh(J.Z.auth()))}static credential(h,p){return no.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}xl.PHONE_SIGN_IN_METHOD=no.PHONE_SIGN_IN_METHOD,xl.PROVIDER_ID=no.PROVIDER_ID;const V0=B;class U0{constructor(h,p,v=J.Z.app()){var T;V0(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new bs(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Os(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new ng(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Sc,FacebookAuthProvider:vo,GithubAuthProvider:ah,GoogleAuthProvider:Mc,OAuthProvider:Si,SAMLAuthProvider:Ir,PhoneAuthProvider:xl,PhoneMultiFactorGenerator:Bp,RecaptchaVerifier:U0,TwitterAuthProvider:Rc,Auth:ng,AuthCredential:di,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(J.Z)},8306:(Qe,Ee,O)=>{O.d(Ee,{y:()=>j});var g=O(2961),J=O(727),P=O(8822),ae=O(4671);var ue=O(2416),se=O(576),ce=O(2806);let j=(()=>{class Ae{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const he=new Ae;return he.source=this,he.operator=Le,he}subscribe(Le,he,be){const qe=function Ge(Ae){return Ae&&Ae instanceof g.Lv||function ee(Ae){return Ae&&(0,se.m)(Ae.next)&&(0,se.m)(Ae.error)&&(0,se.m)(Ae.complete)}(Ae)&&(0,J.Nn)(Ae)}(Le)?Le:new g.Hp(Le,he,be);return(0,ce.x)(()=>{const{operator:Ze,source:Ce}=this;qe.add(Ze?Ze.call(qe,Ce):Ce?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Le){try{return this._subscribe(Le)}catch(he){Le.error(he)}}forEach(Le,he){return new(he=U(he))((be,qe)=>{const Ze=new g.Hp({next:Ce=>{try{Le(Ce)}catch(ve){qe(ve),Ze.unsubscribe()}},error:qe,complete:be});this.subscribe(Ze)})}_subscribe(Le){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Le)}[P.L](){return this}pipe(...Le){return function fe(Ae){return 0===Ae.length?ae.y:1===Ae.length?Ae[0]:function(Le){return Ae.reduce((he,be)=>be(he),Le)}}(Le)(this)}toPromise(Le){return new(Le=U(Le))((he,be)=>{let qe;this.subscribe(Ze=>qe=Ze,Ze=>be(Ze),()=>he(qe))})}}return Ae.create=Re=>new Ae(Re),Ae})();function U(Ae){var Re;return null!==(Re=null!=Ae?Ae:ue.v.Promise)&&void 0!==Re?Re:Promise}},7579:(Qe,Ee,O)=>{O.d(Ee,{x:()=>ue});var g=O(8306),J=O(727);const ae=(0,O(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=O(8737),fe=O(2806);let ue=(()=>{class ce extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const ee=new se(this,this);return ee.operator=U,ee}_throwIfClosed(){if(this.closed)throw new ae}next(U){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(U)}})}error(U){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:ee}=this;for(;ee.length;)ee.shift().error(U)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:ee,isStopped:Ge,observers:Ae}=this;return ee||Ge?J.Lc:(this.currentObservers=null,Ae.push(U),new J.w0(()=>{this.currentObservers=null,(0,ne.P)(Ae,U)}))}_checkFinalizedStatuses(U){const{hasError:ee,thrownError:Ge,isStopped:Ae}=this;ee?U.error(Ge):Ae&&U.complete()}asObservable(){const U=new g.y;return U.source=this,U}}return ce.create=(j,U)=>new se(j,U),ce})();class se extends ue{constructor(j,U){super(),this.destination=j,this.source=U}next(j){var U,ee;null===(ee=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===ee||ee.call(U,j)}error(j){var U,ee;null===(ee=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===ee||ee.call(U,j)}complete(){var j,U;null===(U=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===U||U.call(j)}_subscribe(j){var U,ee;return null!==(ee=null===(U=this.source)||void 0===U?void 0:U.subscribe(j))&&void 0!==ee?ee:J.Lc}}},2961:(Qe,Ee,O)=>{O.d(Ee,{Hp:()=>Le,Lv:()=>ee});var g=O(576),J=O(727),P=O(2416),ae=O(7849);function ne(){}const fe=ce("C",void 0,void 0);function ce(Ce,ve,we){return{kind:Ce,value:ve,error:we}}var j=O(3410),U=O(2806);class ee extends J.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,J.Nn)(ve)&&ve.add(this)):this.destination=Ze}static create(ve,we,Be){return new Le(ve,we,Be)}next(ve){this.isStopped?qe(function se(Ce){return ce("N",Ce,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?qe(function ue(Ce){return ce("E",void 0,Ce)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?qe(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Ae(Ce,ve){return Ge.call(Ce,ve)}class Re{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:we}=this;if(we.next)try{we.next(ve)}catch(Be){he(Be)}}error(ve){const{partialObserver:we}=this;if(we.error)try{we.error(ve)}catch(Be){he(Be)}else he(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(we){he(we)}}}class Le extends ee{constructor(ve,we,Be){let Ve;if(super(),(0,g.m)(ve)||!ve)Ve={next:null!=ve?ve:void 0,error:null!=we?we:void 0,complete:null!=Be?Be:void 0};else{let B;this&&P.v.useDeprecatedNextContext?(B=Object.create(ve),B.unsubscribe=()=>this.unsubscribe(),Ve={next:ve.next&&Ae(ve.next,B),error:ve.error&&Ae(ve.error,B),complete:ve.complete&&Ae(ve.complete,B)}):Ve=ve}this.destination=new Re(Ve)}}function he(Ce){P.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(Ce):(0,ae.h)(Ce)}function qe(Ce,ve){const{onStoppedNotification:we}=P.v;we&&j.z.setTimeout(()=>we(Ce,ve))}const Ze={closed:!0,next:ne,error:function be(Ce){throw Ce},complete:ne}},727:(Qe,Ee,O)=>{O.d(Ee,{Lc:()=>fe,w0:()=>ne,Nn:()=>ue});var g=O(576);const P=(0,O(3888).d)(ce=>function(U){ce(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((ee,Ge)=>`${Ge+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var ae=O(8737);class ne{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const Ae of U)Ae.remove(this);else U.remove(this);const{initialTeardown:ee}=this;if((0,g.m)(ee))try{ee()}catch(Ae){j=Ae instanceof P?Ae.errors:[Ae]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Ae of Ge)try{se(Ae)}catch(Re){j=null!=j?j:[],Re instanceof P?j=[...j,...Re.errors]:j.push(Re)}}if(j)throw new P(j)}}add(j){var U;if(j&&j!==this)if(this.closed)se(j);else{if(j instanceof ne){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(U=this._finalizers)&&void 0!==U?U:[]).push(j)}}_hasParent(j){const{_parentage:U}=this;return U===j||Array.isArray(U)&&U.includes(j)}_addParent(j){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push(j),U):U?[U,j]:j}_removeParent(j){const{_parentage:U}=this;U===j?this._parentage=null:Array.isArray(U)&&(0,ae.P)(U,j)}remove(j){const{_finalizers:U}=this;U&&(0,ae.P)(U,j),j instanceof ne&&j._removeParent(this)}}ne.EMPTY=(()=>{const ce=new ne;return ce.closed=!0,ce})();const fe=ne.EMPTY;function ue(ce){return ce instanceof ne||ce&&"closed"in ce&&(0,g.m)(ce.remove)&&(0,g.m)(ce.add)&&(0,g.m)(ce.unsubscribe)}function se(ce){(0,g.m)(ce)?ce():ce.unsubscribe()}},2416:(Qe,Ee,O)=>{O.d(Ee,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Qe,Ee,O)=>{O.d(Ee,{E:()=>J});const J=new(O(8306).y)(ne=>ne.complete())},8996:(Qe,Ee,O)=>{O.d(Ee,{D:()=>ve});var g=O(8421),J=O(5363),P=O(9468),fe=O(8306),se=O(2202),ce=O(576),j=O(9672);function ee(we,Be){if(!we)throw new Error("Iterable cannot be null");return new fe.y(Ve=>{(0,j.f)(Ve,Be,()=>{const B=we[Symbol.asyncIterator]();(0,j.f)(Ve,Be,()=>{B.next().then(_e=>{_e.done?Ve.complete():Ve.next(_e.value)})},0,!0)})})}var Ge=O(3670),Ae=O(8239),Re=O(1144),Le=O(6495),he=O(2206),be=O(4532),qe=O(3260);function ve(we,Be){return Be?function Ce(we,Be){if(null!=we){if((0,Ge.c)(we))return function ae(we,Be){return(0,g.Xf)(we).pipe((0,P.R)(Be),(0,J.Q)(Be))}(we,Be);if((0,Re.z)(we))return function ue(we,Be){return new fe.y(Ve=>{let B=0;return Be.schedule(function(){B===we.length?Ve.complete():(Ve.next(we[B++]),Ve.closed||this.schedule())})})}(we,Be);if((0,Ae.t)(we))return function ne(we,Be){return(0,g.Xf)(we).pipe((0,P.R)(Be),(0,J.Q)(Be))}(we,Be);if((0,he.D)(we))return ee(we,Be);if((0,Le.T)(we))return function U(we,Be){return new fe.y(Ve=>{let B;return(0,j.f)(Ve,Be,()=>{B=we[se.h](),(0,j.f)(Ve,Be,()=>{let _e,Z;try{({value:_e,done:Z}=B.next())}catch(re){return void Ve.error(re)}Z?Ve.complete():Ve.next(_e)},0,!0)}),()=>(0,ce.m)(null==B?void 0:B.return)&&B.return()})}(we,Be);if((0,qe.L)(we))return function Ze(we,Be){return ee((0,qe.Q)(we),Be)}(we,Be)}throw(0,be.z)(we)}(we,Be):(0,g.Xf)(we)}},8421:(Qe,Ee,O)=>{O.d(Ee,{Xf:()=>Ge});var g=O(655),J=O(1144),P=O(8239),ae=O(8306),ne=O(3670),fe=O(2206),ue=O(4532),se=O(6495),ce=O(3260),j=O(576),U=O(7849),ee=O(8822);function Ge(Ce){if(Ce instanceof ae.y)return Ce;if(null!=Ce){if((0,ne.c)(Ce))return function Ae(Ce){return new ae.y(ve=>{const we=Ce[ee.L]();if((0,j.m)(we.subscribe))return we.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ce);if((0,J.z)(Ce))return function Re(Ce){return new ae.y(ve=>{for(let we=0;we<Ce.length&&!ve.closed;we++)ve.next(Ce[we]);ve.complete()})}(Ce);if((0,P.t)(Ce))return function Le(Ce){return new ae.y(ve=>{Ce.then(we=>{ve.closed||(ve.next(we),ve.complete())},we=>ve.error(we)).then(null,U.h)})}(Ce);if((0,fe.D)(Ce))return be(Ce);if((0,se.T)(Ce))return function he(Ce){return new ae.y(ve=>{for(const we of Ce)if(ve.next(we),ve.closed)return;ve.complete()})}(Ce);if((0,ce.L)(Ce))return function qe(Ce){return be((0,ce.Q)(Ce))}(Ce)}throw(0,ue.z)(Ce)}function be(Ce){return new ae.y(ve=>{(function Ze(Ce,ve){var we,Be,Ve,B;return(0,g.mG)(this,void 0,void 0,function*(){try{for(we=(0,g.KL)(Ce);!(Be=yield we.next()).done;)if(ve.next(Be.value),ve.closed)return}catch(_e){Ve={error:_e}}finally{try{Be&&!Be.done&&(B=we.return)&&(yield B.call(we))}finally{if(Ve)throw Ve.error}}ve.complete()})})(Ce,ve).catch(we=>ve.error(we))})}},6451:(Qe,Ee,O)=>{O.d(Ee,{T:()=>fe});var g=O(8189),J=O(8421),P=O(515),ae=O(7669),ne=O(8996);function fe(...ue){const se=(0,ae.yG)(ue),ce=(0,ae._6)(ue,1/0),j=ue;return j.length?1===j.length?(0,J.Xf)(j[0]):(0,g.J)(ce)((0,ne.D)(j,se)):P.E}},5403:(Qe,Ee,O)=>{O.d(Ee,{x:()=>J});var g=O(2961);function J(ae,ne,fe,ue,se){return new P(ae,ne,fe,ue,se)}class P extends g.Lv{constructor(ne,fe,ue,se,ce,j){super(ne),this.onFinalize=ce,this.shouldUnsubscribe=j,this._next=fe?function(U){try{fe(U)}catch(ee){ne.error(ee)}}:super._next,this._error=se?function(U){try{se(U)}catch(ee){ne.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(U){ne.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(Qe,Ee,O)=>{O.d(Ee,{U:()=>P});var g=O(4482),J=O(5403);function P(ae,ne){return(0,g.e)((fe,ue)=>{let se=0;fe.subscribe((0,J.x)(ue,ce=>{ue.next(ae.call(ne,ce,se++))}))})}},8189:(Qe,Ee,O)=>{O.d(Ee,{J:()=>P});var g=O(5577),J=O(4671);function P(ae=1/0){return(0,g.z)(J.y,ae)}},5577:(Qe,Ee,O)=>{O.d(Ee,{z:()=>se});var g=O(4004),J=O(8421),P=O(4482),ae=O(9672),ne=O(5403),ue=O(576);function se(ce,j,U=1/0){return(0,ue.m)(j)?se((ee,Ge)=>(0,g.U)((Ae,Re)=>j(ee,Ae,Ge,Re))((0,J.Xf)(ce(ee,Ge))),U):("number"==typeof j&&(U=j),(0,P.e)((ee,Ge)=>function fe(ce,j,U,ee,Ge,Ae,Re,Le){const he=[];let be=0,qe=0,Ze=!1;const Ce=()=>{Ze&&!he.length&&!be&&j.complete()},ve=Be=>be<ee?we(Be):he.push(Be),we=Be=>{Ae&&j.next(Be),be++;let Ve=!1;(0,J.Xf)(U(Be,qe++)).subscribe((0,ne.x)(j,B=>{null==Ge||Ge(B),Ae?ve(B):j.next(B)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(be--;he.length&&be<ee;){const B=he.shift();Re?(0,ae.f)(j,Re,()=>we(B)):we(B)}Ce()}catch(B){j.error(B)}}))};return ce.subscribe((0,ne.x)(j,ve,()=>{Ze=!0,Ce()})),()=>{null==Le||Le()}}(ee,Ge,ce,U)))}},5363:(Qe,Ee,O)=>{O.d(Ee,{Q:()=>ae});var g=O(9672),J=O(4482),P=O(5403);function ae(ne,fe=0){return(0,J.e)((ue,se)=>{ue.subscribe((0,P.x)(se,ce=>(0,g.f)(se,ne,()=>se.next(ce),fe),()=>(0,g.f)(se,ne,()=>se.complete(),fe),ce=>(0,g.f)(se,ne,()=>se.error(ce),fe)))})}},3099:(Qe,Ee,O)=>{O.d(Ee,{B:()=>fe});var g=O(8996),J=O(5698),P=O(7579),ae=O(2961),ne=O(4482);function fe(se={}){const{connector:ce=(()=>new P.x),resetOnError:j=!0,resetOnComplete:U=!0,resetOnRefCountZero:ee=!0}=se;return Ge=>{let Ae=null,Re=null,Le=null,he=0,be=!1,qe=!1;const Ze=()=>{null==Re||Re.unsubscribe(),Re=null},Ce=()=>{Ze(),Ae=Le=null,be=qe=!1},ve=()=>{const we=Ae;Ce(),null==we||we.unsubscribe()};return(0,ne.e)((we,Be)=>{he++,!qe&&!be&&Ze();const Ve=Le=null!=Le?Le:ce();Be.add(()=>{he--,0===he&&!qe&&!be&&(Re=ue(ve,ee))}),Ve.subscribe(Be),Ae||(Ae=new ae.Hp({next:B=>Ve.next(B),error:B=>{qe=!0,Ze(),Re=ue(Ce,j,B),Ve.error(B)},complete:()=>{be=!0,Ze(),Re=ue(Ce,U),Ve.complete()}}),(0,g.D)(we).subscribe(Ae))})(Ge)}}function ue(se,ce,...j){return!0===ce?(se(),null):!1===ce?null:ce(...j).pipe((0,J.q)(1)).subscribe(()=>se())}},9468:(Qe,Ee,O)=>{O.d(Ee,{R:()=>J});var g=O(4482);function J(P,ae=0){return(0,g.e)((ne,fe)=>{fe.add(P.schedule(()=>ne.subscribe(fe),ae))})}},5698:(Qe,Ee,O)=>{O.d(Ee,{q:()=>ae});var g=O(515),J=O(4482),P=O(5403);function ae(ne){return ne<=0?()=>g.E:(0,J.e)((fe,ue)=>{let se=0;fe.subscribe((0,P.x)(ue,ce=>{++se<=ne&&(ue.next(ce),ne<=se&&ue.complete())}))})}},8505:(Qe,Ee,O)=>{O.d(Ee,{b:()=>ne});var g=O(576),J=O(4482),P=O(5403),ae=O(4671);function ne(fe,ue,se){const ce=(0,g.m)(fe)||ue||se?{next:fe,error:ue,complete:se}:fe;return ce?(0,J.e)((j,U)=>{var ee;null===(ee=ce.subscribe)||void 0===ee||ee.call(ce);let Ge=!0;j.subscribe((0,P.x)(U,Ae=>{var Re;null===(Re=ce.next)||void 0===Re||Re.call(ce,Ae),U.next(Ae)},()=>{var Ae;Ge=!1,null===(Ae=ce.complete)||void 0===Ae||Ae.call(ce),U.complete()},Ae=>{var Re;Ge=!1,null===(Re=ce.error)||void 0===Re||Re.call(ce,Ae),U.error(Ae)},()=>{var Ae,Re;Ge&&(null===(Ae=ce.unsubscribe)||void 0===Ae||Ae.call(ce)),null===(Re=ce.finalize)||void 0===Re||Re.call(ce)}))}):ae.y}},4408:(Qe,Ee,O)=>{O.d(Ee,{o:()=>ne});var g=O(727);class J extends g.w0{constructor(ue,se){super()}schedule(ue,se=0){return this}}const P={setInterval(fe,ue,...se){const{delegate:ce}=P;return(null==ce?void 0:ce.setInterval)?ce.setInterval(fe,ue,...se):setInterval(fe,ue,...se)},clearInterval(fe){const{delegate:ue}=P;return((null==ue?void 0:ue.clearInterval)||clearInterval)(fe)},delegate:void 0};var ae=O(8737);class ne extends J{constructor(ue,se){super(ue,se),this.scheduler=ue,this.work=se,this.pending=!1}schedule(ue,se=0){if(this.closed)return this;this.state=ue;const ce=this.id,j=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(j,ce,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId(j,this.id,se),this}requestAsyncId(ue,se,ce=0){return P.setInterval(ue.flush.bind(ue,this),ce)}recycleAsyncId(ue,se,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return se;P.clearInterval(se)}execute(ue,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(ue,se);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,se){let j,ce=!1;try{this.work(ue)}catch(U){ce=!0,j=U||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ue,scheduler:se}=this,{actions:ce}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ce,this),null!=ue&&(this.id=this.recycleAsyncId(se,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(Qe,Ee,O)=>{O.d(Ee,{v:()=>P});var g=O(6063);class J{constructor(ne,fe=J.now){this.schedulerActionCtor=ne,this.now=fe}schedule(ne,fe=0,ue){return new this.schedulerActionCtor(this,ne).schedule(ue,fe)}}J.now=g.l.now;class P extends J{constructor(ne,fe=J.now){super(ne,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:fe}=this;if(this._active)return void fe.push(ne);let ue;this._active=!0;do{if(ue=ne.execute(ne.state,ne.delay))break}while(ne=fe.shift());if(this._active=!1,ue){for(;ne=fe.shift();)ne.unsubscribe();throw ue}}}},4986:(Qe,Ee,O)=>{O.d(Ee,{z:()=>P});var g=O(4408);const P=new(O(7565).v)(g.o)},6063:(Qe,Ee,O)=>{O.d(Ee,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(Qe,Ee,O)=>{O.d(Ee,{z:()=>g});const g={setTimeout(J,P,...ae){const{delegate:ne}=g;return(null==ne?void 0:ne.setTimeout)?ne.setTimeout(J,P,...ae):setTimeout(J,P,...ae)},clearTimeout(J){const{delegate:P}=g;return((null==P?void 0:P.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(Qe,Ee,O)=>{O.d(Ee,{h:()=>J});const J=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Qe,Ee,O)=>{O.d(Ee,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Qe,Ee,O)=>{O.d(Ee,{_6:()=>fe,jO:()=>ae,yG:()=>ne});var g=O(576);function P(ue){return ue[ue.length-1]}function ae(ue){return(0,g.m)(P(ue))?ue.pop():void 0}function ne(ue){return function J(ue){return ue&&(0,g.m)(ue.schedule)}(P(ue))?ue.pop():void 0}function fe(ue,se){return"number"==typeof P(ue)?ue.pop():se}},8737:(Qe,Ee,O)=>{function g(J,P){if(J){const ae=J.indexOf(P);0<=ae&&J.splice(ae,1)}}O.d(Ee,{P:()=>g})},3888:(Qe,Ee,O)=>{function g(J){const ae=J(ne=>{Error.call(ne),ne.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}O.d(Ee,{d:()=>g})},2806:(Qe,Ee,O)=>{O.d(Ee,{x:()=>P,O:()=>ae});var g=O(2416);let J=null;function P(ne){if(g.v.useDeprecatedSynchronousErrorHandling){const fe=!J;if(fe&&(J={errorThrown:!1,error:null}),ne(),fe){const{errorThrown:ue,error:se}=J;if(J=null,ue)throw se}}else ne()}function ae(ne){g.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=ne)}},9672:(Qe,Ee,O)=>{function g(J,P,ae,ne=0,fe=!1){const ue=P.schedule(function(){ae(),fe?J.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(J.add(ue),!fe)return ue}O.d(Ee,{f:()=>g})},4671:(Qe,Ee,O)=>{function g(J){return J}O.d(Ee,{y:()=>g})},1144:(Qe,Ee,O)=>{O.d(Ee,{z:()=>g});const g=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(Qe,Ee,O)=>{O.d(Ee,{D:()=>J});var g=O(576);function J(P){return Symbol.asyncIterator&&(0,g.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(Qe,Ee,O)=>{function g(J){return"function"==typeof J}O.d(Ee,{m:()=>g})},3670:(Qe,Ee,O)=>{O.d(Ee,{c:()=>P});var g=O(8822),J=O(576);function P(ae){return(0,J.m)(ae[g.L])}},6495:(Qe,Ee,O)=>{O.d(Ee,{T:()=>P});var g=O(2202),J=O(576);function P(ae){return(0,J.m)(null==ae?void 0:ae[g.h])}},8239:(Qe,Ee,O)=>{O.d(Ee,{t:()=>J});var g=O(576);function J(P){return(0,g.m)(null==P?void 0:P.then)}},3260:(Qe,Ee,O)=>{O.d(Ee,{Q:()=>P,L:()=>ae});var g=O(655),J=O(576);function P(ne){return(0,g.FC)(this,arguments,function*(){const ue=ne.getReader();try{for(;;){const{value:se,done:ce}=yield(0,g.qq)(ue.read());if(ce)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(se)}}finally{ue.releaseLock()}})}function ae(ne){return(0,J.m)(null==ne?void 0:ne.getReader)}},4482:(Qe,Ee,O)=>{O.d(Ee,{A:()=>J,e:()=>P});var g=O(576);function J(ae){return(0,g.m)(null==ae?void 0:ae.lift)}function P(ae){return ne=>{if(J(ne))return ne.lift(function(fe){try{return ae(fe,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Qe,Ee,O)=>{O.d(Ee,{h:()=>P});var g=O(2416),J=O(3410);function P(ae){J.z.setTimeout(()=>{const{onUnhandledError:ne}=g.v;if(!ne)throw ae;ne(ae)})}},4532:(Qe,Ee,O)=>{function g(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ee,{z:()=>g})},655:(Qe,Ee,O)=>{function ae(Z,re){var X={};for(var me in Z)Object.prototype.hasOwnProperty.call(Z,me)&&re.indexOf(me)<0&&(X[me]=Z[me]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var oe=0;for(me=Object.getOwnPropertySymbols(Z);oe<me.length;oe++)re.indexOf(me[oe])<0&&Object.prototype.propertyIsEnumerable.call(Z,me[oe])&&(X[me[oe]]=Z[me[oe]])}return X}function se(Z,re,X,me){return new(X||(X=Promise))(function(Ne,st){function Ot(Wt){try{Ke(me.next(Wt))}catch(Dn){st(Dn)}}function Mt(Wt){try{Ke(me.throw(Wt))}catch(Dn){st(Dn)}}function Ke(Wt){Wt.done?Ne(Wt.value):function oe(Ne){return Ne instanceof X?Ne:new X(function(st){st(Ne)})}(Wt.value).then(Ot,Mt)}Ke((me=me.apply(Z,re||[])).next())})}function he(Z){return this instanceof he?(this.v=Z,this):new he(Z)}function be(Z,re,X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,me=X.apply(Z,re||[]),Ne=[];return oe={},st("next"),st("throw"),st("return"),oe[Symbol.asyncIterator]=function(){return this},oe;function st(Yt){me[Yt]&&(oe[Yt]=function(Gt){return new Promise(function(_r,Ut){Ne.push([Yt,Gt,_r,Ut])>1||Ot(Yt,Gt)})})}function Ot(Yt,Gt){try{!function Mt(Yt){Yt.value instanceof he?Promise.resolve(Yt.value.v).then(Ke,Wt):Dn(Ne[0][2],Yt)}(me[Yt](Gt))}catch(_r){Dn(Ne[0][3],_r)}}function Ke(Yt){Ot("next",Yt)}function Wt(Yt){Ot("throw",Yt)}function Dn(Yt,Gt){Yt(Gt),Ne.shift(),Ne.length&&Ot(Ne[0][0],Ne[0][1])}}function Ze(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,re=Z[Symbol.asyncIterator];return re?re.call(Z):(Z=function ee(Z){var re="function"==typeof Symbol&&Symbol.iterator,X=re&&Z[re],me=0;if(X)return X.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&me>=Z.length&&(Z=void 0),{value:Z&&Z[me++],done:!Z}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),X={},me("next"),me("throw"),me("return"),X[Symbol.asyncIterator]=function(){return this},X);function me(Ne){X[Ne]=Z[Ne]&&function(st){return new Promise(function(Ot,Mt){!function oe(Ne,st,Ot,Mt){Promise.resolve(Mt).then(function(Ke){Ne({value:Ke,done:Ot})},st)}(Ot,Mt,(st=Z[Ne](st)).done,st.value)})}}}O.d(Ee,{_T:()=>ae,mG:()=>se,qq:()=>he,FC:()=>be,KL:()=>Ze})},5e3:(Qe,Ee,O)=>{O.d(Ee,{deG:()=>Hc,tb:()=>Lm,AFp:()=>km,ip1:()=>cc,CZH:()=>qu,hGG:()=>xC,z2F:()=>ep,sBO:()=>Wv,Sil:()=>pC,_Vd:()=>zn,EJc:()=>Vv,SBq:()=>Ga,qLn:()=>rd,vpe:()=>Jo,tBr:()=>Br,XFs:()=>ct,OlP:()=>un,zs3:()=>Ps,ZZ4:()=>e0,aQg:()=>t0,soG:()=>Lv,YKP:()=>Jw,h0i:()=>qd,PXZ:()=>vC,R0b:()=>us,FiY:()=>Cr,Lbi:()=>bI,g9A:()=>Fv,Qsj:()=>Uf,FYo:()=>hv,JOm:()=>T,tp0:()=>Jn,Rgc:()=>oc,dDg:()=>$v,q4F:()=>Kw,GfV:()=>Zw,s_b:()=>Wd,ifc:()=>Pt,eFA:()=>xI,G48:()=>zv,Gpc:()=>U,X6Q:()=>IC,_c5:()=>GI,VLi:()=>_C,c2e:()=>Vm,zSh:()=>xg,wAp:()=>Je,vHH:()=>Re,cg1:()=>z_,kL8:()=>W_,dqk:()=>xt,sIi:()=>wd,CqO:()=>R_,QGY:()=>If,F4k:()=>Yg,RDi:()=>el,AaK:()=>se,qOj:()=>Ll,TTD:()=>Si,_Bn:()=>cv,xp6:()=>K0,uIk:()=>ff,ekj:()=>V_,Suo:()=>pI,Xpm:()=>ut,lG2:()=>tu,Yz7:()=>Gt,cJS:()=>Ut,oAB:()=>Er,Yjl:()=>ra,Y36:()=>vf,_UZ:()=>wf,qZA:()=>Ef,TgZ:()=>$l,EpF:()=>x_,n5z:()=>Ca,LFG:()=>Ue,$8M:()=>No,$Z:()=>Wg,NdJ:()=>xd,CRH:()=>gI,oxw:()=>P_,Q6J:()=>jl,VKq:()=>tI,iGM:()=>Tv,MAs:()=>UE,CHM:()=>uu,LSH:()=>ed,YNc:()=>VE,_uU:()=>lw,hij:()=>im});var g=O(7579),J=O(727),P=O(8306),ae=O(6451),ne=O(3099);function fe(i){for(let s in i)if(i[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function ue(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function se(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(se).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ce(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=fe({__forward_ref__:fe});function U(i){return i.__forward_ref__=U,i.toString=function(){return se(this())},i}function ee(i){return Ge(i)?i():i}function Ge(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===U}class Re extends Error{constructor(s,a){super(function Le(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function be(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function ve(i,s){const a=s?` in ${s}`:"";throw new Re(-201,`No provider for ${be(i)} found${a}`)}function Mt(i,s){null==i&&function Ke(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Gt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ut(i){return{providers:i.providers||[],imports:i.imports||[]}}function St(i){return Zi(i,wi)||Zi(i,Kr)}function Zi(i,s){return i.hasOwnProperty(s)?i[s]:null}function vr(i){return i&&(i.hasOwnProperty(hs)||i.hasOwnProperty(li))?i[hs]:null}const wi=fe({\u0275prov:fe}),hs=fe({\u0275inj:fe}),Kr=fe({ngInjectableDef:fe}),li=fe({ngInjectorDef:fe});var ct=(()=>((ct=ct||{})[ct.Default=0]="Default",ct[ct.Host=1]="Host",ct[ct.Self=2]="Self",ct[ct.SkipSelf=4]="SkipSelf",ct[ct.Optional=8]="Optional",ct))();let Yr;function bn(i){const s=Yr;return Yr=i,s}function Bs(i,s,a){const l=St(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ct.Optional?null:void 0!==s?s:void ve(se(i),"Injector")}function Un(i){return{toString:i}.toString()}var An=(()=>((An=An||{})[An.OnPush=0]="OnPush",An[An.Default=1]="Default",An))(),Pt=(()=>{return(i=Pt||(Pt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Pt;var i})();const rt="undefined"!=typeof globalThis&&globalThis,ht="undefined"!=typeof window&&window,or="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,xt=rt||"undefined"!=typeof global&&global||ht||or,ur={},L=[],H=fe({\u0275cmp:fe}),q=fe({\u0275dir:fe}),Ie=fe({\u0275pipe:fe}),$=fe({\u0275mod:fe}),Q=fe({\u0275fac:fe}),Se=fe({__NG_ELEMENT_ID__:fe});let Ye=0;function ut(i){return Un(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===An.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Pt.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,_=i.pipes;return l.id+=Ye++,l.inputs=na(i.inputs,a),l.outputs=na(i.outputs),f&&f.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(sn):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(mt):null,l})}function sn(i){return On(i)||function wr(i){return i[q]||null}(i)}function mt(i){return function Ki(i){return i[Ie]||null}(i)}const Nn={};function Er(i){return Un(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Nn[i.id]=i.type),s})}function na(i,s){if(null==i)return ur;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=l,s&&(s[c]=f)}return a}const tu=ut;function ra(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function On(i){return i[H]||null}function Pn(i,s){const a=i[$]||null;if(!a&&!0===s)throw new Error(`Type ${se(i)} does not have '\u0275mod' property.`);return a}function Fr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ci(i){return Array.isArray(i)&&!0===i[1]}function iu(i){return 0!=(8&i.flags)}function wc(i){return 2==(2&i.flags)}function Ti(i){return 1==(1&i.flags)}function Ai(i){return null!==i.template}function Yu(i){return 0!=(512&i[2])}function cr(i,s){return i.hasOwnProperty(Q)?i[Q]:null}class Gs{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Si(){return vo}function vo(i){return i.type.prototype.ngOnChanges&&(i.setInput=ah),Mc}function Mc(){const i=qs(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===ur)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function ah(i,s,a,l){const c=qs(i)||function Eo(i,s){return i[xc]=s}(i,{previous:ur,current:null}),f=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];f[E]=new Gs(I&&I.currentValue,s,_===ur),i[l]=s}Si.ngInherit=!0;const xc="__ngSimpleChanges__";function qs(i){return i[xc]||null}let Io;function el(i){Io=i}function Jt(i){return!!i.listen}const ua={createRenderer:(i,s)=>function Mi(){return void 0!==Io?Io:"undefined"!=typeof document?document:void 0}()};function qt(i){for(;Array.isArray(i);)i=i[0];return i}function _s(i,s){return qt(s[i])}function Zn(i,s){return qt(s[i.index])}function dn(i,s){return i.data[s]}function Kn(i,s){const a=s[i];return Fr(a)?a:a[0]}function Ws(i){return 4==(4&i[2])}function Qi(i){return 128==(128&i[2])}function hi(i,s){return null==s?null:i[s]}function Ri(i){i[18]=0}function Do(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const lt={lFrame:Oc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ha(){return lt.bindingsEnabled}function Te(){return lt.lFrame.lView}function bt(){return lt.lFrame.tView}function uu(i){return lt.lFrame.contextLView=i,i[8]}function an(){let i=Co();for(;null!==i&&64===i.type;)i=i.parent;return i}function Co(){return lt.lFrame.currentTNode}function ei(i,s){const a=lt.lFrame;a.currentTNode=i,a.isParent=s}function fa(){return lt.lFrame.isParent}function pa(){return lt.isInCheckNoChangesMode}function cu(i){lt.isInCheckNoChangesMode=i}function vs(){return lt.lFrame.bindingIndex++}function al(i,s){const a=lt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ma(s)}function ma(i){lt.lFrame.currentDirectiveIndex=i}function ul(){return lt.lFrame.currentQueryIndex}function _a(i){lt.lFrame.currentQueryIndex=i}function xp(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ll(i,s,a){if(a&ct.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&ct.Host||(c=xp(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const l=lt.lFrame=va();return l.currentTNode=s,l.lView=i,!0}function To(i){const s=va(),a=i[1];lt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function va(){const i=lt.lFrame,s=null===i?null:i.child;return null===s?Oc(i):s}function Oc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Ao(){const i=lt.lFrame;return lt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Pc=Ao;function So(){const i=Ao();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function jn(){return lt.lFrame.selectedIndex}function Oi(i){lt.lFrame.selectedIndex=i}function vn(){const i=lt.lFrame;return dn(i.tView,i.selectedIndex)}function Fc(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:S}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Ea(i,s,a){$n(i,s,3,a)}function Xi(i,s,a,l){(3&i[2])===a&&$n(i,s,a,l)}function Mo(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function $n(i,s,a,l){const f=null!=l?l:-1,_=s.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=l&&E>=l)break}else s[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(dh(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function dh(i,s,a,l){const c=a[l]<0,f=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class fu{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function dr(i,s,a){const l=Jt(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const _=a[c++],E=a[c++],I=a[c++];l?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=f,E=a[++c];Uc(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function wa(i){return 3===i||4===i||6===i}function Uc(i){return 64===i.charCodeAt(0)}function pi(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||mu(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function mu(i,s,a,l,c){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[f+1]=c));if(l===i[f+1])return void(i[f+2]=c)}f++,null!==l&&f++,null!==c&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==c&&i.splice(f++,0,c)}function Bc(i){return-1!==i}function Lr(i){return 32767&i}function Tt(i,s){let a=function ws(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let wt=!0;function Qs(i){const s=wt;return wt=i,s}let hh=0;function Vr(i,s){const a=xo(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,hr(l.data,i),hr(s,null),hr(l.blueprint,null));const c=es(i,s),f=i.injectorIndex;if(Bc(c)){const _=Lr(c),E=Tt(c,s),I=E[1].data;for(let A=0;A<8;A++)s[f+A]=E[_+A]|I[_+A]}return s[f+8]=c,f}function hr(i,s){i.push(0,0,0,0,0,0,0,0,s)}function xo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function es(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const f=c[1],_=f.type;if(l=2===_?f.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function fr(i,s,a){!function dl(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Se)&&(l=a[Se]),null==l&&(l=a[Se]=hh++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Da(i,s,a){if(a&ct.Optional)return i;ve(s,"NodeInjector")}function Pi(i,s,a,l){if(a&ct.Optional&&void 0===l&&(l=null),0==(a&(ct.Self|ct.Host))){const c=i[9],f=bn(void 0);try{return c?c.get(s,l,a&ct.Optional):Bs(s,l,a&ct.Optional)}finally{bn(f)}}return Da(l,s,a)}function ti(i,s,a,l=ct.Default,c){if(null!==i){const f=function fh(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Se)?i[Se]:void 0;return"number"==typeof s?s>=0?255&s:hn:s}(a);if("function"==typeof f){if(!ll(s,i,l))return l&ct.Host?Da(c,a,l):Pi(s,a,l,c);try{const _=f(l);if(null!=_||l&ct.Optional)return _;ve(a)}finally{Pc()}}else if("number"==typeof f){let _=null,E=xo(i,s),I=-1,A=l&ct.Host?s[16][6]:null;for((-1===E||l&ct.SkipSelf)&&(I=-1===E?es(i,s):s[E+8],-1!==I&&ba(l,!1)?(_=s[1],E=Lr(I),s=Tt(I,s)):E=-1);-1!==E;){const S=s[1];if(Is(f,E,S.data)){const k=gi(E,s,a,_,l,A);if(k!==yu)return k}I=s[E+8],-1!==I&&ba(l,s[1].data[E+8]===A)&&Is(f,E,s)?(_=S,E=Lr(I),s=Tt(I,s)):E=-1}}}return Pi(s,a,l,c)}const yu={};function hn(){return new Js(an(),Te())}function gi(i,s,a,l,c,f){const _=s[1],E=_.data[i+8],S=hl(E,_,a,null==l?wc(E)&&wt:l!=_&&0!=(3&E.type),c&ct.Host&&f===E);return null!==S?tn(s,_,S,E):yu}function hl(i,s,a,l,c){const f=i.providerIndexes,_=s.data,E=1048575&f,I=i.directiveStart,S=f>>20,V=c?E+S:i.directiveEnd;for(let K=l?E:E+S;K<V;K++){const ye=_[K];if(K<I&&a===ye||K>=I&&ye.type===a)return K}if(c){const K=_[I];if(K&&Ai(K)&&K.type===a)return I}return null}function tn(i,s,a,l){let c=i[a];const f=s.data;if(function Lc(i){return i instanceof fu}(c)){const _=c;_.resolving&&function qe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(be(f[a]));const E=Qs(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?bn(_.injectImpl):null;ll(i,l,ct.Default);try{c=i[a]=_.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Rp(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(l){const _=vo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&bn(I),Qs(E),_.resolving=!1,Pc()}}return c}function Is(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function ba(i,s){return!(i&ct.Self||i&ct.Host&&s)}class Js{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return ti(this._tNode,this._lView,s,l,a)}}function Ca(i){return Un(()=>{const s=i.prototype.constructor,a=s[Q]||Ro(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const f=c[Q]||Ro(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function Ro(i){return Ge(i)?()=>{const s=Ro(ee(i));return s&&s()}:cr(i)}function No(i){return function $c(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const f=a[c];if(wa(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(an(),i)}const ni="__parameters__";function eo(i,s,a){return Un(()=>{const l=function Oo(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...f){if(this instanceof c)return l.apply(this,f),this;const _=new c(...f);return E.annotation=_,E;function E(I,A,S){const k=I.hasOwnProperty(ni)?I[ni]:Object.defineProperty(I,ni,{value:[]})[ni];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class un{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Gt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Hc=new un("AnalyzeForEntryComponents");function mi(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),mi(l,s)):s!==i&&s.push(l)}return s}function yi(i,s){i.forEach(a=>Array.isArray(a)?yi(a,s):s(a))}function to(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Cs(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function vi(i,s,a){let l=Aa(i,s);return l>=0?i[1|l]=a:(l=~l,function _i(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function gl(i,s){const a=Aa(i,s);if(a>=0)return i[1|a]}function Aa(i,s){return function zc(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const f=l+(c-l>>1),_=i[f<<a];if(s===_)return f<<a;_>s?c=f:l=f+1}return~(c<<a)}(i,s,1)}const As={},Ss="__NG_DI_FLAG__",Po="ngTempTokenPath",D=/\n/gm,M="__source",F=fe({provide:String,useValue:fe});let Y;function ie(i){const s=Y;return Y=i,s}function xe(i,s=ct.Default){if(void 0===Y)throw new Re(203,"");return null===Y?Bs(i,void 0,s):Y.get(i,s&ct.Optional?null:void 0,s)}function Ue(i,s=ct.Default){return(function _n(){return Yr}()||xe)(ee(i),s)}const yt=Ue;function Rt(i){const s=[];for(let a=0;a<i.length;a++){const l=ee(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Re(900,"");let c,f=ct.Default;for(let _=0;_<l.length;_++){const E=l[_],I=Yn(E);"number"==typeof I?-1===I?c=E.token:f|=I:c=E}s.push(Ue(c,f))}else s.push(Ue(l))}return s}function pt(i,s){return i[Ss]=s,i.prototype[Ss]=s,i}function Yn(i){return i[Ss]}const Br=pt(eo("Inject",i=>({token:i})),-1),Cr=pt(eo("Optional"),8),Jn=pt(eo("SkipSelf"),4);class Qc{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ro(i){return i instanceof Qc?i.changingThisBreaksApplicationSecurity:i}const gy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,my=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var wn=(()=>((wn=wn||{})[wn.NONE=0]="NONE",wn[wn.HTML=1]="HTML",wn[wn.STYLE=2]="STYLE",wn[wn.SCRIPT=3]="SCRIPT",wn[wn.URL=4]="URL",wn[wn.RESOURCE_URL=5]="RESOURCE_URL",wn))();function ed(i){const s=function Cl(){const i=Te();return i&&i[12]}();return s?s.sanitize(wn.URL,i)||"":function xa(i,s){const a=function Vp(i){return i instanceof Qc&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?ro(i):function xs(i){return(i=String(i)).match(gy)||i.match(my)?i:"unsafe:"+i}(he(i))}const Jp="__ngContext__";function Hn(i,s){i[Jp]=s}function is(i){const s=function gr(i){return i[Jp]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Fi(i){return i.ngOriginalError}function tg(i,...s){i.error(...s)}class rd{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function jh(i){return i&&i.ngErrorLogger||tg}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Fi(s);for(;a&&Fi(a);)a=Fi(a);return a||null}}const Dy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(xt))();function Os(i){return i instanceof Function?i():i}var T=(()=>((T=T||{})[T.Important=1]="Important",T[T.DashCase=2]="DashCase",T))();function W(i,s){return undefined(i,s)}function je(i){const s=i[3];return Ci(s)?s[3]:s}function Xt(i){return Rl(i[13])}function si(i){return Rl(i[4])}function Rl(i){for(;null!==i&&!Ci(i);)i=i[4];return i}function cn(i,s,a,l,c){if(null!=l){let f,_=!1;Ci(l)?f=l:Fr(l)&&(_=!0,l=l[0]);const E=qt(l);0===i&&null!==a?null==c?j0(s,a,E):Pa(s,a,E,c||null,!0):1===i&&null!==a?Pa(s,a,E,c||null,!0):2===i?function dg(i,s,a){const l=og(i,s);l&&function AD(i,s,a,l){Jt(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=f&&function MD(i,s,a,l,c){const f=a[7];f!==qt(a)&&cn(s,i,l,f,c);for(let E=10;E<a.length;E++){const I=a[E];Ol(I[1],I,i,s,l,f)}}(s,i,f,a,c)}}function sd(i,s,a){if(Jt(i))return i.createElement(s,a);{const l=null!==a?function Xu(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function B0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Do(c,-1)),a.splice(l,1)}function $r(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&B0(c,l),s>0&&(i[a-1][4]=l[4]);const f=Cs(i,10+s);!function rg(i,s){Ol(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=f[19];null!==_&&_.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function qh(i,s){if(!(256&s[2])){const a=s[11];Jt(a)&&a.destroyNode&&Ol(i,s,a,3,null,null),function Cy(i){let s=i[13];if(!s)return ig(i[1],i);for(;s;){let a=null;if(Fr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Fr(s)&&ig(s[1],s),s=s[3];null===s&&(s=i),Fr(s)&&ig(s[1],s),a=s&&s[4]}s=a}}(s)}}function ig(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Ay(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof fu)){const f=a[l+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=c[f[_]],I=f[_+1];try{I.call(E)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function TD(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],E="function"==typeof _?_(s):qt(s[_]),I=l[c=a[f+2]],A=a[f+3];"boolean"==typeof A?E.removeEventListener(a[f],I,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),f+=2}else{const _=l[c=a[f+1]];a[f].call(_)}if(null!==l){for(let f=c+1;f<l.length;f++)l[f]();s[7]=null}}(i,s),1===s[1].type&&Jt(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Ci(s[3])){a!==s[3]&&B0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function zh(i,s,a){return function sg(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Pt.None||c===Pt.Emulated)return null}return Zn(l,a)}(i,s.parent,a)}function Pa(i,s,a,l,c){Jt(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function j0(i,s,a){Jt(i)?i.appendChild(s,a):s.appendChild(a)}function $0(i,s,a,l,c){null!==l?Pa(i,s,a,l,c):j0(i,s,a)}function og(i,s){return Jt(i)?i.parentNode(s):s.parentNode}let Wh=function Sy(i,s,a){return 40&i.type?Zn(i,a):null};function ug(i,s,a,l){const c=zh(i,l,s),f=s[11],E=function od(i,s,a){return Wh(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)$0(f,c,a[I],E,!1);else $0(f,c,a,E,!1)}function lg(i,s){if(null!==s){const a=s.type;if(3&a)return Zn(s,i);if(4&a)return cg(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return lg(i,l);{const c=i[s.index];return Ci(c)?cg(-1,c):qt(c)}}if(32&a)return W(s,i)()||qt(i[s.index]);{const l=G0(i,s);return null!==l?Array.isArray(l)?l[0]:lg(je(i[16]),l):lg(i,s.next)}}return null}function G0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function cg(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return lg(l,c)}return s[7]}function hg(i,s,a,l,c,f,_){for(;null!=a;){const E=l[a.index],I=a.type;if(_&&0===s&&(E&&Hn(qt(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)hg(i,s,a.child,l,c,f,!1),cn(s,i,c,E,f);else if(32&I){const A=W(a,l);let S;for(;S=A();)cn(s,i,c,S,f);cn(s,i,c,E,f)}else 16&I?ad(i,s,l,a,c,f):cn(s,i,c,E,f);a=_?a.projectionNext:a.next}}function Ol(i,s,a,l,c,f){hg(a,l,i.firstChild,s,c,f,!1)}function ad(i,s,a,l,c,f){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)cn(s,i,c,I[A],f);else hg(i,s,I,_[3],c,f,!0)}function xy(i,s,a){Jt(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Ry(i,s,a){Jt(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function fg(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===l||i.charCodeAt(c+f)<=32)return c}a=c+1}}const Ny="ng-template";function Oy(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==fg(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function z0(i){return 4===i.type&&i.value!==Ny}function RD(i,s,a){return s===(4!==i.type||a?i.value:Ny)}function ND(i,s,a){let l=4;const c=i.attrs||[],f=function W0(i){for(let s=0;s<i.length;s++)if(wa(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!RD(i,I,a)||""===I&&1===s.length){if(Li(l))return!1;_=!0}}else{const A=8&l?I:s[++E];if(8&l&&null!==i.attrs){if(!Oy(i.attrs,A,a)){if(Li(l))return!1;_=!0}continue}const k=Py(8&l?"class":I,c,z0(i),a);if(-1===k){if(Li(l))return!1;_=!0;continue}if(""!==A){let V;V=k>f?"":c[k+1].toLowerCase();const K=8&l?V:null;if(K&&-1!==fg(K,A,0)||2&l&&A!==V){if(Li(l))return!1;_=!0}}}}else{if(!_&&!Li(l)&&!Li(I))return!1;if(_&&Li(I))continue;_=!1,l=I|1&l}}return Li(l)||_}function Li(i){return 0==(1&i)}function Py(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let f=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function OD(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function pg(i,s,a=!1){for(let l=0;l<s.length;l++)if(ND(i,s[l],a))return!0;return!1}function Zh(i,s){return i?":not("+s.trim()+")":s}function PD(i){let s=i[0],a=1,l=2,c="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!Li(_)&&(s+=Zh(f,c),c=""),l=_,f=f||!Li(l);a++}return""!==c&&(s+=Zh(f,c)),s}const Dt={};function K0(i){Y0(bt(),Te(),jn()+i,pa())}function Y0(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Ea(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Xi(s,f,0,a)}Oi(a)}function gg(i,s){return i<<17|s<<2}function so(i){return i>>17&32767}function yg(i){return 2|i}function Bo(i){return(131068&i)>>2}function Kh(i,s){return-131069&i|s<<2}function Fy(i){return 1|i}function lE(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],f=a[l+1];if(-1!==f){const _=i.data[f];_a(c),_.contentQueries(2,s[f],f)}}}function kl(i,s,a,l,c,f,_,E,I,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Ri(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function Fa(i,s,a,l,c){let f=i.data[s];if(null===f)f=function Jh(i,s,a,l,c){const f=Co(),_=fa(),I=i.data[s]=function qy(i,s,a,l,c,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,l,c),function ol(){return lt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=c;const _=function Zs(){const i=lt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return ei(f,!0),f}function ld(i,s,a,l){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function La(i,s,a){To(s);try{const l=i.viewQuery;null!==l&&Sr(1,l,a);const c=i.template;null!==c&&HD(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&lE(i,s),i.staticViewQueries&&Sr(2,i.viewQuery,a);const f=i.components;null!==f&&function jD(i,s){for(let a=0;a<s.length;a++)Ag(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,So()}}function cd(i,s,a,l){const c=s[2];if(256==(256&c))return;To(s);const f=pa();try{Ri(s),function ga(i){return lt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&HD(i,s,a,2,l);const _=3==(3&c);if(!f)if(_){const A=i.preOrderCheckHooks;null!==A&&Ea(s,A,null)}else{const A=i.preOrderHooks;null!==A&&Xi(s,A,0,null),Mo(s,0)}if(function EE(i){for(let s=Xt(i);null!==s;s=si(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],f=c[3];0==(1024&c[2])&&Do(f,1),c[2]|=1024}}}(s),function Jy(i){for(let s=Xt(i);null!==s;s=si(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];Qi(l)&&cd(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&lE(i,s),!f)if(_){const A=i.contentCheckHooks;null!==A&&Ea(s,A)}else{const A=i.contentHooks;null!==A&&Xi(s,A,1),Mo(s,1)}!function BD(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Oi(~c);else{const f=c,_=a[++l],E=a[++l];al(_,f),E(2,s[f])}}}finally{Oi(-1)}}(i,s);const E=i.components;null!==E&&function Ig(i,s){for(let a=0;a<s.length;a++)KD(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Sr(2,I,l),!f)if(_){const A=i.viewCheckHooks;null!==A&&Ea(s,A)}else{const A=i.viewHooks;null!==A&&Xi(s,A,2),Mo(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Do(s[3],-1))}finally{So()}}function $D(i,s,a,l){const c=s[10],f=!pa(),_=Ws(s);try{f&&!_&&c.begin&&c.begin(),_&&La(i,s,l),cd(i,s,a,l)}finally{f&&!_&&c.end&&c.end()}}function HD(i,s,a,l,c){const f=jn(),_=2&l;try{Oi(-1),_&&s.length>20&&Y0(i,s,20,pa()),a(l,c)}finally{Oi(f)}}function Gy(i,s,a){!ha()||(function bg(i,s,a,l){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Vr(a,s),Hn(l,s);const _=a.initialInputs;for(let E=c;E<f;E++){const I=i.data[E],A=Ai(I);A&&vE(s,a,I);const S=tn(s,i,E,a);Hn(S,s),null!==_&&WD(0,E-c,S,I,0,_),A&&(Kn(a.index,s)[8]=S)}}(i,s,a,Zn(a,s)),128==(128&a.flags)&&function mE(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,E=function hu(){return lt.lFrame.currentDirectiveIndex}();try{Oi(_);for(let I=l;I<c;I++){const A=i.data[I],S=s[I];ma(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&ai(A,S)}}finally{Oi(-1),ma(E)}}(i,s,a))}function oo(i,s,a=Zn){const l=s.localNames;if(null!==l){let c=s.index+1;for(let f=0;f<l.length;f+=2){const _=l[f+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function et(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=dd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function dd(i,s,a,l,c,f,_,E,I,A){const S=20+l,k=S+c,V=function It(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Dt);return a}(S,k),K="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:K,incompleteFirstPass:!1}}function hE(i,s,a,l){const c=pd(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&wE(i).push(l,c.length-1))}function fE(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function zy(i,s,a,l){let c=!1;if(ha()){const f=function Ky(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let f=0;f<l.length;f++){const _=l[f];pg(a,_.selectors,!1)&&(c||(c=[]),fr(Vr(a,s),i,_.type),Ai(_)?(ui(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==f){c=!0,Cg(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const k=f[S];k.providersResolver&&k.providersResolver(k)}let E=!1,I=!1,A=ld(i,s,f.length,null);for(let S=0;S<f.length;S++){const k=f[S];a.mergedAttrs=pi(a.mergedAttrs,k.hostAttrs),Yy(i,a,s,A,k),_E(A,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const V=k.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function GD(i,s){const l=s.directiveEnd,c=i.data,f=s.attrs,_=[];let E=null,I=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],k=S.inputs,V=null===f||z0(s)?null:ZD(k,f);_.push(V),E=fE(k,A,E),I=fE(S.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function yE(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new Re(-301,!1);l.push(s[c],f)}}}(a,l,_)}return a.mergedAttrs=pi(a.mergedAttrs,a.attrs),c}function Wy(i,s,a,l,c,f){const _=f.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function Zy(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,c,_)}}function ai(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function ui(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function _E(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Ai(s)&&(a[""]=i)}}function Cg(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Yy(i,s,a,l,c){i.data[l]=c;const f=c.factory||(c.factory=cr(c.type)),_=new fu(f,Ai(c),null);i.blueprint[l]=_,a[l]=_,Wy(i,s,0,l,ld(i,a,c.hostVars,Dt),c)}function vE(i,s,a){const l=Zn(s,i),c=et(a),f=i[10],_=fd(i,kl(i,c,null,a.onPush?64:16,l,s,f,f.createRenderer(l,a),null,null));i[s.index]=_}function ao(i,s,a,l,c,f){const _=Zn(i,s);!function ef(i,s,a,l,c,f,_){if(null==f)Jt(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?he(f):_(f,l||"",c);Jt(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,f,i.value,a,l,c)}function WD(i,s,a,l,c,f){const _=f[s];if(null!==_){const E=l.setInput;for(let I=0;I<_.length;){const A=_[I++],S=_[I++],k=_[I++];null!==E?l.setInput(a,k,A,S):a[S]=k}}}function ZD(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function Qy(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function KD(i,s){const a=Kn(s,i);if(Qi(a)){const l=a[1];80&a[2]?cd(l,a,l.template,a[8]):a[5]>0&&Tg(a)}}function Tg(i){for(let l=Xt(i);null!==l;l=si(l))for(let c=10;c<l.length;c++){const f=l[c];if(1024&f[2]){const _=f[1];cd(_,f,_.template,f[8])}else f[5]>0&&Tg(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=Kn(a[l],i);Qi(c)&&c[5]>0&&Tg(c)}}function Ag(i,s){const a=Kn(s,i),l=a[1];(function Xy(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),La(l,a,a[8])}function fd(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function nf(i){for(;i;){i[2]|=64;const s=je(i);if(Yu(i)&&!s)return i;i=s}return null}function rf(i,s,a){const l=s[10];l.begin&&l.begin();try{cd(i,s,i.template,a)}catch(c){throw sf(s,c),c}finally{l.end&&l.end()}}function t_(i){!function e_(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=is(a),c=l[1];$D(c,l,c.template,a)}}(i[8])}function Sr(i,s,a){_a(0),s(i,a)}const XD=(()=>Promise.resolve(null))();function pd(i){return i[7]||(i[7]=[])}function wE(i){return i.cleanup||(i.cleanup=[])}function sf(i,s){const a=i[9],l=a?a.get(rd,null):null;l&&l.handleError(s)}function of(i,s,a,l,c){for(let f=0;f<a.length;){const _=a[f++],E=a[f++],I=s[_],A=i.data[_];null!==A.setInput?A.setInput(I,c,l,E):I[E]=c}}function uo(i,s,a){const l=_s(s,i);!function Tu(i,s,a){Jt(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function gd(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?f=E:1==f?c=ce(c,E):2==f&&(l=ce(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Mg=new un("INJECTOR",-1);class DE{get(s,a=As){if(a===As){const l=new Error(`NullInjectorError: No provider for ${se(s)}!`);throw l.name="NullInjectorError",l}return a}}const xg=new un("Set Injector scope."),md={},i_={};let Rg;function bE(){return void 0===Rg&&(Rg=new DE),Rg}function Ng(i,s=null,a=null,l){const c=Og(i,s,a,l);return c._resolveInjectorDefTypes(),c}function Og(i,s=null,a=null,l){return new s_(i,a,s||bE(),l)}class s_{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&yi(a,E=>this.processProvider(E,s,a)),yi([s],E=>this.processInjectorType(E,[],f)),this.records.set(Mg,yd(void 0,this));const _=this.records.get(xg);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:se(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=As,l=ct.Default){this.assertNotDestroyed();const c=ie(this),f=bn(void 0);try{if(!(l&ct.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function u_(i){return"function"==typeof i||"object"==typeof i&&i instanceof un}(s)&&St(s);E=I&&this.injectableDefInScope(I)?yd(Xn(s),md):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&ct.Self?bE():this.parent).get(s,a=l&ct.Optional&&a===As?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Po]=_[Po]||[]).unshift(se(s)),c)throw _;return function Qn(i,s,a,l){const c=i[Po];throw s[M]&&c.unshift(s[M]),i.message=function Ms(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=se(s);if(Array.isArray(s))c=s.map(se).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):se(E)))}c=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[Po]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{bn(f),ie(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(se(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processInjectorType(s,a,l){if(!(s=ee(s)))return!1;let c=vr(s);const f=null==c&&s.ngModule||void 0,_=void 0===f?s:f,E=-1!==l.indexOf(_);if(void 0!==f&&(c=vr(f)),null==c)return!1;if(null!=c.imports&&!E){let S;l.push(_);try{yi(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:V,providers:K}=S[k];yi(K,ye=>this.processProvider(ye,V,K||L))}}this.injectorDefTypes.add(_);const I=cr(_)||(()=>new _);this.records.set(_,yd(I,md));const A=c.providers;if(null!=A&&!E){const S=s;yi(A,k=>this.processProvider(k,S,A))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,l){let c=_d(s=ee(s))?s:ee(s&&s.provide);const f=function Pg(i,s,a){return CE(i)?yd(void 0,i.useValue):yd(kg(i),md)}(s);if(_d(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=yd(void 0,md,!0),_.factory=()=>Rt(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===md&&(a.value=i_,a.value=a.factory()),"object"==typeof a.value&&a.value&&function nb(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=ee(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Xn(i){const s=St(i),a=null!==s?s.factory:cr(i);if(null!==a)return a;if(i instanceof un)throw new Re(204,!1);if(i instanceof Function)return function Gr(i){const s=i.length;if(s>0)throw function ts(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Re(204,!1);const a=function Zr(i){const s=i&&(i[wi]||i[Kr]);if(s){const a=function sr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function kg(i,s,a){let l;if(_d(i)){const c=ee(i);return cr(c)||Xn(c)}if(CE(i))l=()=>ee(i.useValue);else if(function tb(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Rt(i.deps||[]));else if(function TE(i){return!(!i||!i.useExisting)}(i))l=()=>Ue(ee(i.useExisting));else{const c=ee(i&&(i.useClass||i.provide));if(!function a_(i){return!!i.deps}(i))return cr(c)||Xn(c);l=()=>new c(...Rt(i.deps))}return l}function yd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function CE(i){return null!==i&&"object"==typeof i&&F in i}function _d(i){return"function"==typeof i}let Ps=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return Ng({name:""},l,a,"");{const f=null!==(c=a.name)&&void 0!==c?c:"";return Ng({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=As,i.NULL=new DE,i.\u0275prov=Gt({token:i,providedIn:"any",factory:()=>Ue(Mg)}),i.__NG_ELEMENT_ID__=-1,i})();function g_(i,s){Fc(is(i)[1],an())}function Ll(i){let s=function m_(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Ai(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Re(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=df(i.inputs),_.declaredInputs=df(i.declaredInputs),_.outputs=df(i.outputs);const E=c.hostBindings;E&&hf(i,E);const I=c.viewQuery,A=c.contentQueries;if(I&&__(i,I),A&&Ug(i,A),ue(i.inputs,c.inputs),ue(i.declaredInputs,c.declaredInputs),ue(i.outputs,c.outputs),Ai(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(i),E===Ll&&(a=!1)}}s=Object.getPrototypeOf(s)}!function y_(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=pi(c.hostAttrs,a=pi(a,c.hostAttrs))}}(l)}function df(i){return i===ur?{}:i===L?[]:i}function __(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function Ug(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,f)=>{s(l,c,f),a(l,c,f)}:s}function hf(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Vl=null;function Au(){if(!Vl){const i=xt.Symbol;if(i&&i.iterator)Vl=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Vl=l)}}}return Vl}function wd(i){return!!Ul(i)&&(Array.isArray(i)||!(i instanceof Map)&&Au()in i)}function Ul(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function er(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function ff(i,s,a,l){const c=Te();return er(c,vs(),s)&&(bt(),ao(vn(),c,i,s,a,l)),ff}function VE(i,s,a,l,c,f,_,E){const I=Te(),A=bt(),S=i+20,k=A.firstCreatePass?function LE(i,s,a,l,c,f,_,E,I){const A=s.consts,S=Fa(s,i,4,_||null,hi(A,E));zy(s,a,S,hi(A,I)),Fc(s,S);const k=S.tViews=dd(2,S,l,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,A,I,s,a,l,c,f,_):A.data[S];ei(k,!1);const V=I[11].createComment("");ug(A,I,V,k),Hn(V,I),fd(I,I[S]=Qy(V,I,V,k)),Ti(k)&&Gy(A,I,k),null!=_&&oo(I,k,E)}function UE(i){return function xi(i,s){return i[s]}(function lu(){return lt.lFrame.contextLView}(),20+i)}function vf(i,s=ct.Default){const a=Te();return null===a?Ue(i,s):ti(an(),a,ee(i),s)}function Wg(){throw new Error("invalid")}function jl(i,s,a){const l=Te();return er(l,vs(),s)&&function nn(i,s,a,l,c,f,_,E){const I=Zn(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[l])?(of(i,a,S,l,c),wc(s)&&function Dg(i,s){const a=Kn(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function qD(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,Jt(f)?f.setProperty(I,l,c):Uc(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}(bt(),vn(),l,i,s,l[11],a,!1),jl}function Zg(i,s,a,l,c){const _=c?"class":"style";of(i,a,s.inputs[_],_,l)}function $l(i,s,a,l){const c=Te(),f=bt(),_=20+i,E=c[11],I=c[_]=sd(E,s,function kc(){return lt.lFrame.currentNamespace}()),A=f.firstCreatePass?function A_(i,s,a,l,c,f,_){const E=s.consts,A=Fa(s,i,2,c,hi(E,f));return zy(s,a,A,hi(E,_)),null!==A.attrs&&gd(A,A.attrs,!1),null!==A.mergedAttrs&&gd(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,f,c,0,s,a,l):f.data[_];ei(A,!0);const S=A.mergedAttrs;null!==S&&dr(E,I,S);const k=A.classes;null!==k&&Ry(E,I,k);const V=A.styles;return null!==V&&xy(E,I,V),64!=(64&A.flags)&&ug(f,c,I,A),0===function au(){return lt.lFrame.elementDepthCount}()&&Hn(I,c),function da(){lt.lFrame.elementDepthCount++}(),Ti(A)&&(Gy(f,c,A),function cE(i,s,a){if(iu(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,A,c)),null!==l&&oo(c,A),$l}function Ef(){let i=an();fa()?function sl(){lt.lFrame.isParent=!1}():(i=i.parent,ei(i,!1));const s=i;!function nl(){lt.lFrame.elementDepthCount--}();const a=bt();return a.firstCreatePass&&(Fc(a,i),iu(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Vc(i){return 0!=(16&i.flags)}(s)&&Zg(a,s,Te(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Np(i){return 0!=(32&i.flags)}(s)&&Zg(a,s,Te(),s.stylesWithoutHost,!1),Ef}function wf(i,s,a,l){return $l(i,s,a,l),Ef(),wf}function x_(){return Te()}function If(i){return!!i&&"function"==typeof i.then}function Yg(i){return!!i&&"function"==typeof i.subscribe}const R_=Yg;function xd(i,s,a,l){const c=Te(),f=bt(),_=an();return function Ru(i,s,a,l,c,f,_,E){const I=Ti(l),S=i.firstCreatePass&&wE(i),k=s[8],V=pd(s);let K=!0;if(3&l.type||E){const $e=Zn(l,s),Xe=E?E($e):$e,De=V.length,at=E?Nt=>E(qt(Nt[l.index])):l.index;if(Jt(a)){let Nt=null;if(!E&&I&&(Nt=function KE(i,s,a,l){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===a&&c[f+1]===l){const E=s[7],I=c[f+2];return E.length>I?E[I]:null}"string"==typeof _&&(f+=2)}return null}(i,s,c,l.index)),null!==Nt)(Nt.__ngLastListenerFn__||Nt).__ngNextListenerFn__=f,Nt.__ngLastListenerFn__=f,K=!1;else{f=Qg(l,s,k,f,!1);const Zt=a.listen(Xe,c,f);V.push(f,Zt),S&&S.push(c,at,De,De+1)}}else f=Qg(l,s,k,f,!0),Xe.addEventListener(c,f,_),V.push(f),S&&S.push(c,at,De,_)}else f=Qg(l,s,k,f,!1);const ye=l.outputs;let Pe;if(K&&null!==ye&&(Pe=ye[c])){const $e=Pe.length;if($e)for(let Xe=0;Xe<$e;Xe+=2){const ls=s[Pe[Xe]][Pe[Xe+1]].subscribe(f),gc=V.length;V.push(f,ls),S&&S.push(c,l.index,gc,-(gc+1))}}}(f,c,c[11],_,i,s,!!a,l),xd}function O_(i,s,a,l){try{return!1!==a(l)}catch(c){return sf(i,c),!1}}function Qg(i,s,a,l,c){return function f(_){if(_===Function)return l;const E=2&i.flags?Kn(i.index,s):s;0==(32&s[2])&&nf(E);let I=O_(s,0,l,_),A=f.__ngNextListenerFn__;for(;A;)I=O_(s,0,A,_)&&I,A=A.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function P_(i=1){return function Ni(i){return(lt.lFrame.contextLView=function lh(i,s){for(;i>0;)s=s[15],i--;return s}(i,lt.lFrame.contextLView))[8]}(i)}function Mr(i,s,a,l,c){const f=i[a+1],_=null===s;let E=l?so(f):Bo(f),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];Rd(i[E],s)&&(I=!0,i[E+1]=l?Fy(S):yg(S)),E=l?so(S):Bo(S)}I&&(i[a+1]=l?yg(f):Fy(f))}function Rd(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Aa(i,s)>=0}function V_(i,s){return function fo(i,s,a,l){const c=Te(),f=bt(),_=function fi(i){const s=lt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function iw(i,s,a,l){const c=i.data;if(null===c[a+1]){const f=c[jn()],_=function Bi(i,s){return s>=i.expandoStartIndex}(i,a);(function ql(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!_&&(s=!1),s=function sw(i,s,a,l){const c=function ya(i){const s=lt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=dt(a=Mn(null,i,s,a,l),s.attrs,l),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=Mn(c,i,s,a,l),null===f){let I=function Ct(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Bo(l))return i[so(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=Mn(null,i,s,I[1],l),I=dt(I,s.attrs,l),function Nd(i,s,a,l){i[so(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else f=function ow(i,s,a){let l;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)l=dt(l,i[f].hostAttrs,a);return dt(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,l),function vb(i,s,a,l,c,f){let _=f?s.classBindings:s.styleBindings,E=so(_),I=Bo(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||Aa(k,S)>0)&&(A=!0)}else S=a;if(c)if(0!==I){const V=so(i[E+1]);i[l+1]=gg(V,E),0!==V&&(i[V+1]=Kh(i[V+1],l)),i[E+1]=function mg(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=gg(E,0),0!==E&&(i[E+1]=Kh(i[E+1],l)),E=l;else i[l+1]=gg(I,0),0===E?E=l:i[I+1]=Kh(i[I+1],l),I=l;A&&(i[l+1]=yg(i[l+1])),Mr(i,S,l,!0),Mr(i,S,l,!1),function nw(i,s,a,l,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Aa(f,s)>=0&&(a[l+1]=Fy(a[l+1]))}(s,S,i,l,f),_=gg(E,I),f?s.classBindings=_:s.styleBindings=_}(c,f,s,a,_,l)}}(f,i,_,l),s!==Dt&&er(c,_,s)&&function Od(i,s,a,l,c,f,_,E){if(!(3&s.type))return;const I=i.data,A=I[E+1];rm(function X0(i){return 1==(1&i)}(A)?Bt(I,s,a,c,Bo(A),_):void 0)||(rm(f)||function J0(i){return 2==(2&i)}(A)&&(f=Bt(I,null,a,c,E,_)),function My(i,s,a,l,c){const f=Jt(i);if(s)c?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:T.DashCase;if(null==c)f?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=T.Important),f?i.setStyle(a,l,c,_):a.style.setProperty(l,c,E?"important":"")}}}(l,_,_s(jn(),a),c,f))}(f,f.data[jn()],c,c[11],i,c[_+1]=function yr(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=se(ro(i)))),i}(s,a),l,_)}(i,s,null,!0),V_}function Mn(i,s,a,l,c){let f=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(f=s[E],l=dt(l,f.hostAttrs,c),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function dt(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),vi(i,_,!!a||s[++f]))}return void 0===i?null:i}function Bt(i,s,a,l,c,f){const _=null===s;let E;for(;c>0;){const I=i[c],A=Array.isArray(I),S=A?I[1]:I,k=null===S;let V=a[c+1];V===Dt&&(V=k?L:void 0);let K=k?gl(V,l):S===l?V:void 0;if(A&&!rm(K)&&(K=gl(I,l)),rm(K)&&(E=K,_))return E;const ye=i[c+1];c=_?so(ye):Bo(ye)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=gl(I,l))}return E}function rm(i){return void 0!==i}function lw(i,s=""){const a=Te(),l=bt(),c=i+20,f=l.firstCreatePass?Fa(l,c,1,s,null):l.data[c],_=a[c]=function oi(i,s){return Jt(i)?i.createText(s):i.createTextNode(s)}(a[11],s);ug(l,a,_,f),ei(f,!1)}function im(i,s,a){const l=Te(),c=function Mu(i,s,a,l){return er(i,vs(),a)?s+he(a)+l:Dt}(l,i,s,a);return c!==Dt&&uo(l,jn(),c),im}const Ha=void 0;var am=["en",[["a","p"],["AM","PM"],Ha],[["AM","PM"],Ha,Ha],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ha,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ha,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ha,"{1} 'at' {0}",Ha],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Zl(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let qo={};function z_(i){const s=function mn(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Ln(s);if(a)return a;const l=s.split("-")[0];if(a=Ln(l),a)return a;if("en"===l)return am;throw new Error(`Missing locale data for the locale "${i}".`)}function W_(i){return z_(i)[Je.PluralCase]}function Ln(i){return i in qo||(qo[i]=xt.ng&&xt.ng.common&&xt.ng.common.locales&&xt.ng.common.locales[i]),qo[i]}var Je=(()=>((Je=Je||{})[Je.LocaleId=0]="LocaleId",Je[Je.DayPeriodsFormat=1]="DayPeriodsFormat",Je[Je.DayPeriodsStandalone=2]="DayPeriodsStandalone",Je[Je.DaysFormat=3]="DaysFormat",Je[Je.DaysStandalone=4]="DaysStandalone",Je[Je.MonthsFormat=5]="MonthsFormat",Je[Je.MonthsStandalone=6]="MonthsStandalone",Je[Je.Eras=7]="Eras",Je[Je.FirstDayOfWeek=8]="FirstDayOfWeek",Je[Je.WeekendRange=9]="WeekendRange",Je[Je.DateFormat=10]="DateFormat",Je[Je.TimeFormat=11]="TimeFormat",Je[Je.DateTimeFormat=12]="DateTimeFormat",Je[Je.NumberSymbols=13]="NumberSymbols",Je[Je.NumberFormats=14]="NumberFormats",Je[Je.CurrencyCode=15]="CurrencyCode",Je[Je.CurrencySymbol=16]="CurrencySymbol",Je[Je.CurrencyName=17]="CurrencyName",Je[Je.Currencies=18]="Currencies",Je[Je.Directionality=19]="Directionality",Je[Je.PluralCase=20]="PluralCase",Je[Je.ExtraData=21]="ExtraData",Je))();const um="en-US";let xf=um;function ec(i,s,a,l,c){if(i=ee(i),Array.isArray(i))for(let f=0;f<i.length;f++)ec(i[f],s,a,l,c);else{const f=bt(),_=Te();let E=_d(i)?i:ee(i.provide),I=kg(i);const A=an(),S=1048575&A.providerIndexes,k=A.directiveStart,V=A.providerIndexes>>20;if(_d(i)||!i.multi){const K=new fu(I,c,vf),ye=ym(E,s,c?S:S+V,k);-1===ye?(fr(Vr(A,_),f,E),tc(f,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(K),_.push(K)):(a[ye]=K,_[ye]=K)}else{const K=ym(E,s,S+V,k),ye=ym(E,s,S,S+V),Pe=K>=0&&a[K],$e=ye>=0&&a[ye];if(c&&!$e||!c&&!Pe){fr(Vr(A,_),f,E);const Xe=function $w(i,s,a,l,c){const f=new fu(i,a,vf);return f.multi=[],f.index=s,f.componentProviders=0,Vf(f,c,l&&!a),f}(c?jw:Bw,a.length,c,l,I);!c&&$e&&(a[ye].providerFactory=Xe),tc(f,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Xe),_.push(Xe)}else tc(f,i,K>-1?K:ye,Vf(a[c?ye:K],I,!c&&l));!c&&l&&$e&&a[ye].componentProviders++}}}function tc(i,s,a,l){const c=_d(s),f=function o_(i){return!!i.useClass}(s);if(c||f){const I=(f?ee(s.useClass):s).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,I]):A[S+1].push(l,I)}else A.push(a,I)}}}function Vf(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function ym(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function Bw(i,s,a,l){return lv(this.multi,[])}function jw(i,s,a,l){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=tn(a,a[1],this.providerFactory.index,l);f=E.slice(0,_),lv(c,f);for(let I=_;I<E.length;I++)f.push(E[I])}else f=[],lv(c,f);return f}function lv(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function cv(i,s=[]){return a=>{a.providersResolver=(l,c)=>function mm(i,s,a){const l=bt();if(l.firstCreatePass){const c=Ai(i);ec(a,l.data,l.blueprint,c,!0),ec(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class Hw{}class jb{resolveComponentFactory(s){throw function Ub(i){const s=Error(`No component factory found for ${se(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let zn=(()=>{class i{}return i.NULL=new jb,i})();function dv(){return nc(an(),Te())}function nc(i,s){return new Ga(Zn(i,s))}let Ga=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=dv,i})();function Qo(i){return i instanceof Ga?i.nativeElement:i}class hv{}let Uf=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function zw(){const i=Te(),a=Kn(an().index,i);return function qw(i){return i[11]}(Fr(a)?a:i)}(),i})(),Ww=(()=>{class i{}return i.\u0275prov=Gt({token:i,providedIn:"root",factory:()=>null}),i})();class Zw{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Kw=new Zw("13.2.7"),rc={};function Hd(i,s,a,l,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(qt(f)),Ci(f))for(let E=10;E<f.length;E++){const I=f[E],A=I[1].firstChild;null!==A&&Hd(I[1],I,A,l)}const _=a.type;if(8&_)Hd(i,s,a.child,l);else if(32&_){const E=W(a,s);let I;for(;I=E();)l.push(I)}else if(16&_){const E=G0(s,a);if(Array.isArray(E))l.push(...E);else{const I=je(s[16]);Hd(I[1],I,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class Bf{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Hd(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Ci(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&($r(s,l),Cs(a,l))}this._attachedToViewContainer=!1}qh(this._lView[1],this._lView)}onDestroy(s){hE(this._lView[1],this._lView,null,s)}markForCheck(){nf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){rf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function QD(i,s,a){cu(!0);try{rf(i,s,a)}finally{cu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Hh(i,s){Ol(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=s}}class Yw extends Bf{constructor(s){super(s),this._view=s}detectChanges(){t_(this._view)}checkNoChanges(){!function JD(i){cu(!0);try{t_(i)}finally{cu(!1)}}(this._view)}get context(){return null}}class fv extends zn{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=On(s);return new gv(a,this.ngModule)}}function pv(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class gv extends Hw{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function kD(i){return i.map(PD).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return pv(this.componentDef.inputs)}get outputs(){return pv(this.componentDef.outputs)}create(s,a,l,c){const f=(c=c||this.ngModule)?function Qw(i,s){return{get:(a,l,c)=>{const f=i.get(a,rc,c);return f!==rc||l===rc?f:s.get(a,l,c)}}}(s,c.injector):s,_=f.get(hv,ua),E=f.get(Ww,null),I=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function hd(i,s,a){if(Jt(i))return i.selectRootElement(s,a===Pt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):sd(_.createRenderer(null,this.componentDef),A,function $b(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),k=this.componentDef.onPush?576:528,V=function p_(i,s){return{components:[],scheduler:i||Dy,clean:XD,playerHandler:s||null,flags:0}}(),K=dd(0,null,null,1,0,null,null,null,null,null),ye=kl(null,K,V,k,null,null,_,I,E,f);let Pe,$e;To(ye);try{const Xe=function Ed(i,s,a,l,c,f){const _=a[1];a[20]=i;const I=Fa(_,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(gd(I,A,!0),null!==i&&(dr(c,i,A),null!==I.classes&&Ry(c,i,I.classes),null!==I.styles&&xy(c,i,I.styles)));const S=l.createRenderer(i,s),k=kl(a,et(s),null,s.onPush?64:16,a[20],I,l,S,f||null,null);return _.firstCreatePass&&(fr(Vr(I,a),_,s.type),ui(_,I),Cg(I,a.length,1)),fd(a,k),a[20]=k}(S,this.componentDef,ye,_,I);if(S)if(l)dr(I,S,["ng-version",Kw.full]);else{const{attrs:De,classes:at}=function FD(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++l]):8===c&&a.push(f);else{if(!Li(c))break;c=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);De&&dr(I,S,De),at&&at.length>0&&Ry(I,S,at.join(" "))}if($e=dn(K,20),void 0!==a){const De=$e.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const Nt=a[at];De.push(null!=Nt?Array.from(Nt):null)}}Pe=function cf(i,s,a,l,c){const f=a[1],_=function gE(i,s,a){const l=an();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Yy(i,l,s,ld(i,s,1,null),a));const c=tn(s,i,l.directiveStart,l);Hn(c,s);const f=Zn(l,s);return f&&Hn(f,s),c}(f,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=an();s.contentQueries(1,_,I.directiveStart)}const E=an();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Oi(E.index),Wy(a[1],E,0,E.directiveStart,E.directiveEnd,s),ai(s,_)),_}(Xe,this.componentDef,ye,V,[g_]),La(K,ye,null)}finally{So()}return new Gd(this.componentType,Pe,nc($e,ye),ye,$e)}}class Gd extends class Vb{}{constructor(s,a,l,c,f){super(),this.location=l,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Yw(c),this.componentType=s}get injector(){return new Js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class qd{}class Jw{}const ic=new Map;class _v extends qd{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new fv(this);const l=Pn(s);this._bootstrapComponents=Os(l.bootstrap),this._r3Injector=Og(s,a,[{provide:qd,useValue:this},{provide:zn,useValue:this.componentFactoryResolver}],se(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Ps.THROW_IF_NOT_FOUND,l=ct.Default){return s===Ps||s===qd||s===Mg?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class vv extends Jw{constructor(s){super(),this.moduleType=s,null!==Pn(s)&&function eI(i){const s=new Set;!function a(l){const c=Pn(l,!0),f=c.id;null!==f&&(function Xw(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${se(s)} vs ${se(s.name)}`)}(f,ic.get(f),l),ic.set(f,l));const _=Os(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new _v(this.moduleType,s)}}function tI(i,s,a,l){return function nI(i,s,a,l,c,f){const _=s+a;return er(i,_,c)?function lo(i,s,a){return i[s]=a}(i,_+1,f?l.call(f,c):l(c)):function $f(i,s){const a=i[s];return a===Dt?void 0:a}(i,_+1)}(Te(),function Tn(){const i=lt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),i,s,a,l)}function za(i){return s=>{setTimeout(i,void 0,s)}}const Jo=class Gf extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,f,_;let E=s,I=a||(()=>null),A=l;if(s&&"object"==typeof s){const k=s;E=null===(c=k.next)||void 0===c?void 0:c.bind(k),I=null===(f=k.error)||void 0===f?void 0:f.bind(k),A=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(I=za(I),E&&(E=za(E)),A&&(A=za(A)));const S=super.subscribe({next:E,error:I,complete:A});return s instanceof J.w0&&s.add(S),S}};function sc(){return this._results[Au()]()}class vm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Au(),l=vm.prototype;l[a]||(l[a]=sc)}get changes(){return this._changes||(this._changes=new Jo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=mi(s);(this._changesDetected=!function Eu(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],f=s[l];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let oc=(()=>{class i{}return i.__NG_ELEMENT_ID__=wv,i})();const lI=oc,Rr=class extends lI{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=kl(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),La(a,l,s),new Bf(l)}};function wv(){return zd(an(),Te())}function zd(i,s){return 4&i.type?new Rr(s,i,nc(i,s)):null}let Wd=(()=>{class i{}return i.__NG_ELEMENT_ID__=Vu,i})();function Vu(){return Uu(an(),Te())}const cI=Wd,dI=class extends cI{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return nc(this._hostTNode,this._hostLView)}get injector(){return new Js(this._hostTNode,this._hostLView)}get parentInjector(){const s=es(this._hostTNode,this._hostLView);if(Bc(s)){const a=Tt(s,this._hostLView),l=Lr(s);return new Js(a[1].data[l+8],a)}return new Js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Iv(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,f){const _=s&&!function br(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const k=a||{};E=k.index,l=k.injector,c=k.projectableNodes,f=k.ngModuleRef}const I=_?s:new gv(On(s)),A=l||this.parentInjector;if(!f&&null==I.ngModule){const V=(_?A:this.parentInjector).get(qd,null);V&&(f=V)}const S=I.create(A,c,void 0,f);return this.insert(S.hostView,E),S}insert(s,a){const l=s._lView,c=l[1];if(function ca(i){return Ci(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=l[3],V=new dI(k,k[6],k[3]);V.detach(V.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function Gh(i,s,a,l){const c=10+l,f=a.length;l>0&&(a[c-1][4]=s),l<f-10?(s[4]=a[c],to(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function Ty(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,_,f);const E=cg(f,_),I=l[11],A=og(I,_[7]);return null!==A&&function $h(i,s,a,l,c,f){l[0]=c,l[6]=s,Ol(i,l,a,1,c,f)}(c,_[6],I,l,A,E),s.attachToViewContainerRef(),to(Zd(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Iv(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=$r(this._lContainer,a);l&&(Cs(Zd(this._lContainer),a),qh(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=$r(this._lContainer,a);return l&&null!=Cs(Zd(this._lContainer),a)?new Bf(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Iv(i){return i[8]}function Zd(i){return i[8]||(i[8]=[])}function Uu(i,s){let a;const l=s[i.index];if(Ci(l))a=l;else{let c;if(8&i.type)c=qt(l);else{const f=s[11];c=f.createComment("");const _=Zn(i,s);Pa(f,og(f,_),c,function SD(i,s){return Jt(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=Qy(l,s,c,i),fd(s,a)}return new dI(a,i,s)}class wm{constructor(s){this.queryList=s,this.matches=null}clone(){return new wm(this.queryList)}setDirty(){this.queryList.setDirty()}}class qf{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<l;f++){const _=a.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new qf(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==yI(s,a).matches&&this.queries[a].setDirty()}}class Im{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Dm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,c);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new Dm(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Dv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Dv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const f=l[c];this.matchTNodeWithReadOption(s,a,hI(a,f)),this.matchTNodeWithReadOption(s,a,hl(a,s,f,!1,!1))}else l===oc?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,hl(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Ga||c===Wd||c===oc&&4&a.type)this.addMatch(a.index,-2);else{const f=hl(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function hI(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function bv(i,s,a,l){return-1===a?function fI(i,s){return 11&i.type?nc(i,s):4&i.type?zd(i,s):null}(s,i):-2===a?function zf(i,s,a){return a===Ga?nc(s,i):a===oc?zd(s,i):a===Wd?Uu(s,i):void 0}(i,s,l):tn(i,i[1],a,s)}function Bu(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const f=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const A=_[I];E.push(A<0?null:bv(s,f[A],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function Cv(i,s,a,l){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const _=Bu(i,s,c,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)l.push(_[E/2]);else{const A=f[E+1],S=s[-I];for(let k=10;k<S.length;k++){const V=S[k];V[17]===V[3]&&Cv(V[1],V,A,l)}if(null!==S[9]){const k=S[9];for(let V=0;V<k.length;V++){const K=k[V];Cv(K[1],K,A,l)}}}}}return l}function Tv(i){const s=Te(),a=bt(),l=ul();_a(l+1);const c=yI(a,l);if(i.dirty&&Ws(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?Cv(a,s,l,[]):Bu(a,s,c,l);i.reset(f,Qo),i.notifyOnChanges()}return!0}return!1}function pI(i,s,a,l){const c=bt();if(c.firstCreatePass){const f=an();(function $u(i,s,a){null===i.queries&&(i.queries=new Dm),i.queries.track(new Dv(s,a))})(c,new Im(s,a,l),f.index),function mI(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function ju(i,s,a){const l=new vm(4==(4&a));hE(i,s,l,l.destroy),null===s[19]&&(s[19]=new qf),s[19].queries.push(new wm(l))}(c,Te(),a)}function gI(){return function Wf(i,s){return i[19].queries[s].queryList}(Te(),ul())}function yI(i,s){return i.queries.getByIndex(s)}function Yf(...i){}const cc=new un("Application Initializer");let qu=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Yf,this.reject=Yf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(If(f))a.push(f);else if(R_(f)){const _=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ue(cc,8))},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const km=new un("AppId",{providedIn:"root",factory:function Qf(){return`${Fm()}${Fm()}${Fm()}`}});function Fm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Fv=new un("Platform Initializer"),bI=new un("Platform ID"),Lm=new un("appBootstrapListener");let Vm=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Gt({token:i,factory:i.\u0275fac}),i})();const Lv=new un("LocaleId",{providedIn:"root",factory:()=>yt(Lv,ct.Optional|ct.SkipSelf)||function hC(){return"undefined"!=typeof $localize&&$localize.locale||um}()}),Vv=new un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class fC{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let pC=(()=>{class i{compileModuleSync(a){return new vv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=Os(Pn(a).declarations).reduce((_,E)=>{const I=On(E);return I&&_.push(new gv(I)),_},[]);return new fC(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Uv=(()=>Promise.resolve(0))();function Um(i){"undefined"==typeof Zone?Uv.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class us{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jo(!1),this.onMicrotaskEmpty=new Jo(!1),this.onStable=new Jo(!1),this.onError=new Jo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function CI(){let i=xt.requestAnimationFrame,s=xt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Bv(i){const s=()=>{!function jm(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(xt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Jf(i),i.isCheckStableRunning=!0,dc(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Jf(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,f,_,E)=>{try{return $m(i),a.invokeTask(c,f,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),jv(i)}},onInvoke:(a,l,c,f,_,E,I)=>{try{return $m(i),a.invoke(c,f,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),jv(i)}},onHasTask:(a,l,c,f)=>{a.hasTask(c,f),l===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Jf(i),dc(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!us.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(us.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,s,Bm,Yf,Yf);try{return f.runTask(_,a,l)}finally{f.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const Bm={};function dc(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Jf(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function $m(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function jv(i){i._nesting--,dc(i)}class mC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jo,this.onMicrotaskEmpty=new Jo,this.onStable=new Jo,this.onError=new Jo}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let $v=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{us.assertNotInAngularZone(),Um(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Um(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ue(us))},i.\u0275prov=Gt({token:i,factory:i.\u0275fac}),i})(),TI=(()=>{class i{constructor(){this._applications=new Map,Hm.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Hm.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Gt({token:i,factory:i.\u0275fac}),i})();class yC{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function _C(i){Hm=i}let Hi,Hm=new yC;const MI=new un("AllowMultipleToken");class vC{constructor(s,a){this.name=s,this.token=a}}function xI(i,s,a=[]){const l=`Platform: ${s}`,c=new un(l);return(f=[])=>{let _=qm();if(!_||_.injector.get(MI,!1))if(i)i(a.concat(f).concat({provide:c,useValue:!0}));else{const E=a.concat(f).concat({provide:c,useValue:!0},{provide:xg,useValue:"platform"});!function EC(i){if(Hi&&!Hi.destroyed&&!Hi.injector.get(MI,!1))throw new Re(400,"");Hi=i.get(hc);const s=i.get(Fv,null);s&&s.forEach(a=>a())}(Ps.create({providers:E,name:l}))}return function wC(i){const s=qm();if(!s)throw new Re(401,"");return s}()}}function qm(){return Hi&&!Hi.destroyed?Hi:null}let hc=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function Hv(i,s){let a;return a="noop"===i?new mC:("zone.js"===i?void 0:i)||new us({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:us,useValue:E}];return E.run(()=>{const A=Ps.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(A),k=S.injector.get(rd,null);if(!k)throw new Re(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:K=>{k.handleError(K)}});S.onDestroy(()=>{Wm(this._modules,S),V.unsubscribe()})}),function zm(i,s,a){try{const l=a();return If(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,E,()=>{const V=S.injector.get(qu);return V.runInitializers(),V.donePromise.then(()=>(function vw(i){Mt(i,"Expected localeId to be defined"),"string"==typeof i&&(xf=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Lv,um)||um),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=Qd({},l);return function Xf(i,s,a){const l=new vv(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const l=a.injector.get(ep);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Re(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ue(Ps))},i.\u0275prov=Gt({token:i,factory:i.\u0275fac}),i})();function Qd(i,s){return Array.isArray(s)?s.reduce(Qd,i):Object.assign(Object.assign({},i),s)}let ep=(()=>{class i{constructor(a,l,c,f,_){this._zone=a,this._injector=l,this._exceptionHandler=c,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new P.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new P.y(A=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{us.assertNotInAngularZone(),Um(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{us.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{S.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ae.T)(E,I.pipe((0,ne.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Re(405,"");let c;c=a instanceof Hw?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function SI(i){return i.isBoundToModule}(c)?void 0:this._injector.get(qd),E=c.create(Ps.NULL,[],l||c.selector,f),I=E.location.nativeElement,A=E.injector.get($v,null),S=A&&E.injector.get(TI);return A&&S&&S.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),Wm(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Wm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Lm,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ue(us),Ue(Ps),Ue(rd),Ue(zn),Ue(qu))},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Wm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Qa=!0,qv=!1;function IC(){return qv=!0,Qa}function zv(){if(qv)throw new Error("Cannot enable prod mode after platform setup.");Qa=!1}let Wv=(()=>{class i{}return i.__NG_ELEMENT_ID__=Km,i})();function Km(i){return function Zv(i,s,a){if(wc(i)&&!a){const l=Kn(i.index,s);return new Bf(l,l)}return 47&i.type?new Bf(s[16],s):null}(an(),Te(),16==(16&i))}class pc{constructor(){}supports(s){return wd(s)}create(s){return new UI(s)}}const Xd=(i,s)=>s;class UI{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Xd}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,f=null;for(;a||l;){const _=!l||a&&a.currentIndex<Qm(l,c,f)?a:l,E=Qm(_,c,f),I=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{f||(f=[]);const A=E-c,S=I-c;if(A!=S){for(let V=0;V<A;V++){const K=V<f.length?f[V]:f[V]=0,ye=K+V;S<=ye&&ye<A&&(f[V]=K+1)}f[_.previousIndex]=S-A}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!wd(s))throw new Re(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],_=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,f,_,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,E),l=!0),a=a._next}else c=0,function ub(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Au()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new eh(a,l),f,c),s}_verifyReinsertion(s,a,l,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new BI),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new BI),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class eh{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class CC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class BI{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new CC,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Qm(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Jm{constructor(){}supports(s){return s instanceof Map||Ul(s)}create(){return new Jv}}class Jv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Ul(s)))throw new Re(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const l=new Xv(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class Xv{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function jI(){return new e0([new pc])}let e0=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||jI()),deps:[[i,new Jn,new Cr]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Re(901,"")}}return i.\u0275prov=Gt({token:i,providedIn:"root",factory:jI}),i})();function Xm(){return new t0([new Jm])}let t0=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Xm()),deps:[[i,new Jn,new Cr]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Re(901,"")}}return i.\u0275prov=Gt({token:i,providedIn:"root",factory:Xm}),i})();const GI=xI(null,"core",[{provide:bI,useValue:"unknown"},{provide:hc,deps:[Ps]},{provide:TI,deps:[]},{provide:Vm,deps:[]}]);let xC=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ue(ep))},i.\u0275mod=Er({type:i}),i.\u0275inj=Ut({}),i})()},3942:(Qe,Ee,O)=>{O.d(Ee,{Z:()=>Re});var g=O(2090),J=O(4859),P=O(9681),ae=O(1877);class ne{constructor(he,be){this._delegate=he,this.firebase=be,(0,P._addComponent)(he,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(he,be=P._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(he);return!Ze.isInitialized()&&"EXPLICIT"===(null===(qe=Ze.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:be})}_removeServiceInstance(he,be=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(be)}_addComponent(he){(0,P._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,P._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ce(){const Le=function se(Le){const he={},be={__esModule:!0,initializeApp:function Ce(Ve,B={}){const _e=P.initializeApp(Ve,B);if((0,g.r3)(he,_e.name))return he[_e.name];const Z=new Le(_e,be);return he[_e.name]=Z,Z},app:Ze,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function we(Ve){const B=Ve.name,_e=B.replace("-compat","");if(P._registerComponent(Ve)&&"PUBLIC"===Ve.type){const Z=(re=Ze())=>{if("function"!=typeof re[_e])throw ue.create("invalid-app-argument",{appName:B});return re[_e]()};void 0!==Ve.serviceProps&&(0,g.ZB)(Z,Ve.serviceProps),be[_e]=Z,Le.prototype[_e]=function(...re){return this._getService.bind(this,B).apply(this,Ve.multipleInstances?re:[])}}return"PUBLIC"===Ve.type?be[_e]:null},removeApp:function qe(Ve){delete he[Ve]},useAsService:function Be(Ve,B){return"serverAuth"===B?null:B},modularAPIs:P}};function Ze(Ve){if(!(0,g.r3)(he,Ve=Ve||P._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Ve});return he[Ve]}return be.default=be,Object.defineProperty(be,"apps",{get:function ve(){return Object.keys(he).map(Ve=>he[Ve])}}),Ze.App=Le,be}(ne);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function he(be){(0,g.ZB)(Le,be)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Le}(),U=new ae.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=j;!function Ae(Le){(0,P.registerVersion)("@firebase/app-compat","0.1.26",Le)}()},9681:(Qe,Ee,O)=>{O.r(Ee),O.d(Ee,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>wi,_DEFAULT_ENTRY_NAME:()=>Mt,_addComponent:()=>Yt,_addOrOverwriteComponent:()=>Gt,_apps:()=>Wt,_clearComponents:()=>Zi,_components:()=>Dn,_getProvider:()=>Ut,_registerComponent:()=>_r,_removeServiceInstance:()=>St,deleteApp:()=>ct,getApp:()=>Kr,getApps:()=>li,initializeApp:()=>hs,onLog:()=>bn,registerVersion:()=>_n,setLogLevel:()=>Bs});var g=O(5861),J=O(4859),P=O(1877),ae=O(2090),ne=O(8766);class fe{constructor(Q){this.container=Q}getPlatformInfoString(){return this.container.getProviders().map(Se=>{if(function ue($){const Q=$.getComponent();return"VERSION"===(null==Q?void 0:Q.type)}(Se)){const Ye=Se.getImmediate();return`${Ye.library}/${Ye.version}`}return null}).filter(Se=>Se).join(" ")}}const se="@firebase/app",j=new P.Yd("@firebase/app"),Mt="[DEFAULT]",Ke={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Wt=new Map,Dn=new Map;function Yt($,Q){try{$.container.addComponent(Q)}catch(Se){j.debug(`Component ${Q.name} failed to register with FirebaseApp ${$.name}`,Se)}}function Gt($,Q){$.container.addOrOverwriteComponent(Q)}function _r($){const Q=$.name;if(Dn.has(Q))return j.debug(`There were multiple attempts to register component ${Q}.`),!1;Dn.set(Q,$);for(const Se of Wt.values())Yt(Se,$);return!0}function Ut($,Q){const Se=$.container.getProvider("heartbeat").getImmediate({optional:!0});return Se&&Se.triggerHeartbeat(),$.container.getProvider(Q)}function St($,Q,Se=Mt){Ut($,Q).clearInstance(Se)}function Zi(){Dn.clear()}const sr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class vr{constructor(Q,Se,Ye){this._isDeleted=!1,this._options=Object.assign({},Q),this._config=Object.assign({},Se),this._name=Se.name,this._automaticDataCollectionEnabled=Se.automaticDataCollectionEnabled,this._container=Ye,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this.checkDestroyed(),this._automaticDataCollectionEnabled=Q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Q){this._isDeleted=Q}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}const wi="9.8.2";function hs($,Q={}){"object"!=typeof Q&&(Q={name:Q});const Se=Object.assign({name:Mt,automaticDataCollectionEnabled:!1},Q),Ye=Se.name;if("string"!=typeof Ye||!Ye)throw sr.create("bad-app-name",{appName:String(Ye)});const ut=Wt.get(Ye);if(ut){if((0,ae.vZ)($,ut.options)&&(0,ae.vZ)(Se,ut.config))return ut;throw sr.create("duplicate-app",{appName:Ye})}const _t=new J.H0(Ye);for(const mt of Dn.values())_t.addComponent(mt);const sn=new vr($,Se,_t);return Wt.set(Ye,sn),sn}function Kr($=Mt){const Q=Wt.get($);if(!Q)throw sr.create("no-app",{appName:$});return Q}function li(){return Array.from(Wt.values())}function ct($){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,g.Z)(function*($){const Q=$.name;Wt.has(Q)&&(Wt.delete(Q),yield Promise.all($.container.getProviders().map(Se=>Se.delete())),$.isDeleted=!0)})).apply(this,arguments)}function _n($,Q,Se){var Ye;let ut=null!==(Ye=Ke[$])&&void 0!==Ye?Ye:$;Se&&(ut+=`-${Se}`);const _t=ut.match(/\s|\//),sn=Q.match(/\s|\//);if(_t||sn){const mt=[`Unable to register library "${ut}" with version "${Q}":`];return _t&&mt.push(`library name "${ut}" contains illegal characters (whitespace or "/")`),_t&&sn&&mt.push("and"),sn&&mt.push(`version name "${Q}" contains illegal characters (whitespace or "/")`),void j.warn(mt.join(" "))}_r(new J.wA(`${ut}-version`,()=>({library:ut,version:Q}),"VERSION"))}function bn($,Q){if(null!==$&&"function"!=typeof $)throw sr.create("invalid-log-argument");(0,P.Am)($,Q)}function Bs($){(0,P.Ub)($)}const An="firebase-heartbeat-store";let ci=null;function mo(){return ci||(ci=(0,ne.X3)("firebase-heartbeat-database",1,{upgrade:($,Q)=>{0===Q&&$.createObjectStore(An)}}).catch($=>{throw sr.create("storage-open",{originalErrorMessage:$.message})})),ci}function rt(){return(rt=(0,g.Z)(function*($){try{return(yield mo()).transaction(An).objectStore(An).get(Jr($))}catch(Q){throw sr.create("storage-get",{originalErrorMessage:Q.message})}})).apply(this,arguments)}function ht($,Q){return or.apply(this,arguments)}function or(){return(or=(0,g.Z)(function*($,Q){try{const Ye=(yield mo()).transaction(An,"readwrite");return yield Ye.objectStore(An).put(Q,Jr($)),Ye.done}catch(Se){throw sr.create("storage-set",{originalErrorMessage:Se.message})}})).apply(this,arguments)}function Jr($){return`${$.name}!${$.options.appId}`}class ar{constructor(Q){this.container=Q,this._heartbeatsCache=null;const Se=this.container.getProvider("app").getImmediate();this._storage=new H(Se),this._heartbeatsCachePromise=this._storage.read().then(Ye=>(this._heartbeatsCache=Ye,Ye))}triggerHeartbeat(){var Q=this;return(0,g.Z)(function*(){const Ye=Q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ut=ur();if(null===Q._heartbeatsCache&&(Q._heartbeatsCache=yield Q._heartbeatsCachePromise),Q._heartbeatsCache.lastSentHeartbeatDate!==ut&&!Q._heartbeatsCache.heartbeats.some(_t=>_t.date===ut))return Q._heartbeatsCache.heartbeats.push({date:ut,agent:Ye}),Q._heartbeatsCache.heartbeats=Q._heartbeatsCache.heartbeats.filter(_t=>{const sn=new Date(_t.date).valueOf();return Date.now()-sn<=2592e6}),Q._storage.overwrite(Q._heartbeatsCache)})()}getHeartbeatsHeader(){var Q=this;return(0,g.Z)(function*(){if(null===Q._heartbeatsCache&&(yield Q._heartbeatsCachePromise),null===Q._heartbeatsCache||0===Q._heartbeatsCache.heartbeats.length)return"";const Se=ur(),{heartbeatsToSend:Ye,unsentEntries:ut}=function L($,Q=1024){const Se=[];let Ye=$.slice();for(const ut of $){const _t=Se.find(sn=>sn.agent===ut.agent);if(_t){if(_t.dates.push(ut.date),q(Se)>Q){_t.dates.pop();break}}else if(Se.push({agent:ut.agent,dates:[ut.date]}),q(Se)>Q){Se.pop();break}Ye=Ye.slice(1)}return{heartbeatsToSend:Se,unsentEntries:Ye}}(Q._heartbeatsCache.heartbeats),_t=(0,ae.L)(JSON.stringify({version:2,heartbeats:Ye}));return Q._heartbeatsCache.lastSentHeartbeatDate=Se,ut.length>0?(Q._heartbeatsCache.heartbeats=ut,yield Q._storage.overwrite(Q._heartbeatsCache)):(Q._heartbeatsCache.heartbeats=[],Q._storage.overwrite(Q._heartbeatsCache)),_t})()}}function ur(){return(new Date).toISOString().substring(0,10)}class H{constructor(Q){this.app=Q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Q=this;return(0,g.Z)(function*(){return(yield Q._canUseIndexedDBPromise)&&(yield function Pt($){return rt.apply(this,arguments)}(Q.app))||{heartbeats:[]}})()}overwrite(Q){var Se=this;return(0,g.Z)(function*(){var Ye;if(yield Se._canUseIndexedDBPromise){const _t=yield Se.read();return ht(Se.app,{lastSentHeartbeatDate:null!==(Ye=Q.lastSentHeartbeatDate)&&void 0!==Ye?Ye:_t.lastSentHeartbeatDate,heartbeats:Q.heartbeats})}})()}add(Q){var Se=this;return(0,g.Z)(function*(){var Ye;if(yield Se._canUseIndexedDBPromise){const _t=yield Se.read();return ht(Se.app,{lastSentHeartbeatDate:null!==(Ye=Q.lastSentHeartbeatDate)&&void 0!==Ye?Ye:_t.lastSentHeartbeatDate,heartbeats:[..._t.heartbeats,...Q.heartbeats]})}})()}}function q($){return(0,ae.L)(JSON.stringify({version:2,heartbeats:$})).length}!function Ie($){_r(new J.wA("platform-logger",Q=>new fe(Q),"PRIVATE")),_r(new J.wA("heartbeat",Q=>new ar(Q),"PRIVATE")),_n(se,"0.7.25",$),_n(se,"0.7.25","esm2017"),_n("fire-js","")}("")},4859:(Qe,Ee,O)=>{O.d(Ee,{wA:()=>P,H0:()=>se});var g=O(5861),J=O(2090);class P{constructor(j,U,ee){this.name=j,this.instanceFactory=U,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ae="[DEFAULT]";class ne{constructor(j,U){this.name=j,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const U=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(U)){const ee=new J.BH;if(this.instancesDeferred.set(U,ee),this.isInitialized(U)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:U});Ge&&ee.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(U).promise}getImmediate(j){var U;const ee=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),Ge=null!==(U=null==j?void 0:j.optional)&&void 0!==U&&U;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Ae){if(Ge)return null;throw Ae}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ue(ce){return"EAGER"===ce.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(U){}for(const[U,ee]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(U);try{const Ae=this.getOrInitializeService({instanceIdentifier:Ge});ee.resolve(Ae)}catch(Ae){}}}}clearInstance(j=ae){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,g.Z)(function*(){const U=Array.from(j.instances.values());yield Promise.all([...U.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...U.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ae){return this.instances.has(j)}getOptions(j=ae){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:U={}}=j,ee=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ee,options:U});for(const[Ae,Re]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Ae)&&Re.resolve(Ge);return Ge}onInit(j,U){var ee;const Ge=this.normalizeInstanceIdentifier(U),Ae=null!==(ee=this.onInitCallbacks.get(Ge))&&void 0!==ee?ee:new Set;Ae.add(j),this.onInitCallbacks.set(Ge,Ae);const Re=this.instances.get(Ge);return Re&&j(Re,Ge),()=>{Ae.delete(j)}}invokeOnInitCallbacks(j,U){const ee=this.onInitCallbacks.get(U);if(ee)for(const Ge of ee)try{Ge(j,U)}catch(Ae){}}getOrInitializeService({instanceIdentifier:j,options:U={}}){let ee=this.instances.get(j);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=j,ce===ae?void 0:ce),options:U}),this.instances.set(j,ee),this.instancesOptions.set(j,U),this.invokeOnInitCallbacks(ee,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,ee)}catch(Ge){}var ce;return ee||null}normalizeInstanceIdentifier(j=ae){return this.component?this.component.multipleInstances?j:ae:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const U=this.getProvider(j.name);if(U.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);U.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const U=new ne(j,this);return this.providers.set(j,U),U}getProviders(){return Array.from(this.providers.values())}}},1877:(Qe,Ee,O)=>{O.d(Ee,{in:()=>J,Yd:()=>ue,Ub:()=>se,Am:()=>ce});const g=[];var J=(()=>{return(j=J||(J={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",J;var j})();const P={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ae=J.INFO,ne={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},fe=(j,U,...ee)=>{if(U<j.logLevel)return;const Ge=(new Date).toISOString(),Ae=ne[U];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[Ae](`[${Ge}]  ${j.name}:`,...ee)};class ue{constructor(U){this.name=U,this._logLevel=ae,this._logHandler=fe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in J))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?P[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...U),this._logHandler(this,J.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...U),this._logHandler(this,J.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,J.INFO,...U),this._logHandler(this,J.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,J.WARN,...U),this._logHandler(this,J.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...U),this._logHandler(this,J.ERROR,...U)}}function se(j){g.forEach(U=>{U.setLogLevel(j)})}function ce(j,U){for(const ee of g){let Ge=null;U&&U.level&&(Ge=P[U.level]),ee.userLogHandler=null===j?null:(Ae,Re,...Le)=>{const he=Le.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(qe){return null}}).filter(be=>be).join(" ");Re>=(null!=Ge?Ge:Ae.logLevel)&&j({level:J[Re].toLowerCase(),message:he,args:Le,type:Ae.name})}}}},8766:(Qe,Ee,O)=>{O.d(Ee,{Lj:()=>Ce,X3:()=>Ze});var g=O(5861);let P,ae;const ue=new WeakMap,se=new WeakMap,ce=new WeakMap,j=new WeakMap,U=new WeakMap;let Ae={get(B,_e,Z){if(B instanceof IDBTransaction){if("done"===_e)return se.get(B);if("objectStoreNames"===_e)return B.objectStoreNames||ce.get(B);if("store"===_e)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return be(B[_e])},set:(B,_e,Z)=>(B[_e]=Z,!0),has:(B,_e)=>B instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in B};function he(B){return"function"==typeof B?function Le(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(..._e){return B.apply(qe(this),_e),be(ue.get(this))}:function(..._e){return be(B.apply(qe(this),_e))}:function(_e,...Z){const re=B.call(qe(this),_e,...Z);return ce.set(re,_e.sort?_e.sort():[_e]),be(re)}}(B):(B instanceof IDBTransaction&&function Ge(B){if(se.has(B))return;const _e=new Promise((Z,re)=>{const X=()=>{B.removeEventListener("complete",me),B.removeEventListener("error",oe),B.removeEventListener("abort",oe)},me=()=>{Z(),X()},oe=()=>{re(B.error||new DOMException("AbortError","AbortError")),X()};B.addEventListener("complete",me),B.addEventListener("error",oe),B.addEventListener("abort",oe)});se.set(B,_e)}(B),((B,_e)=>_e.some(Z=>B instanceof Z))(B,function ne(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,Ae):B)}function be(B){if(B instanceof IDBRequest)return function ee(B){const _e=new Promise((Z,re)=>{const X=()=>{B.removeEventListener("success",me),B.removeEventListener("error",oe)},me=()=>{Z(be(B.result)),X()},oe=()=>{re(B.error),X()};B.addEventListener("success",me),B.addEventListener("error",oe)});return _e.then(Z=>{Z instanceof IDBCursor&&ue.set(Z,B)}).catch(()=>{}),U.set(_e,B),_e}(B);if(j.has(B))return j.get(B);const _e=he(B);return _e!==B&&(j.set(B,_e),U.set(_e,B)),_e}const qe=B=>U.get(B);function Ze(B,_e,{blocked:Z,upgrade:re,blocking:X,terminated:me}={}){const oe=indexedDB.open(B,_e),Ne=be(oe);return re&&oe.addEventListener("upgradeneeded",st=>{re(be(oe.result),st.oldVersion,st.newVersion,be(oe.transaction))}),Z&&oe.addEventListener("blocked",()=>Z()),Ne.then(st=>{me&&st.addEventListener("close",()=>me()),X&&st.addEventListener("versionchange",()=>X())}).catch(()=>{}),Ne}function Ce(B,{blocked:_e}={}){const Z=indexedDB.deleteDatabase(B);return _e&&Z.addEventListener("blocked",()=>_e()),be(Z).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],Be=new Map;function Ve(B,_e){if(!(B instanceof IDBDatabase)||_e in B||"string"!=typeof _e)return;if(Be.get(_e))return Be.get(_e);const Z=_e.replace(/FromIndex$/,""),re=_e!==Z,X=we.includes(Z);if(!(Z in(re?IDBIndex:IDBObjectStore).prototype)||!X&&!ve.includes(Z))return;const me=function(){var oe=(0,g.Z)(function*(Ne,...st){const Ot=this.transaction(Ne,X?"readwrite":"readonly");let Mt=Ot.store;return re&&(Mt=Mt.index(st.shift())),(yield Promise.all([Mt[Z](...st),X&&Ot.done]))[0]});return function(st){return oe.apply(this,arguments)}}();return Be.set(_e,me),me}!function Re(B){Ae=B(Ae)}(B=>vM(_M({},B),{get:(_e,Z,re)=>Ve(_e,Z)||B.get(_e,Z,re),has:(_e,Z)=>!!Ve(_e,Z)||B.has(_e,Z)}))},5861:(Qe,Ee,O)=>{function g(P,ae,ne,fe,ue,se,ce){try{var j=P[se](ce),U=j.value}catch(ee){return void ne(ee)}j.done?ae(U):Promise.resolve(U).then(fe,ue)}function J(P){return function(){var ae=this,ne=arguments;return new Promise(function(fe,ue){var se=P.apply(ae,ne);function ce(U){g(se,fe,ue,ce,j,"next",U)}function j(U){g(se,fe,ue,ce,j,"throw",U)}ce(void 0)})}}O.d(Ee,{Z:()=>J})}},Qe=>{Qe(Qe.s=2952)}]);